<!-- build time:Tue Dec 28 2021 23:19:03 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN,en,default"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" href="https://baiyezi.vip/rss.xml"><link rel="alternate" type="application/atom+xml" href="https://baiyezi.vip/atom.xml"><link rel="alternate" type="application/json" href="https://baiyezi.vip/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Java,数据库,IO,Redis,缓存"><link rel="canonical" href="https://baiyezi.vip/java/redis/redis%E5%AE%89%E8%A3%85%E5%8F%8ANIO%E5%8E%9F%E7%90%86/"><title>redis安装及NIO原理 - Java |</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">redis安装及NIO原理</h1><div class="meta"><span class="item" title="创建时间：2021-02-01 20:56:10"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-02-01T20:56:10+08:00">2021-02-01</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>14k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>13 分钟</span> </span><span id="java/redis/redis安装及NIO原理/" class="item leancloud_visitors" data-flag-title="" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start"></a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105418.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225104957.png"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/docsify/20211228231352.png"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105422.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105421.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/docsify/20211228230548.png"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/java/" itemprop="item" rel="index" title="分类于 Java"><span itemprop="name">Java</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://baiyezi.vip/java/redis/redis%E5%AE%89%E8%A3%85%E5%8F%8ANIO%E5%8E%9F%E7%90%86/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="fanfanfan"><meta itemprop="description" content=", 花有重开日，人无再少年"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content=""></span><div class="body md" itemprop="articleBody"><h2 id="基础知识"><a class="anchor" href="#基础知识">#</a> 基础知识</h2><h3 id="带宽和io"><a class="anchor" href="#带宽和io">#</a> 带宽和 I/O</h3><p>!&gt; 带宽和 I/O 限制了数据读取速度</p><p>磁盘的寻址为 ms 级别，带宽为 G/M 级别。内存的寻址为 ns 级别，带宽很大，在寻址上比磁盘快了 10 万倍。</p><p>磁盘由磁道和扇区组成。一扇区为 512Byte，为了找到数据存放于哪个扇区，就会为每个扇区添加一个索引，所以这个索引是比较大的。对于操作系统来说，是以 4K（实际取决于上层应用对数据的读取是否是 I/O 密集型，即单次对数据量访问较大时可以适当增大每次从磁盘读取数据的单位大小）为单位从磁盘来读取数据存到内存，所以当文件较大时，I/O 次数就会增多，表现出来就是速度较慢。</p><p>对于常用的磁盘型数据库来说，在有索引的情况下，少量查询依然很快，但是并发大的时候就会受到磁盘带宽的限制而影响查询速度。而内存型数据库，比如 HANA 等可以解决带宽的限制，但是成本又过高。于是就有一个折中的办法，将部分常用数据放在内存中进行缓存，这样可以提高访问速度，实现缓存的技术有如 memcached、redis 等。</p><h3 id="两个基础设施"><a class="anchor" href="#两个基础设施">#</a> 两个基础设施</h3><p>自计算机产生以来，这两个基础设施限制了带宽以及 I/O</p><ol><li>冯诺依曼体系的硬件</li><li>以太网，tcp/ip 的网络</li></ol><h3 id="数据库介绍"><a class="anchor" href="#数据库介绍">#</a> 数据库介绍</h3><p><span class="exturl" data-url="aHR0cHM6Ly9kYi1lbmdpbmVzLmNvbS9lbi8=">各类数据库引擎</span></p><h2 id="redis"><a class="anchor" href="#redis">#</a> redis</h2><p><span class="exturl" data-url="aHR0cHM6Ly9yZWRpcy5pby8=">redis 官网</span></p><p><span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi8=">redis 中文官网</span></p><p>Redis is an open source (BSD licensed), in-memory data structure store, used as a database, cache and message broker. It supports data structures such as strings, hashes, lists, sets, sorted sets with range queries, bitmaps, hyperloglogs, geospatial indexes with radius queries and streams. Redis has built-in replication, Lua scripting, LRU eviction, transactions and different levels of on-disk persistence, and provides high availability via Redis Sentinel and automatic partitioning with Redis Cluster.</p><p>翻译：</p><p>Redis 是一个开源（BSD 许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvZGF0YS10eXBlcy1pbnRyby5odG1sI3N0cmluZ3M=">字符串（strings）</span>， <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvZGF0YS10eXBlcy1pbnRyby5odG1sI2hhc2hlcw==">散列（hashes）</span>， <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvZGF0YS10eXBlcy1pbnRyby5odG1sI2xpc3Rz">列表（lists）</span>， <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvZGF0YS10eXBlcy1pbnRyby5odG1sI3NldHM=">集合（sets）</span>， <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvZGF0YS10eXBlcy1pbnRyby5odG1sI3NvcnRlZC1zZXRz">有序集合（sorted sets）</span> 与范围查询， <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvZGF0YS10eXBlcy1pbnRyby5odG1sI2JpdG1hcHM=">bitmaps</span>， <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvZGF0YS10eXBlcy1pbnRyby5odG1sI2h5cGVybG9nbG9ncw==">hyperloglogs</span> 和 <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi9jb21tYW5kcy9nZW9hZGQuaHRtbA==">地理空间（geospatial）</span> 索引半径查询。 Redis 内置了 <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvcmVwbGljYXRpb24uaHRtbA==">复制（replication）</span>，<span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi9jb21tYW5kcy9ldmFsLmh0bWw=">LUA 脚本（Lua scripting）</span>， <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvbHJ1LWNhY2hlLmh0bWw=">LRU 驱动事件（LRU eviction）</span>，<span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvdHJhbnNhY3Rpb25zLmh0bWw=">事务（transactions）</span> 和不同级别的 <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvcGVyc2lzdGVuY2UuaHRtbA==">磁盘持久化（persistence）</span>， 并通过 <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3Mvc2VudGluZWwuaHRtbA==">Redis 哨兵（Sentinel）</span>和自动 <span class="exturl" data-url="aHR0cDovL3d3dy5yZWRpcy5jbi90b3BpY3MvY2x1c3Rlci10dXRvcmlhbC5odG1s">分区（Cluster）</span>提供高可用性（high availability）。</p><h3 id="安装redis"><a class="anchor" href="#安装redis">#</a> 安装 redis</h3><blockquote><p>[!tip]</p><p>Redis：redis-6.0.9</p><p>Linux：CentOS8</p></blockquote><p><span class="exturl" data-url="aHR0cHM6Ly9kb3dubG9hZC5yZWRpcy5pby9yZWxlYXNlcy9yZWRpcy02LjAuOS50YXIuZ3o=">redis 下载地址</span></p><p>安装步骤：</p><ol><li><p>redis 下载</p><p>linux 有网的话直接使用 wget 下载即可</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 使用 yum 安装 wget</span></pre></td></tr><tr><td data-num="2"></td><td><pre>yum <span class="token function">install</span> <span class="token function">wget</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 使用 wget 下载 redis</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">wget</span>  https://download.redis.io/releases/redis-6.0.9.tar.gz</pre></td></tr></table></figure><p>如果 linux 没有网络的话，就先手动去官网下载好 redis，然后利用 xftp 等终端工具上传下载好的 redis 到 linux 中解压即可</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># tar -zxvf redis-6.0.6.tar.gz -C /usr/local</span></pre></td></tr></table></figure><p>如果 pc 有无线网卡且有无线网络（连接手机热点也行）的话可以设置虚拟机使用该无线网，从而使得 linux 可以上网，具体如下：</p><p>win X 查看自己 PC 的设备管理器中无线网卡名字，带有 Wireless 的就是无线网卡</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20201208232308.png" alt="image-20201208232300080"></p><p>在虚拟机 - 编辑 - 虚拟网络编辑器 - 更改设置 - 将 VMnet0 桥接到刚才查找的无线网卡 - 应用 - 确定</p><p><img data-src="redis%E4%BB%8B%E7%BB%8D%E5%8F%8ANIO%E5%8E%9F%E7%90%86.assets/image-20201208232405679.png" alt="image-20201208232405679"></p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20201208232621.png" alt="image-20201208232619688"></p><p>之后在虚拟机右下角中选中网络适配器 - 设置 - 自定义 - 选择 VMnet0 - 确定</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20201208232737.png" alt="image-20201208232736384"></p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20201208232852.png" alt="image-20201208232850331"></p><p>最后，重启 ens33 网卡即可</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># nmcli c up ens33</span></pre></td></tr></table></figure><p>此时，测试有无网络，下载 redis 试试</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20201208233115.png" alt="image-20201208233114533"></p></li><li><p>安装 redis</p><p>进入解压好的目录中看看包含哪些文件。列出的文件中，README.md 文件详细说明了 redis 安装步骤</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /usr/local</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost local<span class="token punctuation">]</span><span class="token comment"># cd redis-6.0.6/</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@localhost redis-6.0.6<span class="token punctuation">]</span><span class="token comment"># ll</span></pre></td></tr><tr><td data-num="4"></td><td><pre>总用量 <span class="token number">260</span></pre></td></tr><tr><td data-num="5"></td><td><pre>-rw-rw-r--.  <span class="token number">1</span> root root <span class="token number">80561</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 00-RELEASENOTES</pre></td></tr><tr><td data-num="6"></td><td><pre>-rw-rw-r--.  <span class="token number">1</span> root root    <span class="token number">51</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 BUGS</pre></td></tr><tr><td data-num="7"></td><td><pre>-rw-rw-r--.  <span class="token number">1</span> root root  <span class="token number">2381</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 CONTRIBUTING</pre></td></tr><tr><td data-num="8"></td><td><pre>-rw-rw-r--.  <span class="token number">1</span> root root  <span class="token number">1487</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 COPYING</pre></td></tr><tr><td data-num="9"></td><td><pre>drwxrwxr-x.  <span class="token number">6</span> root root   <span class="token number">124</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 deps</pre></td></tr><tr><td data-num="10"></td><td><pre>-rw-rw-r--.  <span class="token number">1</span> root root    <span class="token number">11</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 INSTALL</pre></td></tr><tr><td data-num="11"></td><td><pre>-rw-rw-r--.  <span class="token number">1</span> root root   <span class="token number">151</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 Makefile</pre></td></tr><tr><td data-num="12"></td><td><pre>-rw-rw-r--.  <span class="token number">1</span> root root  <span class="token number">6888</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 MANIFESTO</pre></td></tr><tr><td data-num="13"></td><td><pre>-rw-rw-r--.  <span class="token number">1</span> root root <span class="token number">20806</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 README.md</pre></td></tr><tr><td data-num="14"></td><td><pre>-rw-rw-r--.  <span class="token number">1</span> root root <span class="token number">83392</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 redis.conf</pre></td></tr><tr><td data-num="15"></td><td><pre>-rwxrwxr-x.  <span class="token number">1</span> root root   <span class="token number">275</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 runtest</pre></td></tr><tr><td data-num="16"></td><td><pre>-rwxrwxr-x.  <span class="token number">1</span> root root   <span class="token number">280</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 runtest-cluster</pre></td></tr><tr><td data-num="17"></td><td><pre>-rwxrwxr-x.  <span class="token number">1</span> root root   <span class="token number">679</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 runtest-moduleapi</pre></td></tr><tr><td data-num="18"></td><td><pre>-rwxrwxr-x.  <span class="token number">1</span> root root   <span class="token number">281</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 runtest-sentinel</pre></td></tr><tr><td data-num="19"></td><td><pre>-rw-rw-r--.  <span class="token number">1</span> root root <span class="token number">10743</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 sentinel.conf</pre></td></tr><tr><td data-num="20"></td><td><pre>drwxrwxr-x.  <span class="token number">3</span> root root  <span class="token number">4096</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 src</pre></td></tr><tr><td data-num="21"></td><td><pre>drwxrwxr-x. <span class="token number">11</span> root root   <span class="token number">182</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 tests</pre></td></tr><tr><td data-num="22"></td><td><pre>-rw-rw-r--.  <span class="token number">1</span> root root  <span class="token number">3055</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 TLS.md</pre></td></tr><tr><td data-num="23"></td><td><pre>drwxrwxr-x.  <span class="token number">9</span> root root  <span class="token number">4096</span> <span class="token number">7</span>月  <span class="token number">21</span> 02:08 utils</pre></td></tr></table></figure><ul><li><p>编译 redis</p><p>执行 make 命令（注意在 redis 的解压目录下）后可以看到编译过程，大概持续数十秒</p></li></ul><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost redis-6.0.6<span class="token punctuation">]</span><span class="token comment"># make</span></pre></td></tr></table></figure><p>编译后的二进制等文件存放在 /usr/local 目录下</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201208164725802.png" alt="image-20201208164725802"></p><p>如果执行 make 编译命令后报时错找不到 cc，即 c 语言编译器，那么需要下载安装 c 语言编译器，一般安装 gcc 编译器即可（一般来说，安装 centos8 时会有安装选项，同时选择安装常需的开发环境后，应该是会包含 gcc 编译器的）</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201208165149744.png" alt="image-20201208165149744"></p></li></ol><p>安装 gcc：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>yum <span class="token function">install</span> gcc</pre></td></tr></table></figure><p>如果 linux 没有网络的话就只能执行 gcc 相关的 rpm 包离线安装</p><p>链接：<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMXZEVk1nbU9TeG5jTE9UNjVNSDFzSEE=">https://pan.baidu.com/s/1vDVMgmOSxncLOT65MH1sHA</span><br>提取码：htsi</p><p>将 gcc.tar.gz 解压，然后进入到解压目录 gcc，执行：</p><p>rpm -Uvh *.rpm --nodeps --force</p><p>等待 gcc 安装完成后，先清除刚才编译出错的文件，然后重新编译</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost redis-6.0.6<span class="token punctuation">]</span><span class="token comment"># make distclean</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost redis-6.0.6<span class="token punctuation">]</span><span class="token comment"># make</span></pre></td></tr></table></figure><p>输出以下信息，则证明编译成功</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201208180512847.png" alt="image-20201208180512847"></p><ul><li><p>启动 redis-server 测试</p><p>编译完成之后进入 redis 目录下的 src 文件夹，然后启动 redis-server。ctrl C 可以结束该服务。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost redis-6.0.9<span class="token punctuation">]</span><span class="token comment"># cd src/</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost src<span class="token punctuation">]</span><span class="token comment"># ./redis-server </span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token number">40526</span>:C 09 Dec <span class="token number">2020</span> 07:42:07.741 <span class="token comment"># oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token number">40526</span>:C 09 Dec <span class="token number">2020</span> 07:42:07.741 <span class="token comment"># Redis version=6.0.9, bits=64, commit=00000000, modified=0, pid=40526, just started</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token number">40526</span>:C 09 Dec <span class="token number">2020</span> 07:42:07.741 <span class="token comment"># Warning: no config file specified, using the default config. In order to specify a config file use ./redis-server /path/to/redis.conf</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token number">40526</span>:M 09 Dec <span class="token number">2020</span> 07:42:07.742 * Increased maximum number of <span class="token function">open</span> files to <span class="token number">10032</span> <span class="token punctuation">(</span>it was originally <span class="token builtin class-name">set</span> to <span class="token number">1024</span><span class="token punctuation">)</span>.</pre></td></tr><tr><td data-num="7"></td><td><pre>                _._                                                  </pre></td></tr><tr><td data-num="8"></td><td><pre>           _.-`<span class="token variable"><span class="token variable">`</span>__ <span class="token string">''</span>-._                                             </span></pre></td></tr><tr><td data-num="9"></td><td><pre>      _.-<span class="token variable">`</span><span class="token variable"><span class="token variable">`</span>    <span class="token variable">`</span></span><span class="token builtin class-name">.</span>  <span class="token variable"><span class="token variable">`</span>_.  <span class="token string">''</span>-._           Redis <span class="token number">6.0</span>.9 <span class="token punctuation">(</span>00000000/0<span class="token punctuation">)</span> <span class="token number">64</span> bit</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  .-<span class="token variable">`</span><span class="token variable"><span class="token variable">`</span> .-<span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">.</span>  <span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span><span class="token punctuation">\</span>/    _.,_ <span class="token string">''</span>-._                                   </span></pre></td></tr><tr><td data-num="11"></td><td><pre> <span class="token punctuation">(</span>    '      ,       .-<span class="token variable">`</span>  <span class="token operator">|</span> <span class="token variable"><span class="token variable">`</span>,    <span class="token punctuation">)</span>     Running <span class="token keyword">in</span> standalone mode</span></pre></td></tr><tr><td data-num="12"></td><td><pre> <span class="token operator">|</span><span class="token variable">`</span>-._<span class="token variable"><span class="token variable">`</span>-<span class="token punctuation">..</span>.-<span class="token variable">`</span></span> __<span class="token punctuation">..</span>.-.`<span class="token variable"><span class="token variable">`</span>-._<span class="token operator">|</span>'<span class="token variable">`</span></span> _.-<span class="token string">'|     Port: 6379</span></pre></td></tr><tr><td data-num="13"></td><td><pre> |    `-._   `._    /     _.-'    <span class="token operator">|</span>     PID: <span class="token number">40526</span></pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token variable"><span class="token variable">`</span>-._    <span class="token variable">`</span></span>-._  <span class="token variable"><span class="token variable">`</span>-./  _.-<span class="token string">'    _.-'</span>                                   </span></pre></td></tr><tr><td data-num="15"></td><td><pre> <span class="token operator">|</span><span class="token variable">`</span>-._<span class="token variable"><span class="token variable">`</span>-._    <span class="token variable">`</span></span>-.__.-<span class="token string">'    _.-'</span>_.-<span class="token string">'|                                  </span></pre></td></tr><tr><td data-num="16"></td><td><pre> |    `-._`-._        _.-'_.-<span class="token string">'    |           http://redis.io        </span></pre></td></tr><tr><td data-num="17"></td><td><pre>  `-._    `-._`-.__.-'_.-<span class="token string">'    _.-'</span>                                   </pre></td></tr><tr><td data-num="18"></td><td><pre> <span class="token operator">|</span><span class="token variable"><span class="token variable">`</span>-._<span class="token variable">`</span></span>-._    <span class="token variable"><span class="token variable">`</span>-.__.-<span class="token string">'    _.-'</span>_.-'<span class="token operator">|</span>                                  </span></pre></td></tr><tr><td data-num="19"></td><td><pre> <span class="token operator">|</span>    <span class="token variable">`</span>-._<span class="token variable"><span class="token variable">`</span>-._        _.-<span class="token string">'_.-'</span>    <span class="token operator">|</span>                                  </span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token variable">`</span>-._    <span class="token variable"><span class="token variable">`</span>-._<span class="token variable">`</span></span>-.__.-<span class="token string">'_.-'</span>    _.-<span class="token string">'                                   </span></pre></td></tr><tr><td data-num="21"></td><td><pre>      `-._    `-.__.-'    _.-<span class="token string">'                                       </span></pre></td></tr><tr><td data-num="22"></td><td><pre>          `-._        _.-'                                           </pre></td></tr><tr><td data-num="23"></td><td><pre>              `-.__.-<span class="token string">'                                               </span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>40526:M 09 Dec 2020 07:42:07.743 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</pre></td></tr><tr><td data-num="26"></td><td><pre>40526:M 09 Dec 2020 07:42:07.743 # Server initialized</pre></td></tr><tr><td data-num="27"></td><td><pre>40526:M 09 Dec 2020 07:42:07.743 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory <span class="token operator">=</span> <span class="token number">1</span><span class="token string">' to /etc/sysctl.conf and then reboot or run the command '</span>sysctl vm.overcommit_memory<span class="token operator">=</span><span class="token number">1</span>' <span class="token keyword">for</span> this to take effect.</pre></td></tr></table></figure><p>但是每次启动 redis 都需要进入相应目录下就会显得很繁琐，所以，在 linux 都会将软件注册成服务，使得随便在哪个目录下就可以通过命令行来启动</p></li><li><p>将以上编译好的 redis 安装在其他目录（避免与 redis 源码混在一起，也可以选择不安装其他目录，但在以下执行./install_server.sh 时需要手动指定 redis-server 所在目录。）</p></li></ul><p>默认是安装在 /usr/local/bin，可以通过 PREFIX 来自定义目录（如果没有该目录将自动创建）</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost redis-6.0.6<span class="token punctuation">]</span><span class="token comment"># make install PREFIX=/opt/fan/redis6</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token builtin class-name">cd</span> src <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span></pre></td></tr><tr><td data-num="3"></td><td><pre>make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: 进入目录“/usr/local/redis-6.0.6/src”</pre></td></tr><tr><td data-num="4"></td><td><pre>    CC Makefile.dep</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>Hint: It<span class="token string">'s a good idea to run '</span><span class="token function">make</span> test' <span class="token punctuation">;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    INSTALL <span class="token function">install</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    INSTALL <span class="token function">install</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    INSTALL <span class="token function">install</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    INSTALL <span class="token function">install</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    INSTALL <span class="token function">install</span></pre></td></tr><tr><td data-num="13"></td><td><pre>make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: 离开目录“/usr/local/redis-6.0.6/src”</pre></td></tr></table></figure><p>之后，将安装的 redis 配置在环境变量中（这和 win 中原理是一样的），这样就可以在任何目录下来启动 redis 服务</p><p>编辑 /etc/profile 文件，在最后加入两行内容，别忘了保存退出（Esc :wq! 回车）</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost redis-6.0.6<span class="token punctuation">]</span><span class="token comment"># vim /etc/profile</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token builtin class-name">export</span> <span class="token assign-left variable">REDIS_HOME</span><span class="token operator">=</span>/opt/fan/redis6</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$REDIS_HOME</span>/bin</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 使该文件立即生效</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">[</span>root@localhost redis-6.0.6<span class="token punctuation">]</span><span class="token comment"># source /etc/profile</span></pre></td></tr></table></figure><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201209095455060.png" alt="image-20201209095455060"></p><p>之后，进入 redis 解压目录的 utils 目录，执行 install_server.sh 脚本</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost redis-6.0.6<span class="token punctuation">]</span><span class="token comment"># cd utils/</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost utils<span class="token punctuation">]</span><span class="token comment"># ./install_server.sh</span></pre></td></tr></table></figure><p>此时报错，编辑该脚本，将报错的行注释掉（76~83 行），别忘了保存退出</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost utils<span class="token punctuation">]</span><span class="token comment"># vim install_server.sh</span></pre></td></tr></table></figure><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201209101634618.png" alt="image-20201209101634618"></p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201209101805584.png" alt="image-20201209101805584"></p><p>再次执行该脚本，一直回车即可</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost utils<span class="token punctuation">]</span><span class="token comment"># ./install_server.sh </span></pre></td></tr><tr><td data-num="2"></td><td><pre>Welcome to the redis <span class="token function">service</span> installer</pre></td></tr><tr><td data-num="3"></td><td><pre>This script will <span class="token builtin class-name">help</span> you easily <span class="token builtin class-name">set</span> up a running redis server</pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>Please <span class="token keyword">select</span> the redis port <span class="token keyword">for</span> this instance: <span class="token punctuation">[</span><span class="token number">6379</span><span class="token punctuation">]</span>  <span class="token comment"># redis 默认端口 6379</span></pre></td></tr><tr><td data-num="6"></td><td><pre>Selecting default: <span class="token number">6379</span></pre></td></tr><tr><td data-num="7"></td><td><pre>Please <span class="token keyword">select</span> the redis config <span class="token function">file</span> name <span class="token punctuation">[</span>/etc/redis/6379.conf<span class="token punctuation">]</span>  <span class="token comment">#redis 配置文件</span></pre></td></tr><tr><td data-num="8"></td><td><pre>Selected default - /etc/redis/6379.conf</pre></td></tr><tr><td data-num="9"></td><td><pre>Please <span class="token keyword">select</span> the redis log <span class="token function">file</span> name <span class="token punctuation">[</span>/var/log/redis_6379.log<span class="token punctuation">]</span>  <span class="token comment">#redis 日志文件</span></pre></td></tr><tr><td data-num="10"></td><td><pre>Selected default - /var/log/redis_6379.log</pre></td></tr><tr><td data-num="11"></td><td><pre>Please <span class="token keyword">select</span> the data directory <span class="token keyword">for</span> this instance <span class="token punctuation">[</span>/var/lib/redis/6379<span class="token punctuation">]</span>  <span class="token comment">#redis 数据文件</span></pre></td></tr><tr><td data-num="12"></td><td><pre>Selected default - /var/lib/redis/6379</pre></td></tr><tr><td data-num="13"></td><td><pre>Please <span class="token keyword">select</span> the redis executable path <span class="token punctuation">[</span>/opt/fan/redis6/bin/redis-server<span class="token punctuation">]</span>  <span class="token comment">#由于在环境变量中配置了安装的 redis，所以能读取到 redis-server。否则，需要自己手动输入 /usr/local/redis-6.0.6/src/redis-server</span></pre></td></tr><tr><td data-num="14"></td><td><pre>Selected config:</pre></td></tr><tr><td data-num="15"></td><td><pre>Port           <span class="token builtin class-name">:</span> <span class="token number">6379</span></pre></td></tr><tr><td data-num="16"></td><td><pre>Config <span class="token function">file</span>    <span class="token builtin class-name">:</span> /etc/redis/6379.conf</pre></td></tr><tr><td data-num="17"></td><td><pre>Log <span class="token function">file</span>       <span class="token builtin class-name">:</span> /var/log/redis_6379.log</pre></td></tr><tr><td data-num="18"></td><td><pre>Data <span class="token function">dir</span>       <span class="token builtin class-name">:</span> /var/lib/redis/6379</pre></td></tr><tr><td data-num="19"></td><td><pre>Executable     <span class="token builtin class-name">:</span> /opt/fan/redis6/bin/redis-server</pre></td></tr><tr><td data-num="20"></td><td><pre>Cli Executable <span class="token builtin class-name">:</span> /opt/fan/redis6/bin/redis-cli</pre></td></tr><tr><td data-num="21"></td><td><pre>Is this ok? Then press ENTER to go on or Ctrl-C to abort.</pre></td></tr><tr><td data-num="22"></td><td><pre>Copied /tmp/6379.conf <span class="token operator">=</span><span class="token operator">></span> /etc/init.d/redis_6379  <span class="token comment">#将 redis 服务进程添加在 /etc/init.d，linux 所有服务都在 /etc/init.d 目录下</span></pre></td></tr><tr><td data-num="23"></td><td><pre>Installing service<span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="24"></td><td><pre>Successfully added to chkconfig<span class="token operator">!</span> <span class="token comment"># 将 redis 服务进程（实例）添加到开机自动启动的列表中</span></pre></td></tr><tr><td data-num="25"></td><td><pre>Successfully added to runlevels <span class="token number">345</span><span class="token operator">!</span> <span class="token comment">#redis 服务进程启动级别为 345</span></pre></td></tr><tr><td data-num="26"></td><td><pre>Starting Redis server<span class="token punctuation">..</span>. <span class="token comment">#启动 redis 服务进程</span></pre></td></tr><tr><td data-num="27"></td><td><pre>Installation successful<span class="token operator">!</span></pre></td></tr></table></figure><p>之后便可以通过命令行来操作 redis 实例了</p><p>service redis_[port] status/start/stop</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost utils<span class="token punctuation">]</span><span class="token comment"># service redis_6379 status</span></pre></td></tr><tr><td data-num="2"></td><td><pre>Redis is running <span class="token punctuation">(</span><span class="token number">4390</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>注意：</p><p>一个物理机中可以有多个 redis 实例（进程），通过 port 端口区分，这些 redis 实例共用一份安装程序（即共用 redis-server 服务器），但各自有各自的配置文件以及数据文件等资源（一般以端口作为区分）。</p><p>例如，再添加一个 redis 实例，只需在第一步输入其他端口（这里输入 6380）即可一直回车</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost utils<span class="token punctuation">]</span><span class="token comment"># ./install_server.sh </span></pre></td></tr><tr><td data-num="2"></td><td><pre>Welcome to the redis <span class="token function">service</span> installer</pre></td></tr><tr><td data-num="3"></td><td><pre>This script will <span class="token builtin class-name">help</span> you easily <span class="token builtin class-name">set</span> up a running redis server</pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>Please <span class="token keyword">select</span> the redis port <span class="token keyword">for</span> this instance: <span class="token punctuation">[</span><span class="token number">6379</span><span class="token punctuation">]</span> <span class="token number">6380</span> <span class="token comment"># 输入其他端口后回车</span></pre></td></tr><tr><td data-num="6"></td><td><pre>Please <span class="token keyword">select</span> the redis config <span class="token function">file</span> name <span class="token punctuation">[</span>/etc/redis/6380.conf<span class="token punctuation">]</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>Selected default - /etc/redis/6380.conf</pre></td></tr><tr><td data-num="8"></td><td><pre>Please <span class="token keyword">select</span> the redis log <span class="token function">file</span> name <span class="token punctuation">[</span>/var/log/redis_6380.log<span class="token punctuation">]</span> </pre></td></tr><tr><td data-num="9"></td><td><pre>Selected default - /var/log/redis_6380.log</pre></td></tr><tr><td data-num="10"></td><td><pre>Please <span class="token keyword">select</span> the data directory <span class="token keyword">for</span> this instance <span class="token punctuation">[</span>/var/lib/redis/6380<span class="token punctuation">]</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>Selected default - /var/lib/redis/6380</pre></td></tr><tr><td data-num="12"></td><td><pre>Please <span class="token keyword">select</span> the redis executable path <span class="token punctuation">[</span>/opt/fan/redis6/bin/redis-server<span class="token punctuation">]</span> </pre></td></tr><tr><td data-num="13"></td><td><pre>Selected config:</pre></td></tr><tr><td data-num="14"></td><td><pre>Port           <span class="token builtin class-name">:</span> <span class="token number">6380</span></pre></td></tr><tr><td data-num="15"></td><td><pre>Config <span class="token function">file</span>    <span class="token builtin class-name">:</span> /etc/redis/6380.conf</pre></td></tr><tr><td data-num="16"></td><td><pre>Log <span class="token function">file</span>       <span class="token builtin class-name">:</span> /var/log/redis_6380.log</pre></td></tr><tr><td data-num="17"></td><td><pre>Data <span class="token function">dir</span>       <span class="token builtin class-name">:</span> /var/lib/redis/6380</pre></td></tr><tr><td data-num="18"></td><td><pre>Executable     <span class="token builtin class-name">:</span> /opt/fan/redis6/bin/redis-server</pre></td></tr><tr><td data-num="19"></td><td><pre>Cli Executable <span class="token builtin class-name">:</span> /opt/fan/redis6/bin/redis-cli</pre></td></tr><tr><td data-num="20"></td><td><pre>Is this ok? Then press ENTER to go on or Ctrl-C to abort.</pre></td></tr><tr><td data-num="21"></td><td><pre>Copied /tmp/6380.conf <span class="token operator">=</span><span class="token operator">></span> /etc/init.d/redis_6380</pre></td></tr><tr><td data-num="22"></td><td><pre>Installing service<span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="23"></td><td><pre>Successfully added to chkconfig<span class="token operator">!</span></pre></td></tr><tr><td data-num="24"></td><td><pre>Successfully added to runlevels <span class="token number">345</span><span class="token operator">!</span></pre></td></tr><tr><td data-num="25"></td><td><pre>Starting Redis server<span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="26"></td><td><pre>Installation successful<span class="token operator">!</span></pre></td></tr></table></figure><p>查看开启的 redis 实例进程，可以看到以上开启的两个 redis 进程</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost utils<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep redis</span></pre></td></tr><tr><td data-num="2"></td><td><pre>root       <span class="token number">4390</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">18</span>:19 ?        00:00:01 /opt/fan/redis6/bin/redis-server <span class="token number">127.0</span>.0.1:6379</pre></td></tr><tr><td data-num="3"></td><td><pre>root       <span class="token number">4665</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">18</span>:36 ?        00:00:00 /opt/fan/redis6/bin/redis-server <span class="token number">127.0</span>.0.1:6380</pre></td></tr><tr><td data-num="4"></td><td><pre>root       <span class="token number">4687</span>   <span class="token number">3107</span>  <span class="token number">0</span> <span class="token number">18</span>:38 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto redis</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>root@localhost utils<span class="token punctuation">]</span><span class="token comment">#</span></pre></td></tr></table></figure><p>查看开机自启的服务列表，可以看到以上安装的两个 redis 服务进程都在列表中</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost src<span class="token punctuation">]</span><span class="token comment"># chkconfig --list</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>注：该输出结果只显示 SysV 服务，并不包含</pre></td></tr><tr><td data-num="4"></td><td><pre>原生 systemd 服务。SysV 配置数据</pre></td></tr><tr><td data-num="5"></td><td><pre>可能被原生 systemd 配置覆盖。 </pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>      要列出 systemd 服务，请执行 <span class="token string">'systemctl list-unit-files'</span>。</pre></td></tr><tr><td data-num="8"></td><td><pre>      查看在具体 target 启用的服务请执行</pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token string">'systemctl list-dependencies [target]'</span>。</pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>mysql          	<span class="token number">0</span>:关	<span class="token number">1</span>:关	<span class="token number">2</span>:开	<span class="token number">3</span>:开	<span class="token number">4</span>:开	<span class="token number">5</span>:开	<span class="token number">6</span>:关</pre></td></tr><tr><td data-num="12"></td><td><pre>redis_6379     	<span class="token number">0</span>:关	<span class="token number">1</span>:关	<span class="token number">2</span>:开	<span class="token number">3</span>:开	<span class="token number">4</span>:开	<span class="token number">5</span>:开	<span class="token number">6</span>:关</pre></td></tr><tr><td data-num="13"></td><td><pre>redis_6380     	<span class="token number">0</span>:关	<span class="token number">1</span>:关	<span class="token number">2</span>:开	<span class="token number">3</span>:开	<span class="token number">4</span>:开	<span class="token number">5</span>:开	<span class="token number">6</span>:关</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">[</span>root@localhost src<span class="token punctuation">]</span><span class="token comment">#</span></pre></td></tr></table></figure><h3 id="redis与nio"><a class="anchor" href="#redis与nio">#</a> redis 与 NIO</h3><p>redis 是单进程、单线程、单实例，那么在高并发中如何快速处理多个请求呢？</p><p>这个问题涉及到了 IO 的发展：BIO、NIO</p><h4 id="文件描述符"><a class="anchor" href="#文件描述符">#</a> 文件描述符</h4><p>可以通过帮助文档来查看，比如说查看 read，read 在 2 类（总共有 8 类）帮助文档中。在函数 ssize_t read (int fd, void *buf, size_t count); 中有一个参数 fd，该参数代表文件描述符（是一个整数，linux 中一切皆文件，类比 java 中的对象），其中，0 代表标准输入、1 代表标准输出、2 代表报错输出。read 就是从文件描述符中读取数据。</p><p>linux 中每个进程都有若干 I/O，每个 I/O 都有文件描述符，其中 I/O 就包括 socket，这意味着进程会使用 socket 来传输数据。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 安装文档查看工具 man</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># yum install man man-pages</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 查看 2 类文档中 read，即查看系统调用 read，系统调用是指内核暴露给程序的一个调用方法</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># man 2 read</span></pre></td></tr><tr><td data-num="5"></td><td><pre>READ<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>                       Linux Programmer<span class="token string">'s Manual                      READ(2)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>NAME</pre></td></tr><tr><td data-num="8"></td><td><pre>       read - read from a file descriptor</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>SYNOPSIS</pre></td></tr><tr><td data-num="11"></td><td><pre>       #include &lt;unistd.h></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>       ssize_t read(int fd, void *buf, size_t count);</pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>DESCRIPTION</pre></td></tr><tr><td data-num="16"></td><td><pre>       read()  attempts  to  read up to count bytes from file descriptor fd into the</pre></td></tr><tr><td data-num="17"></td><td><pre>       buffer starting at buf.</pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre># 查看进程4309的文件描述符fd，可以看到该进程有0~6共7个I/O，其中socket对应的文件描述符是6</pre></td></tr><tr><td data-num="22"></td><td><pre>[root@localhost fd]# cd /proc/4390/fd</pre></td></tr><tr><td data-num="23"></td><td><pre>[root@localhost fd]# ll</pre></td></tr><tr><td data-num="24"></td><td><pre>总用量 0</pre></td></tr><tr><td data-num="25"></td><td><pre>lrwx------. 1 root root 64 12月  9 22:29 0 -> /dev/null</pre></td></tr><tr><td data-num="26"></td><td><pre>lrwx------. 1 root root 64 12月  9 22:29 1 -> /dev/null</pre></td></tr><tr><td data-num="27"></td><td><pre>lrwx------. 1 root root 64 12月  9 22:29 2 -> /dev/null</pre></td></tr><tr><td data-num="28"></td><td><pre>lr-x------. 1 root root 64 12月  9 22:29 3 -> 'pipe:<span class="token punctuation">[</span><span class="token number">69881</span><span class="token punctuation">]</span><span class="token string">'</span></pre></td></tr><tr><td data-num="29"></td><td><pre>l-wx------. 1 root root 64 12月  9 22:29 4 -> 'pipe:<span class="token punctuation">[</span><span class="token number">69881</span><span class="token punctuation">]</span><span class="token string">'</span></pre></td></tr><tr><td data-num="30"></td><td><pre>lrwx------. 1 root root 64 12月  9 22:29 5 -> 'anon_inode:<span class="token punctuation">[</span>eventpoll<span class="token punctuation">]</span><span class="token string">'</span></pre></td></tr><tr><td data-num="31"></td><td><pre>lrwx------. 1 root root 64 12月  9 22:29 6 -> 'socket:<span class="token punctuation">[</span><span class="token number">69882</span><span class="token punctuation">]</span>'</pre></td></tr></table></figure><h4 id="bio"><a class="anchor" href="#bio">#</a> BIO</h4><p>早期的 socket 是阻塞的，客户端给 linux 内核发送数据，线程 / 进程从 linux 内核中读取数据时，如果没有数据则会一直阻塞直到内核中有数据可读。</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201209162211004.png" alt="image-20201209162211004"></p><h4 id="nio"><a class="anchor" href="#nio">#</a> NIO</h4><p>进一步查看 socket 的帮助文档，可以看到，socket 函数返回的是文件描述符（通过 read 来读取该文件描述符中的数据），type 参数可以传一个非阻塞的 SOCK_NONBLOCK ，这就是说 linux 内核中进程的 socket 可以是非阻塞的 socket，那么理论上来说，无论客户端有多少数据请求（高并发）到 linux 内核，linux 内核可以将请求的数据全都交给一个进程中的非阻塞 socket 来从内核中读取数据，由于只有一个进程处理数据，所以是同步非阻塞的，即 NIO。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 查看系统调用的 socket</span></pre></td></tr><tr><td data-num="2"></td><td><pre>root@localhost fd<span class="token punctuation">]</span><span class="token comment"># man 2 socket</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>SOCKET<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>                     Linux Programmer's Manual                    SOCKET<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>NAME</pre></td></tr><tr><td data-num="7"></td><td><pre>       socket - create an endpoint <span class="token keyword">for</span> communication</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>SYNOPSIS</pre></td></tr><tr><td data-num="10"></td><td><pre>       <span class="token comment">#include &lt;sys/types.h>          /* See NOTES */</span></pre></td></tr><tr><td data-num="11"></td><td><pre>       <span class="token comment">#include &lt;sys/socket.h></span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>       int socket<span class="token punctuation">(</span>int domain, int type, int protocol<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>DESCRIPTION</pre></td></tr><tr><td data-num="16"></td><td><pre>       socket<span class="token punctuation">(</span><span class="token punctuation">)</span>  creates an endpoint <span class="token keyword">for</span> communication and returns a <span class="token function">file</span> descriptor</pre></td></tr><tr><td data-num="17"></td><td><pre>       that refers to that endpoint.  The <span class="token function">file</span> descriptor returned by  a  successful</pre></td></tr><tr><td data-num="18"></td><td><pre>       call  will  be the lowest-numbered <span class="token function">file</span> descriptor not currently <span class="token function">open</span> <span class="token keyword">for</span> the</pre></td></tr><tr><td data-num="19"></td><td><pre>       process.</pre></td></tr><tr><td data-num="20"></td><td><pre>       </pre></td></tr><tr><td data-num="21"></td><td><pre>       <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span></pre></td></tr><tr><td data-num="22"></td><td><pre>       Some socket types may not be implemented by all protocol families.</pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>       Since Linux <span class="token number">2.6</span>.27, the <span class="token builtin class-name">type</span> argument serves a second purpose: <span class="token keyword">in</span> addition to</pre></td></tr><tr><td data-num="25"></td><td><pre>       specifying a socket type, it may include the bitwise OR of any of the follow‐</pre></td></tr><tr><td data-num="26"></td><td><pre>       ing values, to modify the behavior of socket<span class="token punctuation">(</span><span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>       SOCK_NONBLOCK   Set  the  O_NONBLOCK  <span class="token function">file</span>  status  flag on the new <span class="token function">open</span> <span class="token function">file</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                       description.  Using this flag saves extra calls  to  fcntl<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                       to achieve the same result.</pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>       SOCK_CLOEXEC    Set  the  close-on-exec  <span class="token punctuation">(</span>FD_CLOEXEC<span class="token punctuation">)</span>  flag  on  the new <span class="token function">file</span></pre></td></tr><tr><td data-num="33"></td><td><pre>                       descriptor.  See the description of  the  O_CLOEXEC  flag  <span class="token keyword">in</span></pre></td></tr><tr><td data-num="34"></td><td><pre>                       open<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">for</span> reasons why this may be useful.</pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="36"></td><td><pre>RETURN VALUE</pre></td></tr><tr><td data-num="37"></td><td><pre>       On success, a <span class="token function">file</span> descriptor <span class="token keyword">for</span> the new socket is returned.  On  error,  -1</pre></td></tr><tr><td data-num="38"></td><td><pre>       is returned, and errno is <span class="token builtin class-name">set</span> appropriately.</pre></td></tr></table></figure><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201209163819135.png" alt="image-20201209163819135"></p><p>但是，这样的内核有一个问题：当客户端有太多数据同时请求时（多个文件描述符同时发送到内核），进程在轮询（轮询发生在用户空间）读取数据时内核会有很大的资源消耗，因为每次读取一个文件描述符都会调用一次内核。所以，为了减少对内核的调用，需要对内核做出改变，具体的改变就是在内核上多了一个 select，select 可以对多个 fd 进行处理，即 select 实现了多路复用，此时线程不再直接对内核进行调用，而是变成了对 select 的调用。通过查看 select 的帮助文档可以得知，select 可以管理多个文件描述符，当有文件描述符处于就绪状态后便可以进行 I/O 操作。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#查看系统调用的 select</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost fd<span class="token punctuation">]</span><span class="token comment"># man 2 select</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>SELECT<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>                     Linux Programmer's Manual                    SELECT<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>NAME</pre></td></tr><tr><td data-num="7"></td><td><pre>       select,  pselect,  FD_CLR, FD_ISSET, FD_SET, FD_ZERO - synchronous I/O multi‐</pre></td></tr><tr><td data-num="8"></td><td><pre>       plexing</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>SYNOPSIS</pre></td></tr><tr><td data-num="11"></td><td><pre>       /* According to POSIX.1-2001, POSIX.1-2008 */</pre></td></tr><tr><td data-num="12"></td><td><pre>       <span class="token comment">#include &lt;sys/select.h></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>       /* According to earlier standards */</pre></td></tr><tr><td data-num="15"></td><td><pre>       <span class="token comment">#include &lt;sys/time.h></span></pre></td></tr><tr><td data-num="16"></td><td><pre>       <span class="token comment">#include &lt;sys/types.h></span></pre></td></tr><tr><td data-num="17"></td><td><pre>       <span class="token comment">#include &lt;unistd.h></span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>       int select<span class="token punctuation">(</span>int nfds, fd_set *readfds, fd_set *writefds,</pre></td></tr><tr><td data-num="20"></td><td><pre>                  fd_set *exceptfds, struct timeval *timeout<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span></pre></td></tr><tr><td data-num="22"></td><td><pre>DESCRIPTION</pre></td></tr><tr><td data-num="23"></td><td><pre>       select<span class="token punctuation">(</span><span class="token punctuation">)</span> and pselect<span class="token punctuation">(</span><span class="token punctuation">)</span> allow a program to monitor multiple <span class="token function">file</span>  descriptors,</pre></td></tr><tr><td data-num="24"></td><td><pre>       waiting  <span class="token keyword">until</span>  one  or  <span class="token function">more</span> of the <span class="token function">file</span> descriptors become <span class="token string">"ready"</span> <span class="token keyword">for</span> some</pre></td></tr><tr><td data-num="25"></td><td><pre>       class of I/O operation <span class="token punctuation">(</span>e.g., input possible<span class="token punctuation">)</span>.  A <span class="token function">file</span> descriptor is  consid‐</pre></td></tr><tr><td data-num="26"></td><td><pre>       ered  ready <span class="token keyword">if</span> it is possible to perform a corresponding I/O operation <span class="token punctuation">(</span>e.g.,</pre></td></tr><tr><td data-num="27"></td><td><pre>       read<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> without blocking, or a sufficiently small write<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">))</span>.</pre></td></tr></table></figure><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201209173127427.png" alt="image-20201209173127427"></p><p>但是，以上又有一个问题，进程和内核之间会有频繁的 fd 拷贝过程，这个过程也会浪费时间以及其他资源。所以，内核又需要做出改变，具体改变是：内核和进程之间多了一块共享内存，通过这块共享内存来传递文件描述符 fd，内核与共享空间之间需要 mmap 来连接，mmap 与内核共享数据。</p><pre><code># 查看系统调用的mmap
[root@localhost fd]# man 2 mmap


MMAP(2)                       Linux Programmer's Manual                      MMAP(2)

NAME
       mmap, munmap - map or unmap files or devices into memory

SYNOPSIS
       #include &lt;sys/mman.h&gt;

       void *mmap(void *addr, size_t length, int prot, int flags,
                  int fd, off_t offset);
       int munmap(void *addr, size_t length);

       See NOTES for information on feature test macro requirements.

DESCRIPTION
       mmap()  creates  a  new  mapping  in the virtual address space of the calling
       process.  The starting address for the new mapping is specified in addr.  The
       length  argument  specifies  the length of the mapping (which must be greater
       than 0).

       If addr is NULL, then the kernel chooses the address at which to  create  the
       mapping; this is the most portable method of creating a new mapping.  If addr
       is not NULL, then the kernel takes it as a hint about where to place the map‐
       ping;  on  Linux, the mapping will be created at a nearby page boundary.  The
       address of the new mapping is returned as the result of the call.

</code></pre><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201209183708800.png" alt="image-20201209183708800"></p><p>现在，回到最初的问题，当客户端高并发请求时，单进程、单线程、单实例的 redis 怎么处理呢？？？</p><p>再经过以上一系列内核演变之后，目前的 linux 内核中，由系统调用 epoll 来轮询处理客户端的请求，epoll 综合了以上内核的演变的有点，实现了<strong>同步非阻塞以及多路复用</strong>。</p><pre><code>[root@localhost fd]# man epoll


EPOLL(7)                      Linux Programmer's Manual                     EPOLL(7)

NAME
       epoll - I/O event notification facility

SYNOPSIS
       #include &lt;sys/epoll.h&gt;

DESCRIPTION
       The  epoll  API  performs a similar task to poll(2): monitoring multiple file
       descriptors to see if I/O is possible on any of them.  The epoll API  can  be
       used  either  as  an edge-triggered or a level-triggered interface and scales
       well to large numbers of watched  file  descriptors.   The  following  system
       calls are provided to create and manage an epoll instance:

       *  epoll_create(2) creates a new epoll instance and returns a file descriptor
          referring to that instance.  (The more recent epoll_create1(2) extends the
          functionality of epoll_create(2).)

       *  Interest   in   particular   file   descriptors  is  then  registered  via
          epoll_ctl(2).  The set of file  descriptors  currently  registered  on  an
          epoll instance is sometimes called an epoll set.

       *  epoll_wait(2)  waits  for  I/O  events,  blocking the calling thread if no
          events are currently available.

</code></pre><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201209193145882.png" alt="image-20201209193145882"></p><p><strong>额外知识</strong></p><p>!&gt; 零拷贝：通过系统调用 sendfile 来实现进程与内核之间的 fd 的零拷贝</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201209190834261.png" alt="image-20201209190834261"></p><p>!&gt;kafka</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/image-20201209190907262.png" alt="image-20201209190907262"></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucHJvY2Vzc29uLmNvbS92aWV3L2xpbmsvNWZkMDYwNWZlNDAxZmQwNmRkYjUwMWU4">在线查看</span></p><div class="tags"><a href="/tags/Java/" rel="tag"><i class="ic i-tag"></i> Java</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag"><i class="ic i-tag"></i> 数据库</a> <a href="/tags/IO/" rel="tag"><i class="ic i-tag"></i> IO</a> <a href="/tags/Redis/" rel="tag"><i class="ic i-tag"></i> Redis</a> <a href="/tags/%E7%BC%93%E5%AD%98/" rel="tag"><i class="ic i-tag"></i> 缓存</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2021-12-27 23:23:09" itemprop="dateModified" datetime="2021-12-27T23:23:09+08:00">2021-12-27</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="fanfanfan 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="fanfanfan 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="fanfanfan paypal"><p>paypal</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>fanfanfan <i class="ic i-at"><em>@</em></i></li><li class="link"><strong>本文链接：</strong> <a href="https://baiyezi.vip/java/redis/redis%E5%AE%89%E8%A3%85%E5%8F%8ANIO%E5%8E%9F%E7%90%86/" title="redis安装及NIO原理">https://baiyezi.vip/java/redis/redis安装及NIO原理/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/java/MySQL/MySQL%E8%B0%83%E4%BC%98%EF%BC%88%E4%B8%80%EF%BC%89/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;bfanfanfan&#x2F;img&#x2F;raw&#x2F;master&#x2F;guzhuang&#x2F;20211225105422.jpg" title="MySQL调优（一）"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Java</span><h3>MySQL调优（一）</h3></a></div><div class="item right"><a href="/java/SpringMVC/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;bfanfanfan&#x2F;img&#x2F;raw&#x2F;master&#x2F;guzhuang&#x2F;20211225105423.jpg" title="SpringMVC入门（一）"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> Java</span><h3>SpringMVC入门（一）</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.</span> <span class="toc-text">基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%A6%E5%AE%BD%E5%92%8Cio"><span class="toc-number">1.1.</span> <span class="toc-text">带宽和 I&#x2F;O</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E4%B8%AA%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD"><span class="toc-number">1.2.</span> <span class="toc-text">两个基础设施</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.3.</span> <span class="toc-text">数据库介绍</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis"><span class="toc-number">2.</span> <span class="toc-text">redis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85redis"><span class="toc-number">2.1.</span> <span class="toc-text">安装 redis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E4%B8%8Enio"><span class="toc-number">2.2.</span> <span class="toc-text">redis 与 NIO</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-number">2.2.1.</span> <span class="toc-text">文件描述符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bio"><span class="toc-number">2.2.2.</span> <span class="toc-text">BIO</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nio"><span class="toc-number">2.2.3.</span> <span class="toc-text">NIO</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/java/MySQL/Linux%E4%B8%8B%E5%AE%89%E8%A3%85MySQL/" rel="bookmark" title="Linux下安装MySQL">Linux下安装MySQL</a></li><li><a href="/java/MySQL/MySQL%E5%9F%BA%E7%A1%80/" rel="bookmark" title="MySQL基础">MySQL基础</a></li><li><a href="/java/Spring/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89/" rel="bookmark" title="IOC配置方式（一）">IOC配置方式（一）</a></li><li><a href="/java/Spring/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%BA%8C%EF%BC%89/" rel="bookmark" title="IOC配置方式（二）">IOC配置方式（二）</a></li><li><a href="/java/Spring/IOC%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F/" rel="bookmark" title="IOC注解方式">IOC注解方式</a></li><li><a href="/java/Spring/AOP/" rel="bookmark" title="AOP">AOP</a></li><li><a href="/java/SpringBoot/SpringBoot%E5%85%A5%E9%97%A8/" rel="bookmark" title="SpringBoot入门">SpringBoot入门</a></li><li><a href="/java/SpringBoot/SpringBoot-Web%E5%BC%80%E5%8F%91/" rel="bookmark" title="SpringBoot-Web开发">SpringBoot-Web开发</a></li><li><a href="/java/SpringBoot/SpringBoot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E5%8E%9F%E7%90%86/" rel="bookmark" title="SpringBoot自动装配原理">SpringBoot自动装配原理</a></li><li><a href="/java/zookeeper/zookeeper%E6%90%AD%E5%BB%BA%E5%8F%8A%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" rel="bookmark" title="zookeeper搭建及基本概念">zookeeper搭建及基本概念</a></li><li><a href="/java/zookeeper/zookeeper%E5%8E%9F%E7%90%86/" rel="bookmark" title="zookeeper原理">zookeeper原理</a></li><li><a href="/java/zookeeper/zookeeper%E6%A1%88%E4%BE%8B/" rel="bookmark" title="zookeeper案例">zookeeper案例</a></li><li><a href="/java/MySQL/MySQL%E8%B0%83%E4%BC%98%EF%BC%88%E4%B8%80%EF%BC%89/" rel="bookmark" title="MySQL调优（一）">MySQL调优（一）</a></li><li class="active"><a href="/java/redis/redis%E5%AE%89%E8%A3%85%E5%8F%8ANIO%E5%8E%9F%E7%90%86/" rel="bookmark" title="redis安装及NIO原理">redis安装及NIO原理</a></li><li><a href="/java/SpringMVC/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/" rel="bookmark" title="SpringMVC入门（一）">SpringMVC入门（一）</a></li><li><a href="/java/SpringMVC/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/" rel="bookmark" title="SpringMVC入门（二）">SpringMVC入门（二）</a></li><li><a href="/java/SpringMVC/SpringMVC-REST%E9%A3%8E%E6%A0%BC/" rel="bookmark" title="SpringMVC-REST风格">SpringMVC-REST风格</a></li><li><a href="/java/SpringMVC/SpringMVC%E8%BF%9B%E9%98%B6/" rel="bookmark" title="SpringMVC进阶">SpringMVC进阶</a></li><li><a href="/java/SpringMVC/SpringMVC%E6%BA%90%E7%A0%81%E6%80%BB%E7%BB%93/" rel="bookmark" title="SpringMVC源码总结">SpringMVC源码总结</a></li><li><a href="/java/shiro/shiro%E5%85%A5%E9%97%A8/" rel="bookmark" title="shiro入门">shiro入门</a></li><li><a href="/java/shiro/shiro%E6%95%B4%E5%90%88SpringBoot/" rel="bookmark" title="shiro整合SpringBoot">shiro整合SpringBoot</a></li><li><a href="/java/shiro/shiro%E7%9A%84session%E7%AE%A1%E7%90%86/" rel="bookmark" title="shiro的session管理">shiro的session管理</a></li><li><a href="/java/shiro/shiro%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E7%99%BB%E5%BD%95/" rel="bookmark" title="shiro的缓存机制与分布式登录">shiro的缓存机制与分布式登录</a></li><li><a href="/java/shiro/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/" rel="bookmark" title="单点登录">单点登录</a></li><li><a href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="bookmark" title="线程基础知识">线程基础知识</a></li><li><a href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%AE%B9%E5%99%A8%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%B1%A0/" rel="bookmark" title="容器与线程池">容器与线程池</a></li><li><a href="/java/docker/Win10%E5%AE%89%E8%A3%85docker/" rel="bookmark" title="Win10安装docker">Win10安装docker</a></li><li><a href="/java/docker/Win10%E4%B8%ADdocker%E9%83%A8%E7%BD%B2springboot%E9%A1%B9%E7%9B%AE/" rel="bookmark" title="Win10安装docker">Win10安装docker</a></li><li><a href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/JMH/" rel="bookmark" title="JMH">JMH</a></li><li><a href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="bookmark" title="并发编程">并发编程</a></li><li><a href="/java/%E6%97%A5%E5%BF%97/java-%E6%97%A5%E5%BF%97%E4%BD%93%E7%B3%BB/" rel="bookmark" title="java-日志体系">java-日志体系</a></li><li><a href="/java/redis/redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" rel="bookmark" title="redis的数据类型">redis的数据类型</a></li><li><a href="/java/redis/redis%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/" rel="bookmark" title="redis进阶使用">redis进阶使用</a></li><li><a href="/java/redis/redis%E7%9A%84%E9%9B%86%E7%BE%A4/" rel="bookmark" title="redis的集群">redis的集群</a></li><li><a href="/java/redis/redis%E5%9C%A8%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/" rel="bookmark" title="redis在开发中的简单使用">redis在开发中的简单使用</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/ChainOfResponsibility%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="ChainOfResponsibility责任链模式">ChainOfResponsibility责任链模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Composite%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Composite组合模式">Composite组合模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Facade%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Facade门面模式">Facade门面模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Decorator%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Decorator装饰器模式">Decorator装饰器模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Factory%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Factory工厂模式">Factory工厂模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Iterator%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Iterator迭代器模式">Iterator迭代器模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Flyweight%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Flyweight享元模式">Flyweight享元模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Mediator%E8%B0%83%E5%81%9C%E8%80%85%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Mediator调停者模式">Mediator调停者模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Observer%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Observer观察者模式">Observer观察者模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Singleton%E5%8D%95%E4%BE%8B/" rel="bookmark" title="Singleton单例">Singleton单例</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Proxy%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Proxy代理模式">Proxy代理模式</a></li><li><a href="/java/SpringCloud/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BB%A5%E5%8F%8A%E6%9E%B6%E6%9E%84%E5%8F%91%E5%B1%95/" rel="bookmark" title="微服务以及架构发展">微服务以及架构发展</a></li><li><a href="/java/JVM/JVM-%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD/" rel="bookmark" title="JVM-类的加载">JVM-类的加载</a></li><li><a href="/java/SpringCloud/SpringCloud-Netflix%E4%BD%93%E7%B3%BB/" rel="bookmark" title="SpringCloud-Netflix体系">SpringCloud-Netflix体系</a></li><li><a href="/java/%E5%BA%8F%E5%88%97%E5%8C%96/%E5%BA%8F%E5%88%97%E5%8C%96/" rel="bookmark" title="序列化">序列化</a></li><li><a href="/java/JVM/JVM-JMM/" rel="bookmark" title="JVM-JMM">JVM-JMM</a></li><li><a href="/java/%E4%BA%BF%E7%BA%A7%E6%B5%81%E9%87%8F%E5%A4%9A%E7%BA%A7%E7%BC%93%E5%AD%98/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/" rel="bookmark" title="分布式系统与高并发系统架构">分布式系统与高并发系统架构</a></li><li><a href="/java/JVM/JVM-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA/" rel="bookmark" title="JVM-对象的创建">JVM-对象的创建</a></li><li><a href="/java/JVM/JVM-JVM%E8%B0%83%E4%BC%98/" rel="bookmark" title="JVM-JVM调优">JVM-JVM调优</a></li><li><a href="/java/JVM/JVM-GC/" rel="bookmark" title="JVM-GC">JVM-GC</a></li><li><a href="/java/SpringCloud/SpringCloud-Alibaba%E4%BD%93%E7%B3%BB/" rel="bookmark" title="SpringCloud-Alibaba体系">SpringCloud-Alibaba体系</a></li><li><a href="/java/SpringCloud/SpringCloud-SpringCloud%E4%BD%93%E7%B3%BB/" rel="bookmark" title="SpringCloud-SpringCloud体系">SpringCloud-SpringCloud体系</a></li><li><a href="/java/SpringCloud/Apollo/" rel="bookmark" title="Apollo">Apollo</a></li><li><a href="/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%B8%80%EF%BC%89/" rel="bookmark" title="微服务中的会话管理（一）">微服务中的会话管理（一）</a></li><li><a href="/java/io/%E7%A3%81%E7%9B%98IO%E4%B8%8E%E7%BD%91%E7%BB%9CIO/" rel="bookmark" title="磁盘IO与网络IO">磁盘IO与网络IO</a></li><li><a href="/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%BA%8C%EF%BC%89/" rel="bookmark" title="微服务中的会话管理（二）">微服务中的会话管理（二）</a></li><li><a href="/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D/HTTPS/" rel="bookmark" title="HTTPS">HTTPS</a></li><li><a href="/java/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/RocketMQ/RocketMQ-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="bookmark" title="RocketMQ-基础概念">RocketMQ-基础概念</a></li><li><a href="/java/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/RocketMQ/RocketMQ-%E6%B6%88%E6%81%AF%E3%80%81%E4%BA%8B%E5%8A%A1/" rel="bookmark" title="RocketMQ-消息、事务">RocketMQ-消息、事务</a></li><li><a href="/java/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/Kafka-%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/" rel="bookmark" title="Kafka-整体架构">Kafka-整体架构</a></li><li><a href="/java/io/%E7%BD%91%E7%BB%9CIO%E6%A8%A1%E5%9E%8B/" rel="bookmark" title="网络IO模型">网络IO模型</a></li><li><a href="/java/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/Kafka-%E6%90%AD%E5%BB%BA/" rel="bookmark" title="Kafka-搭建">Kafka-搭建</a></li><li><a href="/java/io/Netty/" rel="bookmark" title="Netty">Netty</a></li><li><a href="/java/Nginx/nginx%E5%AE%9E%E6%88%98/" rel="bookmark" title="nginx实战">nginx实战</a></li><li><a href="/instruments/%E4%B8%B2%E5%8F%A3/Java%E5%92%8C%E4%B8%B2%E5%8F%A3%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1/" rel="bookmark" title="Java和串口进行通信">Java和串口进行通信</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="fanfanfan" data-src="/images/avatar.gif"><p class="name" itemprop="name">fanfanfan</p><div class="description" itemprop="description">花有重开日，人无再少年</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">76</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">4</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">78</span> <span class="name">标签</span></a></div></nav><div class="social"></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-magic"></i>友链</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item"><a href="/statistics/" rel="section"><i class="ic i-heart"></i>文章统计</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/java/MySQL/MySQL%E8%B0%83%E4%BC%98%EF%BC%88%E4%B8%80%EF%BC%89/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/java/SpringMVC/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Decorator%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/" title="Decorator装饰器模式">Decorator装饰器模式</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/SpringBoot/SpringBoot%E5%85%A5%E9%97%A8/" title="SpringBoot入门">SpringBoot入门</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Singleton%E5%8D%95%E4%BE%8B/" title="Singleton单例">Singleton单例</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" title="分类于 微服务">微服务</a></div><span><a href="/java/SpringCloud/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BB%A5%E5%8F%8A%E6%9E%B6%E6%9E%84%E5%8F%91%E5%B1%95/" title="微服务以及架构发展">微服务以及架构发展</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/instruments/" title="分类于 工具">工具</a> <i class="ic i-angle-right"></i> <a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/instruments/%E4%B8%B2%E5%8F%A3/Java%E5%92%8C%E4%B8%B2%E5%8F%A3%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1/" title="Java和串口进行通信">Java和串口进行通信</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/MySQL/Linux%E4%B8%8B%E5%AE%89%E8%A3%85MySQL/" title="Linux下安装MySQL">Linux下安装MySQL</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/shiro/shiro%E7%9A%84session%E7%AE%A1%E7%90%86/" title="shiro的session管理">shiro的session管理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/zookeeper/zookeeper%E6%90%AD%E5%BB%BA%E5%8F%8A%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" title="zookeeper搭建及基本概念">zookeeper搭建及基本概念</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/instruments/" title="分类于 工具">工具</a></div><span><a href="/instruments/%E7%BF%BB%E8%AF%91%E5%B0%8F%E5%B7%A5%E5%85%B7/%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E7%BF%BB%E8%AF%91%E5%B0%8F%E5%B7%A5%E5%85%B7%EF%BC%88%E4%B8%80%EF%BC%89/" title="手动实现翻译小工具（一）">手动实现翻译小工具（一）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Factory%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" title="Factory工厂模式">Factory工厂模式</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">fanfanfan</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">1.4m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">20:37</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"java/redis/redis安装及NIO原理/",favicon:{show:"书院十四先生",hide:"书院十四先生"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js,npm/echarts@5.2.2/dist/echarts.min.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->