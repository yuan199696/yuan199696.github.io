<!-- build time:Sun Feb 20 2022 21:34:44 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" href="https://baiyezi.vip/rss.xml"><link rel="alternate" type="application/atom+xml" href="https://baiyezi.vip/atom.xml"><link rel="alternate" type="application/json" href="https://baiyezi.vip/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Java,IO,Linux"><link rel="canonical" href="https://baiyezi.vip/java/io/%E7%A3%81%E7%9B%98IO%E4%B8%8E%E7%BD%91%E7%BB%9CIO/"><title>磁盘IO与网络IO - Java |</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">磁盘IO与网络IO</h1><div class="meta"><span class="item" title="创建时间：2021-08-01 22:29:01"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-08-01T22:29:01+08:00">2021-08-01</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>18k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>16 分钟</span> </span><span id="java/io/磁盘IO与网络IO/" class="item leancloud_visitors" data-flag-title="" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start"></a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/yangchenglin/20220220190137.png"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225104957.png"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105418.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105420.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105419.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/yangchenglin/20220220211812.png"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/java/" itemprop="item" rel="index" title="分类于 Java"><span itemprop="name">Java</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://baiyezi.vip/java/io/%E7%A3%81%E7%9B%98IO%E4%B8%8E%E7%BD%91%E7%BB%9CIO/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="fanfanfan"><meta itemprop="description" content=", 花有重开日，人无再少年"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content=""></span><div class="body md" itemprop="articleBody"><blockquote><p>Linux 基础知识</p></blockquote><h2 id="vfs"><a class="anchor" href="#vfs">#</a> VFS</h2><p>即虚拟文件系统，相当于内核对外提供的一个标准接口，挂载着不同的硬件设备，这些设备的驱动实现可以不同</p><h2 id="fd"><a class="anchor" href="#fd">#</a> FD</h2><p>即文件描述符。不同的文件描述符代表可发起不同的操作，而这些操作代表不同的中断</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># exec 8> bula.txt</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ll</span></pre></td></tr><tr><td data-num="3"></td><td><pre>total <span class="token number">139796</span></pre></td></tr><tr><td data-num="4"></td><td><pre>-rw-------. <span class="token number">1</span> root root      <span class="token number">1231</span> Jan  <span class="token number">7</span> <span class="token number">17</span>:38 anaconda-ks.cfg</pre></td></tr><tr><td data-num="5"></td><td><pre>-rw-r--r--. <span class="token number">1</span> root root         <span class="token number">0</span> Apr <span class="token number">13</span> <span class="token number">14</span>:00 bula.txt</pre></td></tr><tr><td data-num="6"></td><td><pre>-rw-r--r--. <span class="token number">1</span> root root      <span class="token number">1386</span> Jan  <span class="token number">7</span> <span class="token number">17</span>:40 initial-setup-ks.cfg</pre></td></tr><tr><td data-num="7"></td><td><pre>-rw-r--r--. <span class="token number">1</span> root root <span class="token number">143142634</span> Jan  <span class="token number">8</span> <span class="token number">15</span>:51 jdk-8u271-linux-x64.tar.gz</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $$</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token number">8376</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /proc/8376/fd</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">[</span>root@localhost fd<span class="token punctuation">]</span><span class="token comment"># ll</span></pre></td></tr><tr><td data-num="12"></td><td><pre>total <span class="token number">0</span></pre></td></tr><tr><td data-num="13"></td><td><pre>lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">0</span> -<span class="token operator">></span> /dev/pts/1 <span class="token comment">#文件描述符 0 代表标准输入</span></pre></td></tr><tr><td data-num="14"></td><td><pre>lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">1</span> -<span class="token operator">></span> /dev/pts/1 <span class="token comment">#文件描述符 1 代表标准输出</span></pre></td></tr><tr><td data-num="15"></td><td><pre>lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">2</span> -<span class="token operator">></span> /dev/pts/1 <span class="token comment">#文件描述符 2 代表错误输出</span></pre></td></tr><tr><td data-num="16"></td><td><pre>lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">255</span> -<span class="token operator">></span> /dev/pts/1</pre></td></tr><tr><td data-num="17"></td><td><pre>lr-x------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">3</span> -<span class="token operator">></span> /var/lib/sss/mc/passwd</pre></td></tr><tr><td data-num="18"></td><td><pre>lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">4</span> -<span class="token operator">></span> <span class="token string">'socket:[68945]'</span> <span class="token comment">#文件描述符 4 代表写</span></pre></td></tr><tr><td data-num="19"></td><td><pre>l-wx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">14</span>:03 <span class="token number">8</span> -<span class="token operator">></span> /root/bula.txt  <span class="token comment">## 文件描述符 8 代表读</span></pre></td></tr></table></figure><p>0：标准输入</p><p>1：标准输出</p><p>2：报错输出</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#proc 目录是内核映射目录，数字代表进程的 id 号</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /proc</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@localhost proc<span class="token punctuation">]</span><span class="token comment"># ls</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token number">1</span>      <span class="token number">106</span>   <span class="token number">1175</span>  <span class="token number">1468</span>  <span class="token number">22</span>    <span class="token number">3389</span>  <span class="token number">3476</span>  <span class="token number">445</span>  <span class="token number">7569</span>  <span class="token number">7738</span>  <span class="token number">7825</span>  <span class="token number">7889</span>  <span class="token number">8051</span>  <span class="token number">8355</span>  <span class="token number">851</span>   <span class="token number">9585</span>       cmdline      kallsyms     mtrr           timer_list</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token number">10</span>     <span class="token number">1062</span>  <span class="token number">118</span>   <span class="token number">1472</span>  <span class="token number">23</span>    <span class="token number">3393</span>  <span class="token number">3510</span>  <span class="token number">508</span>  <span class="token number">7578</span>  <span class="token number">7741</span>  <span class="token number">7826</span>  <span class="token number">7891</span>  <span class="token number">806</span>   <span class="token number">836</span>   <span class="token number">852</span>   <span class="token number">96</span>         consoles     kcore        net            <span class="token function">tty</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token number">100</span>    <span class="token number">107</span>   <span class="token number">119</span>   <span class="token number">15</span>    <span class="token number">24</span>    <span class="token number">3398</span>  <span class="token number">3671</span>  <span class="token number">517</span>  <span class="token number">7588</span>  <span class="token number">7744</span>  <span class="token number">7829</span>  <span class="token number">7892</span>  <span class="token number">807</span>   <span class="token number">837</span>   <span class="token number">8546</span>  <span class="token number">963</span>        cpuinfo      keys         pagetypeinfo   <span class="token function">uptime</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token number">1000</span>   <span class="token number">108</span>   <span class="token number">12</span>    <span class="token number">16</span>    <span class="token number">25</span>    <span class="token number">3402</span>  <span class="token number">4</span>     <span class="token number">541</span>  <span class="token number">7594</span>  <span class="token number">7749</span>  <span class="token number">7831</span>  <span class="token number">7933</span>  <span class="token number">8074</span>  <span class="token number">8370</span>  <span class="token number">859</span>   <span class="token number">97</span>         crypto       key-users    partitions     version</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token number">101</span>    <span class="token number">109</span>   <span class="token number">120</span>   <span class="token number">17</span>    <span class="token number">26</span>    <span class="token number">3404</span>  <span class="token number">41</span>    <span class="token number">546</span>  <span class="token number">7601</span>  <span class="token number">775</span>   <span class="token number">7834</span>  <span class="token number">7934</span>  <span class="token number">808</span>   <span class="token number">8373</span>  <span class="token number">889</span>   <span class="token number">979</span>        devices      kmsg         sched_debug    vmallocinfo</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token number">102</span>    <span class="token number">11</span>    <span class="token number">121</span>   <span class="token number">1750</span>  <span class="token number">2697</span>  <span class="token number">3408</span>  <span class="token number">420</span>   <span class="token number">547</span>  <span class="token number">7605</span>  <span class="token number">7752</span>  <span class="token number">7836</span>  <span class="token number">7938</span>  <span class="token number">811</span>   <span class="token number">8376</span>  <span class="token number">891</span>   <span class="token number">98</span>         diskstats    kpagecgroup  schedstat      <span class="token function">vmstat</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token number">1020</span>   <span class="token number">110</span>   <span class="token number">122</span>   <span class="token number">18</span>    <span class="token number">27</span>    <span class="token number">3414</span>  <span class="token number">421</span>   <span class="token number">549</span>  <span class="token number">7607</span>  <span class="token number">7763</span>  <span class="token number">7842</span>  <span class="token number">7959</span>  <span class="token number">8176</span>  <span class="token number">838</span>   <span class="token number">9</span>     <span class="token number">980</span>        dma          kpagecount   scsi           zoneinfo</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token number">103</span>    <span class="token number">1101</span>  <span class="token number">123</span>   <span class="token number">1813</span>  <span class="token number">2712</span>  <span class="token number">3422</span>  <span class="token number">422</span>   <span class="token number">550</span>  <span class="token number">7621</span>  <span class="token number">7779</span>  <span class="token number">7846</span>  <span class="token number">7961</span>  <span class="token number">8218</span>  <span class="token number">8384</span>  <span class="token number">912</span>   <span class="token number">982</span>        driver       kpageflags   self</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token number">1035</span>   <span class="token number">1103</span>  <span class="token number">1236</span>  <span class="token number">1821</span>  <span class="token number">2719</span>  <span class="token number">3425</span>  <span class="token number">423</span>   <span class="token number">551</span>  <span class="token number">7678</span>  <span class="token number">778</span>   <span class="token number">7851</span>  <span class="token number">7968</span>  <span class="token number">8223</span>  <span class="token number">841</span>   <span class="token number">917</span>   <span class="token number">988</span>        execdomains  loadavg      slabinfo</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token number">10386</span>  <span class="token number">111</span>   <span class="token number">124</span>   <span class="token number">1825</span>  <span class="token number">2726</span>  <span class="token number">3430</span>  <span class="token number">424</span>   <span class="token number">552</span>  <span class="token number">7696</span>  <span class="token number">7783</span>  <span class="token number">7855</span>  <span class="token number">7972</span>  <span class="token number">8280</span>  <span class="token number">842</span>   <span class="token number">92</span>    <span class="token number">99</span>         fb           locks        softirqs</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token number">104</span>    <span class="token number">112</span>   <span class="token number">125</span>   <span class="token number">19</span>    <span class="token number">28</span>    <span class="token number">3437</span>  <span class="token number">425</span>   <span class="token number">553</span>  <span class="token number">7701</span>  <span class="token number">7787</span>  <span class="token number">7870</span>  <span class="token number">7996</span>  <span class="token number">8284</span>  <span class="token number">844</span>   <span class="token number">93</span>    <span class="token number">998</span>        filesystems  mdstat       <span class="token function">stat</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token number">10435</span>  <span class="token number">113</span>   <span class="token number">126</span>   <span class="token number">1967</span>  <span class="token number">29</span>    <span class="token number">3439</span>  <span class="token number">426</span>   <span class="token number">554</span>  <span class="token number">7715</span>  <span class="token number">7794</span>  <span class="token number">7871</span>  <span class="token number">8</span>     <span class="token number">8299</span>  <span class="token number">845</span>   <span class="token number">931</span>   acpi       fs           meminfo      swaps</pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token number">10452</span>  <span class="token number">114</span>   <span class="token number">127</span>   <span class="token number">1971</span>  <span class="token number">3</span>     <span class="token number">3455</span>  <span class="token number">427</span>   <span class="token number">555</span>  <span class="token number">7719</span>  <span class="token number">7797</span>  <span class="token number">7873</span>  <span class="token number">802</span>   <span class="token number">8318</span>  <span class="token number">846</span>   <span class="token number">936</span>   asound     interrupts   misc         sys</pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token number">10453</span>  <span class="token number">115</span>   <span class="token number">128</span>   <span class="token number">2</span>     <span class="token number">3087</span>  <span class="token number">3459</span>  <span class="token number">428</span>   <span class="token number">6</span>    <span class="token number">7724</span>  <span class="token number">7801</span>  <span class="token number">7876</span>  <span class="token number">8035</span>  <span class="token number">834</span>   <span class="token number">847</span>   <span class="token number">937</span>   buddyinfo  iomem        modules      sysrq-trigger</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token number">105</span>    <span class="token number">116</span>   <span class="token number">13</span>    <span class="token number">20</span>    <span class="token number">3365</span>  <span class="token number">3465</span>  <span class="token number">439</span>   <span class="token number">653</span>  <span class="token number">7727</span>  <span class="token number">7808</span>  <span class="token number">7880</span>  <span class="token number">8038</span>  <span class="token number">8345</span>  <span class="token number">849</span>   <span class="token number">94</span>    bus        ioports      mounts       sysvipc</pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token number">1056</span>   <span class="token number">117</span>   <span class="token number">1321</span>  <span class="token number">21</span>    <span class="token number">3385</span>  <span class="token number">3474</span>  <span class="token number">444</span>   <span class="token number">689</span>  <span class="token number">7736</span>  <span class="token number">7817</span>  <span class="token number">7884</span>  <span class="token number">804</span>   <span class="token number">835</span>   <span class="token number">850</span>   <span class="token number">95</span>    cgroups    irq          mpt          thread-self</pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment"># $$ 代表当前 bash（当前打开的终端界面）的 pid，也可以使用 $BASHPID 来代替</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">[</span>root@localhost proc<span class="token punctuation">]</span><span class="token comment"># cd $$</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">[</span>root@localhost <span class="token number">8376</span><span class="token punctuation">]</span><span class="token comment"># ls</span></pre></td></tr><tr><td data-num="24"></td><td><pre>attr       clear_refs       cpuset   fd       limits     mem         net        oom_score      personality  schedstat  smaps_rollup  status   timerslack_ns</pre></td></tr><tr><td data-num="25"></td><td><pre>autogroup  cmdline          cwd      fdinfo   loginuid   mountinfo   ns         oom_score_adj  projid_map   sessionid  stack         syscall  uid_map</pre></td></tr><tr><td data-num="26"></td><td><pre>auxv       <span class="token function">comm</span>             environ  gid_map  map_files  mounts      numa_maps  pagemap        root         setgroups  <span class="token function">stat</span>          task     wchan</pre></td></tr><tr><td data-num="27"></td><td><pre>cgroup     coredump_filter  exe      io       maps       mountstats  oom_adj    patch_state    sched        smaps      statm         timers</pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">#查看当前 bash 的所有文件描述符</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">[</span>root@localhost <span class="token number">8376</span><span class="token punctuation">]</span><span class="token comment"># cd fd</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">[</span>root@localhost fd<span class="token punctuation">]</span><span class="token comment"># ls</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token number">0</span>  <span class="token number">1</span>  <span class="token number">2</span>  <span class="token number">255</span>  <span class="token number">3</span>  <span class="token number">4</span>  <span class="token number">8</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">[</span>root@localhost fd<span class="token punctuation">]</span><span class="token comment"># ll</span></pre></td></tr><tr><td data-num="33"></td><td><pre>total <span class="token number">0</span></pre></td></tr><tr><td data-num="34"></td><td><pre>lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">0</span> -<span class="token operator">></span> /dev/pts/1</pre></td></tr><tr><td data-num="35"></td><td><pre>lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">1</span> -<span class="token operator">></span> /dev/pts/1</pre></td></tr><tr><td data-num="36"></td><td><pre>lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">2</span> -<span class="token operator">></span> /dev/pts/1</pre></td></tr><tr><td data-num="37"></td><td><pre>lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">255</span> -<span class="token operator">></span> /dev/pts/1</pre></td></tr><tr><td data-num="38"></td><td><pre>lr-x------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">3</span> -<span class="token operator">></span> /var/lib/sss/mc/passwd</pre></td></tr><tr><td data-num="39"></td><td><pre>lrwx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">13</span>:12 <span class="token number">4</span> -<span class="token operator">></span> <span class="token string">'socket:[68945]'</span></pre></td></tr><tr><td data-num="40"></td><td><pre>l-wx------. <span class="token number">1</span> root root <span class="token number">64</span> Apr <span class="token number">13</span> <span class="token number">14</span>:03 <span class="token number">8</span> -<span class="token operator">></span> /root/bula.txt</pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token comment">#查看当前 bash 的所有文件描述符的具体信息</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">[</span>root@localhost fd<span class="token punctuation">]</span><span class="token comment"># lsof -op $$</span></pre></td></tr><tr><td data-num="44"></td><td><pre>lsof: WARNING: can't stat<span class="token punctuation">(</span><span class="token punctuation">)</span> fuse.gvfsd-fuse <span class="token function">file</span> system /run/user/1000/gvfs</pre></td></tr><tr><td data-num="45"></td><td><pre>      Output information may be incomplete.</pre></td></tr><tr><td data-num="46"></td><td><pre>COMMAND  PID <span class="token environment constant">USER</span>   FD   TYPE             DEVICE OFFSET     NODE NAME</pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  cwd    DIR                <span class="token number">0,4</span>           <span class="token number">92892</span> /proc/8376/fd</pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  rtd    DIR              <span class="token number">253,0</span>             <span class="token number">128</span> /</pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  txt    REG              <span class="token number">253,0</span>         <span class="token number">8821425</span> /usr/bin/bash</pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>         <span class="token number">8813609</span> /usr/lib/locale/en_US.utf8/LC_COLLATE</pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12818715</span> /usr/lib64/libnss_files-2.28.so</pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">13451458</span> /var/lib/sss/mc/passwd</pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">13900504</span> /usr/lib64/libnss_sss.so.2</pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12818703</span> /usr/lib64/libc-2.28.so</pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12818705</span> /usr/lib64/libdl-2.28.so</pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12812861</span> /usr/lib64/libtinfo.so.6.1</pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12818696</span> /usr/lib64/ld-2.28.so</pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>         <span class="token number">8813610</span> /usr/lib/locale/en_US.utf8/LC_CTYPE</pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>         <span class="token number">8813613</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_NUMERIC</span></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12813675</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_TIME</span></pre></td></tr><tr><td data-num="61"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12813673</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_MONETARY</span></pre></td></tr><tr><td data-num="62"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12813685</span> /usr/lib/locale/en_US.utf8/LC_MESSAGES/SYS_LC_MESSAGES</pre></td></tr><tr><td data-num="63"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>         <span class="token number">4414616</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_PAPER</span></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>         <span class="token number">8813612</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_NAME</span></pre></td></tr><tr><td data-num="65"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12813670</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_ADDRESS</span></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12813674</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_TELEPHONE</span></pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12813672</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_MEASUREMENT</span></pre></td></tr><tr><td data-num="68"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>         <span class="token number">4431007</span> /usr/lib64/gconv/gconv-modules.cache</pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>        <span class="token number">12813671</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_IDENTIFICATION</span></pre></td></tr><tr><td data-num="70"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root    0u   CHR              <span class="token number">136,1</span>    0t0        <span class="token number">4</span> /dev/pts/1</pre></td></tr><tr><td data-num="71"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root    1u   CHR              <span class="token number">136,1</span>    0t0        <span class="token number">4</span> /dev/pts/1</pre></td></tr><tr><td data-num="72"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root    2u   CHR              <span class="token number">136,1</span>    0t0        <span class="token number">4</span> /dev/pts/1</pre></td></tr><tr><td data-num="73"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root    3r   REG              <span class="token number">253,0</span>    0t0 <span class="token number">13451458</span> /var/lib/sss/mc/passwd</pre></td></tr><tr><td data-num="74"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root    4u  unix 0x00000000015f1ce9    0t0    <span class="token number">68945</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>STREAM</pre></td></tr><tr><td data-num="75"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root    8w   REG              <span class="token number">253,0</span>    0t0 <span class="token number">10769210</span> /root/bula.txt</pre></td></tr><tr><td data-num="76"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  255u   CHR              <span class="token number">136,1</span>    0t0        <span class="token number">4</span> /dev/pts/1</pre></td></tr><tr><td data-num="77"></td><td><pre></pre></td></tr><tr><td data-num="78"></td><td><pre></pre></td></tr><tr><td data-num="79"></td><td><pre><span class="token comment">#查看某个进程的文件描述符</span></pre></td></tr><tr><td data-num="80"></td><td><pre><span class="token punctuation">[</span>root@localhost fd<span class="token punctuation">]</span><span class="token comment"># lsof -p 进程号</span></pre></td></tr></table></figure><h2 id="重定向"><a class="anchor" href="#重定向">#</a> 重定向</h2><p>重定向是一种机制，而不是命令</p><p>&quot;0&lt;&quot;：输入重定向</p><p>&quot;&gt;1&quot;：输出重定向</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 将当前目录下 ls 命令的输出重定向到根目录的 test.out 中</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost fd<span class="token punctuation">]</span><span class="token comment"># ls ./ 1> ~/test.out</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@localhost fd<span class="token punctuation">]</span><span class="token comment"># cd ~</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># vim test.out </span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token number">0</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token number">1</span> </pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token number">2</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token number">255</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token number">3</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token number">4</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token number">8</span></pre></td></tr><tr><td data-num="13"></td><td><pre>~</pre></td></tr></table></figure><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#将 test.out 作为 cat 的标准输入，将 cat.out 作为 cat 的标准输出</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat 0&lt; test.out 1>cat.out</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># vim cat.out</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token number">0</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token number">1</span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token number">2</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token number">255</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token number">3</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token number">4</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token number">8</span></pre></td></tr><tr><td data-num="12"></td><td><pre>~</pre></td></tr></table></figure><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#将键盘的输入赋值给 a，按回车结束</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># read a</span></pre></td></tr><tr><td data-num="3"></td><td><pre>adgasgagas</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $a</span></pre></td></tr><tr><td data-num="5"></td><td><pre>adgasgagas</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#将 read 的标准输入重定向到 cat.out，并赋值给 a</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># read a 0&lt; cat.out</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#可以看到 a 中只有 cat.out 文件的第一行数据，因为标准输入输出遇到换行符就结束</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $a</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token number">0</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># vim cat.out</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token number">0</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token number">1</span> </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token number">2</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token number">255</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token number">3</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token number">4</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token number">8</span></pre></td></tr></table></figure><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#将 ls .//aaa，即查看当前目录下 aaa 目录的标准输出以及错误输出重定向到 lso1.out</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ls ./ /aaa  1> lso1.out 2>&amp; 1</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># vim lso1.out </span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>ls: cannot access <span class="token string">'/aaa'</span><span class="token builtin class-name">:</span> No such <span class="token function">file</span> or directory</pre></td></tr><tr><td data-num="6"></td><td><pre>./:</pre></td></tr><tr><td data-num="7"></td><td><pre>anaconda-ks.cfg</pre></td></tr><tr><td data-num="8"></td><td><pre>bula.txt</pre></td></tr><tr><td data-num="9"></td><td><pre>cat.out</pre></td></tr><tr><td data-num="10"></td><td><pre>initial-setup-ks.cfg</pre></td></tr><tr><td data-num="11"></td><td><pre>jdk-8u271-linux-x64.tar.gz</pre></td></tr><tr><td data-num="12"></td><td><pre>lso1.out</pre></td></tr><tr><td data-num="13"></td><td><pre>test.out</pre></td></tr></table></figure><h2 id="headtail"><a class="anchor" href="#headtail">#</a> head/tail</h2><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#显示文件的前十行</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># head text.txt </span></pre></td></tr><tr><td data-num="3"></td><td><pre>bsdbsdbsdb</pre></td></tr><tr><td data-num="4"></td><td><pre>sfbsdb</pre></td></tr><tr><td data-num="5"></td><td><pre>sdbsdb</pre></td></tr><tr><td data-num="6"></td><td><pre>sbsdb</pre></td></tr><tr><td data-num="7"></td><td><pre>sbsdfb</pre></td></tr><tr><td data-num="8"></td><td><pre>sbsdb</pre></td></tr><tr><td data-num="9"></td><td><pre>sdbsdb</pre></td></tr><tr><td data-num="10"></td><td><pre>yjrj</pre></td></tr><tr><td data-num="11"></td><td><pre>kykh</pre></td></tr><tr><td data-num="12"></td><td><pre>adaf</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">#显示文件的后十行</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># tail text.txt </span></pre></td></tr><tr><td data-num="15"></td><td><pre>kykh</pre></td></tr><tr><td data-num="16"></td><td><pre>adaf</pre></td></tr><tr><td data-num="17"></td><td><pre>sfds</pre></td></tr><tr><td data-num="18"></td><td><pre>sddhr</pre></td></tr><tr><td data-num="19"></td><td><pre>gfhjf</pre></td></tr><tr><td data-num="20"></td><td><pre>yutths</pre></td></tr><tr><td data-num="21"></td><td><pre>zczx</pre></td></tr><tr><td data-num="22"></td><td><pre>eg</pre></td></tr><tr><td data-num="23"></td><td><pre>rht</pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">#读取文件的第一行</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># head -1 text.txt </span></pre></td></tr><tr><td data-num="26"></td><td><pre>bsdbsdbsdb</pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">#读取文件的前两行</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># head -2 text.txt </span></pre></td></tr><tr><td data-num="29"></td><td><pre>bsdbsdbsdb</pre></td></tr><tr><td data-num="30"></td><td><pre>sfbsdb</pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token comment">#读取文件的后三行</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># tail -3 text.txt </span></pre></td></tr><tr><td data-num="34"></td><td><pre>zczx</pre></td></tr><tr><td data-num="35"></td><td><pre>eg</pre></td></tr><tr><td data-num="36"></td><td><pre>rht</pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token comment">#只读取第八行，可以从前八行中取出最后一行</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># head -8 text.txt | tail -1</span></pre></td></tr><tr><td data-num="40"></td><td><pre>yjrj</pre></td></tr></table></figure><h2 id="管道"><a class="anchor" href="#管道">#</a> 管道</h2><p>前面的输出作为后面的输入，且管道前后的输入输出都会各自开启一个子进程</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># a=1</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $a</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token number">1</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#管道前开启一个子进程，将 &#123;a=9; echo "sfsfs";&#125; 的输出作为管道后子进程中 cat 的输入，且由于是子进程，所以 a=9 不会影响父进程中的变量 a</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># &#123; a=9; echo "sfsfs"; &#125; | cat</span></pre></td></tr><tr><td data-num="6"></td><td><pre>sfsfs</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $a</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token number">1</span></pre></td></tr></table></figure><h2 id="与bashpid的区别"><a class="anchor" href="#与bashpid的区别">#</a> $$ 与 $BASHPID 的区别</h2><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $$</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token number">2254</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># $$ 的优先级高于管道，所以首先先将 $$ 解释为进程号 2254，然后管道左右各开启一个子进程，左边子进程将 echo 2254 通过管道赋值给子进程 cat 作为输出</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $$ | cat</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token number">2254</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># $BASHPID 优先级低于管道，所以会首先在管道左右各开启一个子进程，$BASHPID 计算子进程的 bash 进程号，然后再通过管道赋值给子进程 cat 作为输出</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $BASHPID | cat</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token number">2582</span></pre></td></tr></table></figure><h2 id="inode"><a class="anchor" href="#inode">#</a> Inode</h2><p>每个文件的唯一标识</p><h2 id="pagecache"><a class="anchor" href="#pagecache">#</a> PageCache</h2><p>内核中维护的页缓存，默认 4k。程序从磁盘读取文件时，会先存入页缓存进行缓存，当再次读取相同文件时就会从页缓存中读取，这样不仅加快了读取速度，也避免了相同文件在内存中重复占用内存空间，但也存在数据从 PageCache 到磁盘的延时问题。当缓存中数据更改后，标记为 dirty，随后将更改的缓存中的数据 flush 到磁盘，可以主动通过系统调用来 flush 到磁盘（丢失数据少），或者等待内核自己 flush 到磁盘（丢失数据多）。</p><p>在 VMware Workstation 中的 “关闭客户机” 会把 PageCache 中的数据刷到磁盘后再关机，而 “关机” 是直接断电，不会把 PageCache 中的数据刷到磁盘，导致数据丢失。</p><p>问题：所需的文件是一次性读取到 PageCache，还是需要多少读多少，什么时候清除 PageCache 呢</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># PageCahce 中的脏页配置</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sysctl -a | grep dirty</span></pre></td></tr><tr><td data-num="3"></td><td><pre>vm.dirty_background_bytes <span class="token operator">=</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="4"></td><td><pre>vm.dirty_background_ratio <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">#由内核中的后台线程触发由内核向磁盘刷数据，同时不会阻塞程序向内核写数据。当内核可用空间剩下 10% 时，内核中的后台线程就将内核中的脏页的数据刷入到磁盘，同时程序可以继续向内核写数据，这意味着内核中的 90% 的内存中的数据就有丢失的风险，因为达不到触发内核后台线程由内核向磁盘刷数据的条件，所以直接断电的话就会丢失内核中已经缓存的数据</span></pre></td></tr><tr><td data-num="5"></td><td><pre>vm.dirty_bytes <span class="token operator">=</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="6"></td><td><pre>vm.dirty_expire_centisecs <span class="token operator">=</span> <span class="token number">3000</span></pre></td></tr><tr><td data-num="7"></td><td><pre>vm.dirty_ratio <span class="token operator">=</span> <span class="token number">30</span> <span class="token comment">#程序向内核写数据不断分配 PageCache，当 PageCache 总大小达到内核大小的 30% 时就阻塞程序的写数据操作，保证内核空间的利用率。该值比 vm.dirty_background_ratio 的值要大</span></pre></td></tr><tr><td data-num="8"></td><td><pre>vm.dirty_writeback_centisecs <span class="token operator">=</span> <span class="token number">500</span></pre></td></tr><tr><td data-num="9"></td><td><pre>vm.dirtytime_expire_seconds <span class="token operator">=</span> <span class="token number">43200</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">#如果要修改以上配置项，可以在以下文件的最后加上配置项即可</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/sysctl.conf</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment"># sysctl settings are defined through files in</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment"># /usr/lib/sysctl.d/, /run/sysctl.d/, and /etc/sysctl.d/.</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">#</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment"># Vendors settings live in /usr/lib/sysctl.d/.</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment"># To override a whole file, create a new file with the same in</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment"># /etc/sysctl.d/ and put new settings there. To override</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment"># only specific settings, add a file with a lexically later</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment"># name in /etc/sysctl.d/ and put new settings there.</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token comment">#</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment"># For more information, see sysctl.conf(5) and sysctl.d(5).</span></pre></td></tr><tr><td data-num="24"></td><td><pre>~                                                                                                                                                            </pre></td></tr><tr><td data-num="25"></td><td><pre>~                                                                                           <span class="token comment"># 使得修改的配置项生效</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sysctl -p</span></pre></td></tr></table></figure><p>Buffer 之所以比普通写快，是因为 JVM 中的 Buffer 大小为 8KB，数据写满 Buffer 后通过系统调用向磁盘中刷一次（在内核上依然是通过 PageCache），而普通写是通过内核中的 PageCache（大小为 4KB），所以 Buffer 的内核态与用户态切换次数比普通写要少很多（系统调用次数少），所以速度快</p><h2 id="挂载"><a class="anchor" href="#挂载">#</a> 挂载</h2><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># df -h</span></pre></td></tr><tr><td data-num="2"></td><td><pre>Filesystem           Size  Used Avail Use% Mounted on</pre></td></tr><tr><td data-num="3"></td><td><pre>devtmpfs             384M     <span class="token number">0</span>  384M   <span class="token number">0</span>% /dev</pre></td></tr><tr><td data-num="4"></td><td><pre>tmpfs                400M     <span class="token number">0</span>  400M   <span class="token number">0</span>% /dev/shm</pre></td></tr><tr><td data-num="5"></td><td><pre>tmpfs                400M  <span class="token number">6</span>.7M  393M   <span class="token number">2</span>% /run</pre></td></tr><tr><td data-num="6"></td><td><pre>tmpfs                400M     <span class="token number">0</span>  400M   <span class="token number">0</span>% /sys/fs/cgroup</pre></td></tr><tr><td data-num="7"></td><td><pre>/dev/mapper/cl-root  <span class="token number">8</span>.0G  <span class="token number">4</span>.4G  <span class="token number">3</span>.7G  <span class="token number">55</span>% /</pre></td></tr><tr><td data-num="8"></td><td><pre>/dev/sda1            976M  133M  777M  <span class="token number">15</span>% /boot</pre></td></tr><tr><td data-num="9"></td><td><pre>tmpfs                 80M   28K   80M   <span class="token number">1</span>% /run/user/42</pre></td></tr><tr><td data-num="10"></td><td><pre>tmpfs                 80M  <span class="token number">3</span>.5M   77M   <span class="token number">5</span>% /run/user/1000</pre></td></tr><tr><td data-num="11"></td><td><pre>/dev/sr0             <span class="token number">6</span>.7G  <span class="token number">6</span>.7G     <span class="token number">0</span> <span class="token number">100</span>% /run/media/fan/CentOS-8-BaseOS-x86_64</pre></td></tr><tr><td data-num="12"></td><td><pre>tmpfs                 80M  <span class="token number">4</span>.0K   80M   <span class="token number">1</span>% /run/user/0</pre></td></tr></table></figure><p>可以看到分区 /dev/sda1 挂载到了根目录下的 boot 目录</p><h2 id="文件类型"><a class="anchor" href="#文件类型">#</a> 文件类型</h2><p>-：普通文件（可执行、图片、文本）</p><p>d：目录</p><p>l：链接</p><p>b：块设备（读取不受约束，如硬盘）</p><p>c：字符设备（读取受约束，如键盘）</p><p>s：socket</p><p>p：pipeline</p><h2 id="硬链接-软链接"><a class="anchor" href="#硬链接-软链接">#</a> 硬链接、软链接</h2><p>stat：查看文件属性</p><p>ln：建立软连接</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># stat anaconda-ks.cfg </span></pre></td></tr><tr><td data-num="2"></td><td><pre>  File: anaconda-ks.cfg</pre></td></tr><tr><td data-num="3"></td><td><pre>  Size: <span class="token number">1231</span>      	Blocks: <span class="token number">8</span>          IO Block: <span class="token number">4096</span>   regular <span class="token function">file</span></pre></td></tr><tr><td data-num="4"></td><td><pre>Device: fd00h/64768d	Inode: <span class="token number">10769207</span>    Links: <span class="token number">1</span></pre></td></tr><tr><td data-num="5"></td><td><pre>Access: <span class="token punctuation">(</span>0600/-rw-------<span class="token punctuation">)</span>  Uid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span>   Gid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>Context: system_u:object_r:admin_home_t:s0</pre></td></tr><tr><td data-num="7"></td><td><pre>Access: <span class="token number">2021</span>-01-07 <span class="token number">17</span>:39:45.074653805 +0800</pre></td></tr><tr><td data-num="8"></td><td><pre>Modify: <span class="token number">2021</span>-01-07 <span class="token number">17</span>:38:05.698905841 +0800</pre></td></tr><tr><td data-num="9"></td><td><pre>Change: <span class="token number">2021</span>-01-07 <span class="token number">17</span>:38:05.698905841 +0800</pre></td></tr><tr><td data-num="10"></td><td><pre> Birth: -</pre></td></tr></table></figure><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ln anaconda-ks.cfg my.cfg</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ls</span></pre></td></tr><tr><td data-num="3"></td><td><pre>anaconda-ks.cfg  initial-setup-ks.cfg  jdk-8u271-linux-x64.tar.gz  my.cfg</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># stat my.cfg </span></pre></td></tr><tr><td data-num="5"></td><td><pre>  File: my.cfg</pre></td></tr><tr><td data-num="6"></td><td><pre>  Size: <span class="token number">1231</span>      	Blocks: <span class="token number">8</span>          IO Block: <span class="token number">4096</span>   regular <span class="token function">file</span></pre></td></tr><tr><td data-num="7"></td><td><pre>Device: fd00h/64768d	Inode: <span class="token number">10769207</span>    Links: <span class="token number">2</span></pre></td></tr><tr><td data-num="8"></td><td><pre>Access: <span class="token punctuation">(</span>0600/-rw-------<span class="token punctuation">)</span>  Uid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span>   Gid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>Context: system_u:object_r:admin_home_t:s0</pre></td></tr><tr><td data-num="10"></td><td><pre>Access: <span class="token number">2021</span>-01-07 <span class="token number">17</span>:39:45.074653805 +0800</pre></td></tr><tr><td data-num="11"></td><td><pre>Modify: <span class="token number">2021</span>-01-07 <span class="token number">17</span>:38:05.698905841 +0800</pre></td></tr><tr><td data-num="12"></td><td><pre>Change: <span class="token number">2021</span>-04-13 <span class="token number">11</span>:02:58.665252050 +0800</pre></td></tr><tr><td data-num="13"></td><td><pre> Birth: -</pre></td></tr></table></figure><p>可以看到同一文件的 Inode 是相同的，即硬链接和软链接指向同一份文件，更改软链接指向的文件，那么实际文件也会更改</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ll</span></pre></td></tr><tr><td data-num="2"></td><td><pre>total <span class="token number">139800</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#可以看到 anaconda-ks.cfg（硬连接）被应用的数量为 2</span></pre></td></tr><tr><td data-num="4"></td><td><pre>-rw-------. <span class="token number">2</span> root root      <span class="token number">1231</span> Jan  <span class="token number">7</span> <span class="token number">17</span>:38 anaconda-ks.cfg</pre></td></tr><tr><td data-num="5"></td><td><pre>-rw-r--r--. <span class="token number">1</span> root root      <span class="token number">1386</span> Jan  <span class="token number">7</span> <span class="token number">17</span>:40 initial-setup-ks.cfg</pre></td></tr><tr><td data-num="6"></td><td><pre>-rw-r--r--. <span class="token number">1</span> root root <span class="token number">143142634</span> Jan  <span class="token number">8</span> <span class="token number">15</span>:51 jdk-8u271-linux-x64.tar.gz</pre></td></tr><tr><td data-num="7"></td><td><pre>-rw-------. <span class="token number">2</span> root root      <span class="token number">1231</span> Jan  <span class="token number">7</span> <span class="token number">17</span>:38 my.cfg</pre></td></tr></table></figure><p>如果软链接加了参数 - s，那么连个文件就是不同的文件，即 Inode 不同</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ln -s anaconda-ks.cfg my.cfg</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># stat my.cfg </span></pre></td></tr><tr><td data-num="3"></td><td><pre>  File: my.cfg -<span class="token operator">></span> anaconda-ks.cfg</pre></td></tr><tr><td data-num="4"></td><td><pre>  Size: <span class="token number">15</span>        	Blocks: <span class="token number">0</span>          IO Block: <span class="token number">4096</span>   symbolic <span class="token function">link</span></pre></td></tr><tr><td data-num="5"></td><td><pre>Device: fd00h/64768d	Inode: <span class="token number">10769867</span>    Links: <span class="token number">1</span></pre></td></tr><tr><td data-num="6"></td><td><pre>Access: <span class="token punctuation">(</span>0777/lrwxrwxrwx<span class="token punctuation">)</span>  Uid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span>   Gid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>Context: unconfined_u:object_r:admin_home_t:s0</pre></td></tr><tr><td data-num="8"></td><td><pre>Access: <span class="token number">2021</span>-04-13 <span class="token number">11</span>:11:34.339225319 +0800</pre></td></tr><tr><td data-num="9"></td><td><pre>Modify: <span class="token number">2021</span>-04-13 <span class="token number">11</span>:11:27.761225660 +0800</pre></td></tr><tr><td data-num="10"></td><td><pre>Change: <span class="token number">2021</span>-04-13 <span class="token number">11</span>:11:27.761225660 +0800</pre></td></tr><tr><td data-num="11"></td><td><pre> Birth: -</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># stat anaconda-ks.cfg </span></pre></td></tr><tr><td data-num="13"></td><td><pre>  File: anaconda-ks.cfg</pre></td></tr><tr><td data-num="14"></td><td><pre>  Size: <span class="token number">1231</span>      	Blocks: <span class="token number">8</span>          IO Block: <span class="token number">4096</span>   regular <span class="token function">file</span></pre></td></tr><tr><td data-num="15"></td><td><pre>Device: fd00h/64768d	Inode: <span class="token number">10769207</span>    Links: <span class="token number">1</span></pre></td></tr><tr><td data-num="16"></td><td><pre>Access: <span class="token punctuation">(</span>0600/-rw-------<span class="token punctuation">)</span>  Uid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span>   Gid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>Context: system_u:object_r:admin_home_t:s0</pre></td></tr><tr><td data-num="18"></td><td><pre>Access: <span class="token number">2021</span>-01-07 <span class="token number">17</span>:39:45.074653805 +0800</pre></td></tr><tr><td data-num="19"></td><td><pre>Modify: <span class="token number">2021</span>-01-07 <span class="token number">17</span>:38:05.698905841 +0800</pre></td></tr><tr><td data-num="20"></td><td><pre>Change: <span class="token number">2021</span>-04-13 <span class="token number">11</span>:11:17.109226212 +0800</pre></td></tr><tr><td data-num="21"></td><td><pre> Birth: -</pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ll</span></pre></td></tr><tr><td data-num="23"></td><td><pre>total <span class="token number">139796</span></pre></td></tr><tr><td data-num="24"></td><td><pre>-rw-------. <span class="token number">1</span> root root      <span class="token number">1231</span> Jan  <span class="token number">7</span> <span class="token number">17</span>:38 anaconda-ks.cfg</pre></td></tr><tr><td data-num="25"></td><td><pre>-rw-r--r--. <span class="token number">1</span> root root      <span class="token number">1386</span> Jan  <span class="token number">7</span> <span class="token number">17</span>:40 initial-setup-ks.cfg</pre></td></tr><tr><td data-num="26"></td><td><pre>-rw-r--r--. <span class="token number">1</span> root root <span class="token number">143142634</span> Jan  <span class="token number">8</span> <span class="token number">15</span>:51 jdk-8u271-linux-x64.tar.gz</pre></td></tr><tr><td data-num="27"></td><td><pre>lrwxrwxrwx. <span class="token number">1</span> root root        <span class="token number">15</span> Apr <span class="token number">13</span> <span class="token number">11</span>:11 my.cfg -<span class="token operator">></span> anaconda-ks.cfg</pre></td></tr></table></figure><h2 id="whereis"><a class="anchor" href="#whereis">#</a> whereis</h2><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># whereis bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre>bash: /usr/bin/bash /usr/share/man/man1/bash.1.gz /usr/share/info/bash.info.gz</pre></td></tr></table></figure><h2 id="ldd"><a class="anchor" href="#ldd">#</a> ldd</h2><p>分析程序依赖的库</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># ldd bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	linux-vdso.so.1 <span class="token punctuation">(</span>0x00007ffc2993f000<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	libtinfo.so.6 <span class="token operator">=</span><span class="token operator">></span> /lib64/libtinfo.so.6 <span class="token punctuation">(</span>0x00007f7901714000<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	libdl.so.2 <span class="token operator">=</span><span class="token operator">></span> /lib64/libdl.so.2 <span class="token punctuation">(</span>0x00007f7901510000<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	libc.so.6 <span class="token operator">=</span><span class="token operator">></span> /lib64/libc.so.6 <span class="token punctuation">(</span>0x00007f790114c000<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	/lib64/ld-linux-x86-64.so.2 <span class="token punctuation">(</span>0x00007f7901c5f000<span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="进程查看"><a class="anchor" href="#进程查看">#</a> 进程查看</h2><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $$ #代表当前 bash 进程</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token number">2254</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># /bin/bash #开启一个新 bash</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $$</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token number">2282</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#查看进程的父子关系</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># pstree </span></pre></td></tr><tr><td data-num="8"></td><td><pre>        ├─rsyslogd───2*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>rsyslogd<span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        ├─rtkit-daemon───2*<span class="token punctuation">[</span><span class="token punctuation">&#123;</span>rtkit-daemon<span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        ├─smartd              </pre></td></tr><tr><td data-num="11"></td><td><pre>        ├─sshd───sshd───sshd───bash───bash───pstree</pre></td></tr><tr><td data-num="12"></td><td><pre>        </pre></td></tr><tr><td data-num="13"></td><td><pre>        </pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep 2254</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">#		   父进程  子进程</span></pre></td></tr><tr><td data-num="16"></td><td><pre>root       <span class="token number">2254</span>   <span class="token number">2253</span>  <span class="token number">0</span> <span class="token number">10</span>:30 pts/0    00:00:00 -bash</pre></td></tr><tr><td data-num="17"></td><td><pre>root       <span class="token number">2282</span>   <span class="token number">2254</span>  <span class="token number">0</span> <span class="token number">10</span>:30 pts/0    00:00:00 /bin/bash</pre></td></tr><tr><td data-num="18"></td><td><pre>root       <span class="token number">2337</span>   <span class="token number">2282</span>  <span class="token number">0</span> <span class="token number">10</span>:33 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto <span class="token number">2254</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">#退出子进程，回到父进程</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># exit</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token builtin class-name">exit</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $$</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token number">2254</span></pre></td></tr></table></figure><h2 id="lsof"><a class="anchor" href="#lsof">#</a> lsof</h2><p>查看进程打开了哪些文件</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#查看 bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># lsof -op $$</span></pre></td></tr><tr><td data-num="3"></td><td><pre>lsof: WARNING: can't stat<span class="token punctuation">(</span><span class="token punctuation">)</span> fuse.gvfsd-fuse <span class="token function">file</span> system /run/user/1000/gvfs</pre></td></tr><tr><td data-num="4"></td><td><pre>      Output information may be incomplete.</pre></td></tr><tr><td data-num="5"></td><td><pre>COMMAND  PID <span class="token environment constant">USER</span>   FD   TYPE             DEVICE SIZE/OFF     NODE NAME</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  cwd    DIR              <span class="token number">253,0</span>    <span class="token number">40960</span>  <span class="token number">8409219</span> /usr/bin</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  rtd    DIR              <span class="token number">253,0</span>      <span class="token number">224</span>      <span class="token number">128</span> /</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  txt    REG              <span class="token number">253,0</span>  <span class="token number">1219272</span>  <span class="token number">8821425</span> /usr/bin/bash</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>  <span class="token number">2586242</span>  <span class="token number">8813609</span> /usr/lib/locale/en_US.utf8/LC_COLLATE</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>    <span class="token number">73264</span> <span class="token number">12818715</span> /usr/lib64/libnss_files-2.28.so</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>  <span class="token number">8406312</span> <span class="token number">13451458</span> /var/lib/sss/mc/passwd</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>    <span class="token number">42088</span> <span class="token number">13900504</span> /usr/lib64/libnss_sss.so.2</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>  <span class="token number">3201344</span> <span class="token number">12818703</span> /usr/lib64/libc-2.28.so</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>    <span class="token number">28784</span> <span class="token number">12818705</span> /usr/lib64/libdl-2.28.so</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>   <span class="token number">208616</span> <span class="token number">12812861</span> /usr/lib64/libtinfo.so.6.1</pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>   <span class="token number">243520</span> <span class="token number">12818696</span> /usr/lib64/ld-2.28.so</pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>   <span class="token number">337024</span>  <span class="token number">8813610</span> /usr/lib/locale/en_US.utf8/LC_CTYPE</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>       <span class="token number">54</span>  <span class="token number">8813613</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_NUMERIC</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>     <span class="token number">3316</span> <span class="token number">12813675</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_TIME</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>      <span class="token number">286</span> <span class="token number">12813673</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_MONETARY</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>       <span class="token number">57</span> <span class="token number">12813685</span> /usr/lib/locale/en_US.utf8/LC_MESSAGES/SYS_LC_MESSAGES</pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>       <span class="token number">34</span>  <span class="token number">4414616</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_PAPER</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>       <span class="token number">77</span>  <span class="token number">8813612</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_NAME</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>      <span class="token number">167</span> <span class="token number">12813670</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_ADDRESS</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>       <span class="token number">59</span> <span class="token number">12813674</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_TELEPHONE</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>       <span class="token number">23</span> <span class="token number">12813672</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_MEASUREMENT</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>    <span class="token number">26398</span>  <span class="token number">4431007</span> /usr/lib64/gconv/gconv-modules.cache</pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  mem    REG              <span class="token number">253,0</span>      <span class="token number">368</span> <span class="token number">12813671</span> /usr/lib/locale/en_US.utf8/<span class="token environment constant">LC_IDENTIFICATION</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root    0u   CHR              <span class="token number">136,1</span>      0t0        <span class="token number">4</span> /dev/pts/1</pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root    1u   CHR              <span class="token number">136,1</span>      0t0        <span class="token number">4</span> /dev/pts/1</pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root    2u   CHR              <span class="token number">136,1</span>      0t0        <span class="token number">4</span> /dev/pts/1</pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root    3r   REG              <span class="token number">253,0</span>  <span class="token number">8406312</span> <span class="token number">13451458</span> /var/lib/sss/mc/passwd</pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root    4u  unix 0x00000000015f1ce9      0t0    <span class="token number">68945</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>STREAM</pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token function">bash</span>    <span class="token number">8376</span> root  255u   CHR              <span class="token number">136,1</span>      0t0        <span class="token number">4</span> /dev/pts/1</pre></td></tr></table></figure><h2 id="变量"><a class="anchor" href="#变量">#</a> 变量</h2><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#定义变量，不能有空格</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># x=100</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#取到变量的值</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $x</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token number">100</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#开启一个子 bash</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># /bin/bash</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#子 bash 无法取到父 bash 中的变量</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $x</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">#退出子 bash</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># exit</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token builtin class-name">exit</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">#将变量 x 导出，使得任何子进都可以取到该变量</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># export x</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">#开启子 bash</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># /bin/bash</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">#此时，子 bash 可以取到 x</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo $x</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token number">100</span></pre></td></tr></table></figure><h2 id="代码块"><a class="anchor" href="#代码块">#</a> 代码块</h2><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#注意：花括号里前后都要加空格</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># &#123; echo "sfaf"; echo "sfsf"; &#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>sfaf</pre></td></tr><tr><td data-num="4"></td><td><pre>sfsf</pre></td></tr></table></figure><h2 id="sysctl"><a class="anchor" href="#sysctl">#</a> sysctl</h2><p>内核中的控制项</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#列出内核中的所有控制项</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sysctl -a</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 查询某个具体的配置项</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sysctl -a | grep dirty</span></pre></td></tr><tr><td data-num="5"></td><td><pre>vm.dirty_background_bytes <span class="token operator">=</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="6"></td><td><pre>vm.dirty_background_ratio <span class="token operator">=</span> <span class="token number">10</span></pre></td></tr><tr><td data-num="7"></td><td><pre>vm.dirty_bytes <span class="token operator">=</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="8"></td><td><pre>vm.dirty_expire_centisecs <span class="token operator">=</span> <span class="token number">3000</span></pre></td></tr><tr><td data-num="9"></td><td><pre>vm.dirty_ratio <span class="token operator">=</span> <span class="token number">30</span></pre></td></tr><tr><td data-num="10"></td><td><pre>vm.dirty_writeback_centisecs <span class="token operator">=</span> <span class="token number">500</span></pre></td></tr><tr><td data-num="11"></td><td><pre>vm.dirtytime_expire_seconds <span class="token operator">=</span> <span class="token number">43200</span></pre></td></tr></table></figure><h2 id="网卡设置子ip"><a class="anchor" href="#网卡设置子ip">#</a> 网卡设置子 IP</h2><pre><code>ifconfig eth0:11 192.168.160.11/24
</code></pre><h2 id="文件系统的io"><a class="anchor" href="#文件系统的io">#</a> 文件系统的 IO</h2><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bjmashibing<span class="token punctuation">.</span>system<span class="token punctuation">.</span>io</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">BufferedOutputStream</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">RandomAccessFile</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span></span><span class="token class-name">ByteBuffer</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span></span><span class="token class-name">MappedByteBuffer</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels<span class="token punctuation">.</span></span><span class="token class-name">FileChannel</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OSFileIO</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token string">"123456789\n"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">static</span> <span class="token class-name">String</span> path <span class="token operator">=</span>  <span class="token string">"/root/testfileio/out.txt"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">switch</span> <span class="token punctuation">(</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token keyword">case</span> <span class="token string">"0"</span> <span class="token operator">:</span></pre></td></tr><tr><td data-num="23"></td><td><pre>                <span class="token function">testBasicFileIO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>                <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token keyword">case</span> <span class="token string">"1"</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="26"></td><td><pre>                <span class="token function">testBufferedFileIO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                <span class="token keyword">break</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token keyword">case</span> <span class="token string">"2"</span> <span class="token operator">:</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                <span class="token function">testRandomAccessFileWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token keyword">case</span> <span class="token string">"3"</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="31"></td><td><pre>                <span class="token function">whatByteBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token keyword">default</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token comment">// 最基本的 file 写</span></pre></td></tr><tr><td data-num="39"></td><td><pre>	<span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span>  <span class="token keyword">void</span> <span class="token function">testBasicFileIO</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token class-name">FileOutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token comment">// 测试 buffer 文件 IO</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token comment">//  jvm  8kB   syscall  write(8KBbyte[])</span></pre></td></tr><tr><td data-num="53"></td><td><pre>	<span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testBufferedFileIO</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token class-name">BufferedOutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre></pre></td></tr><tr><td data-num="64"></td><td><pre></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token comment">// 测试文件 NIO</span></pre></td></tr><tr><td data-num="66"></td><td><pre>		<span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="67"></td><td><pre>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testRandomAccessFileWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span>  <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre></pre></td></tr><tr><td data-num="69"></td><td><pre></pre></td></tr><tr><td data-num="70"></td><td><pre>        <span class="token class-name">RandomAccessFile</span> raf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"rw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre></pre></td></tr><tr><td data-num="72"></td><td><pre>        raf<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"hello mashibing\n"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>        raf<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"hello seanzhou\n"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"write------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre></pre></td></tr><tr><td data-num="77"></td><td><pre>        raf<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>        raf<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"ooxx"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre></pre></td></tr><tr><td data-num="80"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"seek---------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre></pre></td></tr><tr><td data-num="83"></td><td><pre>        <span class="token class-name">FileChannel</span> rafchannel <span class="token operator">=</span> raf<span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>        <span class="token comment">//mapped 映射：是 mmap () 调用的一个进程和内核共享的内存区域，且这个内存区域是 pagecache 到磁盘（文件）的映射</span></pre></td></tr><tr><td data-num="85"></td><td><pre>        <span class="token class-name">MappedByteBuffer</span> map <span class="token operator">=</span> rafchannel<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">FileChannel<span class="token punctuation">.</span>MapMode</span><span class="token punctuation">.</span>READ_WRITE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4096</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre></pre></td></tr><tr><td data-num="87"></td><td><pre></pre></td></tr><tr><td data-num="88"></td><td><pre>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"@@@"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//put () 不是系统调用  但是数据会到达 内核的 pagecache</span></pre></td></tr><tr><td data-num="89"></td><td><pre>            <span class="token comment">// 曾经我们是需要 out.write ()  这样的系统调用，才能让程序的 data 进入内核的 pagecache</span></pre></td></tr><tr><td data-num="90"></td><td><pre>            <span class="token comment">// 曾经必须有用户态内核态切换</span></pre></td></tr><tr><td data-num="91"></td><td><pre>            <span class="token comment">//mmap 的内存映射，依然是内核的 pagecache 体系所约束的！！！</span></pre></td></tr><tr><td data-num="92"></td><td><pre>            <span class="token comment">// 换言之，丢数据</span></pre></td></tr><tr><td data-num="93"></td><td><pre>            <span class="token comment">// 你可以去 github 上找一些 其他 C 程序员写的 jni 扩展库，使用 linux 内核的 Direct IO</span></pre></td></tr><tr><td data-num="94"></td><td><pre>            <span class="token comment">// 直接 IO 是忽略 linux 的 pagecache</span></pre></td></tr><tr><td data-num="95"></td><td><pre>            <span class="token comment">// 是把 pagecache  交给了程序自己开辟一个字节数组当作 pagecache，动用代码逻辑来维护一致性 /dirty。。。一系列复杂问题</span></pre></td></tr><tr><td data-num="96"></td><td><pre></pre></td></tr><tr><td data-num="97"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"map--put--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="98"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="99"></td><td><pre></pre></td></tr><tr><td data-num="100"></td><td><pre><span class="token comment">//        map.force(); //  flush</span></pre></td></tr><tr><td data-num="101"></td><td><pre></pre></td></tr><tr><td data-num="102"></td><td><pre></pre></td></tr><tr><td data-num="103"></td><td><pre></pre></td></tr><tr><td data-num="104"></td><td><pre>        raf<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="105"></td><td><pre></pre></td></tr><tr><td data-num="106"></td><td><pre>        <span class="token class-name">ByteBuffer</span> buffer <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">8192</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="107"></td><td><pre><span class="token comment">//        ByteBuffer buffer = ByteBuffer.allocateDirect(1024);</span></pre></td></tr><tr><td data-num="108"></td><td><pre></pre></td></tr><tr><td data-num="109"></td><td><pre>        <span class="token keyword">int</span> read <span class="token operator">=</span> rafchannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//buffer.put()</span></pre></td></tr><tr><td data-num="110"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="111"></td><td><pre>        buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="112"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="113"></td><td><pre></pre></td></tr><tr><td data-num="114"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> buffer<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="116"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>buffer<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="117"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="118"></td><td><pre></pre></td></tr><tr><td data-num="119"></td><td><pre></pre></td></tr><tr><td data-num="120"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="121"></td><td><pre></pre></td></tr><tr><td data-num="122"></td><td><pre></pre></td></tr><tr><td data-num="123"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="124"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">whatByteBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="125"></td><td><pre></pre></td></tr><tr><td data-num="126"></td><td><pre>			<span class="token comment">//jvm 堆内分配</span></pre></td></tr><tr><td data-num="127"></td><td><pre><span class="token comment">//        ByteBuffer buffer = ByteBuffer.allocate(1024);</span></pre></td></tr><tr><td data-num="128"></td><td><pre>		<span class="token comment">//jvm 堆外分配（java 进程的堆内分配）</span></pre></td></tr><tr><td data-num="129"></td><td><pre>        <span class="token class-name">ByteBuffer</span> buffer <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocateDirect</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="130"></td><td><pre></pre></td></tr><tr><td data-num="131"></td><td><pre></pre></td></tr><tr><td data-num="132"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"postition: "</span> <span class="token operator">+</span> buffer<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="133"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"limit: "</span> <span class="token operator">+</span>  buffer<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="134"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"capacity: "</span> <span class="token operator">+</span> buffer<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="135"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"mark: "</span> <span class="token operator">+</span> buffer<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="136"></td><td><pre></pre></td></tr><tr><td data-num="137"></td><td><pre>        buffer<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="138"></td><td><pre></pre></td></tr><tr><td data-num="139"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------------put:123......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="140"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"mark: "</span> <span class="token operator">+</span> buffer<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="141"></td><td><pre></pre></td></tr><tr><td data-num="142"></td><td><pre>        buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 读写交替</span></pre></td></tr><tr><td data-num="143"></td><td><pre></pre></td></tr><tr><td data-num="144"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------------flip......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="145"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"mark: "</span> <span class="token operator">+</span> buffer<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="146"></td><td><pre></pre></td></tr><tr><td data-num="147"></td><td><pre>        buffer<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="148"></td><td><pre></pre></td></tr><tr><td data-num="149"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------------get......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="150"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"mark: "</span> <span class="token operator">+</span> buffer<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="151"></td><td><pre></pre></td></tr><tr><td data-num="152"></td><td><pre>        buffer<span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="153"></td><td><pre></pre></td></tr><tr><td data-num="154"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------------compact......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="155"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"mark: "</span> <span class="token operator">+</span> buffer<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="156"></td><td><pre></pre></td></tr><tr><td data-num="157"></td><td><pre>        buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="158"></td><td><pre></pre></td></tr><tr><td data-num="159"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------------clear......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="160"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"mark: "</span> <span class="token operator">+</span> buffer<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="161"></td><td><pre></pre></td></tr><tr><td data-num="162"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="163"></td><td><pre></pre></td></tr><tr><td data-num="164"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucHJvY2Vzc29uLmNvbS92aWV3L2xpbmsvNjA4OTAxMDRlMGIzNGQ0N2E3MGUzYmUw">io 分析在线查看</span></p><div class="tags"><a href="/tags/Java/" rel="tag"><i class="ic i-tag"></i> Java</a> <a href="/tags/IO/" rel="tag"><i class="ic i-tag"></i> IO</a> <a href="/tags/Linux/" rel="tag"><i class="ic i-tag"></i> Linux</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2021-12-27 23:23:52" itemprop="dateModified" datetime="2021-12-27T23:23:52+08:00">2021-12-27</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.jpg" alt="fanfanfan 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.jpg" alt="fanfanfan 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>fanfanfan</li><li class="link"><strong>本文链接：</strong> <a href="https://baiyezi.vip/java/io/%E7%A3%81%E7%9B%98IO%E4%B8%8E%E7%BD%91%E7%BB%9CIO/" title="磁盘IO与网络IO">https://baiyezi.vip/java/io/磁盘IO与网络IO/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%B8%80%EF%BC%89/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;bfanfanfan&#x2F;img&#x2F;raw&#x2F;master&#x2F;guzhuang&#x2F;20211225105008.png" title="微服务中的会话管理（一）"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Java</span><h3>微服务中的会话管理（一）</h3></a></div><div class="item right"><a href="/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%BA%8C%EF%BC%89/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;bfanfanfan&#x2F;img&#x2F;raw&#x2F;master&#x2F;guzhuang&#x2F;20211225105421.jpg" title="微服务中的会话管理（二）"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> Java</span><h3>微服务中的会话管理（二）</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#vfs"><span class="toc-number">1.</span> <span class="toc-text">VFS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fd"><span class="toc-number">2.</span> <span class="toc-text">FD</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">3.</span> <span class="toc-text">重定向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#headtail"><span class="toc-number">4.</span> <span class="toc-text">head&#x2F;tail</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E9%81%93"><span class="toc-number">5.</span> <span class="toc-text">管道</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8Ebashpid%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">6.</span> <span class="toc-text">$$ 与 $BASHPID 的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#inode"><span class="toc-number">7.</span> <span class="toc-text">Inode</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pagecache"><span class="toc-number">8.</span> <span class="toc-text">PageCache</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%82%E8%BD%BD"><span class="toc-number">9.</span> <span class="toc-text">挂载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">10.</span> <span class="toc-text">文件类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E9%93%BE%E6%8E%A5-%E8%BD%AF%E9%93%BE%E6%8E%A5"><span class="toc-number">11.</span> <span class="toc-text">硬链接、软链接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#whereis"><span class="toc-number">12.</span> <span class="toc-text">whereis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ldd"><span class="toc-number">13.</span> <span class="toc-text">ldd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E6%9F%A5%E7%9C%8B"><span class="toc-number">14.</span> <span class="toc-text">进程查看</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lsof"><span class="toc-number">15.</span> <span class="toc-text">lsof</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">16.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-number">17.</span> <span class="toc-text">代码块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sysctl"><span class="toc-number">18.</span> <span class="toc-text">sysctl</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E5%8D%A1%E8%AE%BE%E7%BD%AE%E5%AD%90ip"><span class="toc-number">19.</span> <span class="toc-text">网卡设置子 IP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84io"><span class="toc-number">20.</span> <span class="toc-text">文件系统的 IO</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/java/MySQL/Linux%E4%B8%8B%E5%AE%89%E8%A3%85MySQL/" rel="bookmark" title="Linux下安装MySQL">Linux下安装MySQL</a></li><li><a href="/java/MySQL/MySQL%E5%9F%BA%E7%A1%80/" rel="bookmark" title="MySQL基础">MySQL基础</a></li><li><a href="/java/Spring/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89/" rel="bookmark" title="IOC配置方式（一）">IOC配置方式（一）</a></li><li><a href="/java/Spring/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%BA%8C%EF%BC%89/" rel="bookmark" title="IOC配置方式（二）">IOC配置方式（二）</a></li><li><a href="/java/Spring/IOC%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F/" rel="bookmark" title="IOC注解方式">IOC注解方式</a></li><li><a href="/java/Spring/AOP/" rel="bookmark" title="AOP">AOP</a></li><li><a href="/java/SpringBoot/SpringBoot%E5%85%A5%E9%97%A8/" rel="bookmark" title="SpringBoot入门">SpringBoot入门</a></li><li><a href="/java/SpringBoot/SpringBoot-Web%E5%BC%80%E5%8F%91/" rel="bookmark" title="SpringBoot-Web开发">SpringBoot-Web开发</a></li><li><a href="/java/SpringBoot/SpringBoot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E5%8E%9F%E7%90%86/" rel="bookmark" title="SpringBoot自动装配原理">SpringBoot自动装配原理</a></li><li><a href="/java/zookeeper/zookeeper%E6%90%AD%E5%BB%BA%E5%8F%8A%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" rel="bookmark" title="zookeeper搭建及基本概念">zookeeper搭建及基本概念</a></li><li><a href="/java/zookeeper/zookeeper%E5%8E%9F%E7%90%86/" rel="bookmark" title="zookeeper原理">zookeeper原理</a></li><li><a href="/java/zookeeper/zookeeper%E6%A1%88%E4%BE%8B/" rel="bookmark" title="zookeeper案例">zookeeper案例</a></li><li><a href="/java/MySQL/MySQL%E8%B0%83%E4%BC%98%EF%BC%88%E4%B8%80%EF%BC%89/" rel="bookmark" title="MySQL调优（一）">MySQL调优（一）</a></li><li><a href="/java/redis/redis%E5%AE%89%E8%A3%85%E5%8F%8ANIO%E5%8E%9F%E7%90%86/" rel="bookmark" title="redis安装及NIO原理">redis安装及NIO原理</a></li><li><a href="/java/SpringMVC/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/" rel="bookmark" title="SpringMVC入门（一）">SpringMVC入门（一）</a></li><li><a href="/java/SpringMVC/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/" rel="bookmark" title="SpringMVC入门（二）">SpringMVC入门（二）</a></li><li><a href="/java/SpringMVC/SpringMVC-REST%E9%A3%8E%E6%A0%BC/" rel="bookmark" title="SpringMVC-REST风格">SpringMVC-REST风格</a></li><li><a href="/java/SpringMVC/SpringMVC%E8%BF%9B%E9%98%B6/" rel="bookmark" title="SpringMVC进阶">SpringMVC进阶</a></li><li><a href="/java/SpringMVC/SpringMVC%E6%BA%90%E7%A0%81%E6%80%BB%E7%BB%93/" rel="bookmark" title="SpringMVC源码总结">SpringMVC源码总结</a></li><li><a href="/java/shiro/shiro%E5%85%A5%E9%97%A8/" rel="bookmark" title="shiro入门">shiro入门</a></li><li><a href="/java/shiro/shiro%E6%95%B4%E5%90%88SpringBoot/" rel="bookmark" title="shiro整合SpringBoot">shiro整合SpringBoot</a></li><li><a href="/java/shiro/shiro%E7%9A%84session%E7%AE%A1%E7%90%86/" rel="bookmark" title="shiro的session管理">shiro的session管理</a></li><li><a href="/java/shiro/shiro%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E7%99%BB%E5%BD%95/" rel="bookmark" title="shiro的缓存机制与分布式登录">shiro的缓存机制与分布式登录</a></li><li><a href="/java/shiro/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/" rel="bookmark" title="单点登录">单点登录</a></li><li><a href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="bookmark" title="线程基础知识">线程基础知识</a></li><li><a href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%AE%B9%E5%99%A8%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%B1%A0/" rel="bookmark" title="容器与线程池">容器与线程池</a></li><li><a href="/java/docker/Win10%E5%AE%89%E8%A3%85docker/" rel="bookmark" title="Win10安装docker">Win10安装docker</a></li><li><a href="/java/docker/Win10%E4%B8%ADdocker%E9%83%A8%E7%BD%B2springboot%E9%A1%B9%E7%9B%AE/" rel="bookmark" title="Win10安装docker">Win10安装docker</a></li><li><a href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/JMH/" rel="bookmark" title="JMH">JMH</a></li><li><a href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="bookmark" title="并发编程">并发编程</a></li><li><a href="/java/%E6%97%A5%E5%BF%97/java-%E6%97%A5%E5%BF%97%E4%BD%93%E7%B3%BB/" rel="bookmark" title="java-日志体系">java-日志体系</a></li><li><a href="/java/redis/redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" rel="bookmark" title="redis的数据类型">redis的数据类型</a></li><li><a href="/java/redis/redis%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/" rel="bookmark" title="redis进阶使用">redis进阶使用</a></li><li><a href="/java/redis/redis%E7%9A%84%E9%9B%86%E7%BE%A4/" rel="bookmark" title="redis的集群">redis的集群</a></li><li><a href="/java/redis/redis%E5%9C%A8%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/" rel="bookmark" title="redis在开发中的简单使用">redis在开发中的简单使用</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/ChainOfResponsibility%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="ChainOfResponsibility责任链模式">ChainOfResponsibility责任链模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Composite%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Composite组合模式">Composite组合模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Flyweight%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Flyweight享元模式">Flyweight享元模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Mediator%E8%B0%83%E5%81%9C%E8%80%85%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Mediator调停者模式">Mediator调停者模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Iterator%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Iterator迭代器模式">Iterator迭代器模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Observer%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Observer观察者模式">Observer观察者模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Proxy%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Proxy代理模式">Proxy代理模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Singleton%E5%8D%95%E4%BE%8B/" rel="bookmark" title="Singleton单例">Singleton单例</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Decorator%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Decorator装饰器模式">Decorator装饰器模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Facade%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Facade门面模式">Facade门面模式</a></li><li><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Factory%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" rel="bookmark" title="Factory工厂模式">Factory工厂模式</a></li><li><a href="/java/SpringCloud/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BB%A5%E5%8F%8A%E6%9E%B6%E6%9E%84%E5%8F%91%E5%B1%95/" rel="bookmark" title="微服务以及架构发展">微服务以及架构发展</a></li><li><a href="/java/JVM/JVM-%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD/" rel="bookmark" title="JVM-类的加载">JVM-类的加载</a></li><li><a href="/java/SpringCloud/SpringCloud-Netflix%E4%BD%93%E7%B3%BB/" rel="bookmark" title="SpringCloud-Netflix体系">SpringCloud-Netflix体系</a></li><li><a href="/java/%E5%BA%8F%E5%88%97%E5%8C%96/%E5%BA%8F%E5%88%97%E5%8C%96/" rel="bookmark" title="序列化">序列化</a></li><li><a href="/java/JVM/JVM-JMM/" rel="bookmark" title="JVM-JMM">JVM-JMM</a></li><li><a href="/java/%E4%BA%BF%E7%BA%A7%E6%B5%81%E9%87%8F%E5%A4%9A%E7%BA%A7%E7%BC%93%E5%AD%98/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/" rel="bookmark" title="分布式系统与高并发系统架构">分布式系统与高并发系统架构</a></li><li><a href="/java/JVM/JVM-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA/" rel="bookmark" title="JVM-对象的创建">JVM-对象的创建</a></li><li><a href="/java/JVM/JVM-JVM%E8%B0%83%E4%BC%98/" rel="bookmark" title="JVM-JVM调优">JVM-JVM调优</a></li><li><a href="/java/JVM/JVM-GC/" rel="bookmark" title="JVM-GC">JVM-GC</a></li><li><a href="/java/SpringCloud/SpringCloud-Alibaba%E4%BD%93%E7%B3%BB/" rel="bookmark" title="SpringCloud-Alibaba体系">SpringCloud-Alibaba体系</a></li><li><a href="/java/SpringCloud/SpringCloud-SpringCloud%E4%BD%93%E7%B3%BB/" rel="bookmark" title="SpringCloud-SpringCloud体系">SpringCloud-SpringCloud体系</a></li><li><a href="/java/SpringCloud/Apollo/" rel="bookmark" title="Apollo">Apollo</a></li><li><a href="/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%B8%80%EF%BC%89/" rel="bookmark" title="微服务中的会话管理（一）">微服务中的会话管理（一）</a></li><li class="active"><a href="/java/io/%E7%A3%81%E7%9B%98IO%E4%B8%8E%E7%BD%91%E7%BB%9CIO/" rel="bookmark" title="磁盘IO与网络IO">磁盘IO与网络IO</a></li><li><a href="/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%BA%8C%EF%BC%89/" rel="bookmark" title="微服务中的会话管理（二）">微服务中的会话管理（二）</a></li><li><a href="/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D/HTTPS/" rel="bookmark" title="HTTPS">HTTPS</a></li><li><a href="/java/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/RocketMQ/RocketMQ-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="bookmark" title="RocketMQ-基础概念">RocketMQ-基础概念</a></li><li><a href="/java/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/RocketMQ/RocketMQ-%E6%B6%88%E6%81%AF%E3%80%81%E4%BA%8B%E5%8A%A1/" rel="bookmark" title="RocketMQ-消息、事务">RocketMQ-消息、事务</a></li><li><a href="/java/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/Kafka-%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/" rel="bookmark" title="Kafka-整体架构">Kafka-整体架构</a></li><li><a href="/java/io/%E7%BD%91%E7%BB%9CIO%E6%A8%A1%E5%9E%8B/" rel="bookmark" title="网络IO模型">网络IO模型</a></li><li><a href="/java/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/Kafka-%E6%90%AD%E5%BB%BA/" rel="bookmark" title="Kafka-搭建">Kafka-搭建</a></li><li><a href="/java/io/Netty/" rel="bookmark" title="Netty">Netty</a></li><li><a href="/java/Nginx/nginx%E5%AE%9E%E6%88%98/" rel="bookmark" title="nginx实战">nginx实战</a></li><li><a href="/instruments/%E4%B8%B2%E5%8F%A3/Java%E5%92%8C%E4%B8%B2%E5%8F%A3%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1/" rel="bookmark" title="Java和串口进行通信">Java和串口进行通信</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="fanfanfan" data-src="/images/avatar.gif"><p class="name" itemprop="name">fanfanfan</p><div class="description" itemprop="description">花有重开日，人无再少年</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">76</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">4</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">78</span> <span class="name">标签</span></a></div></nav><div class="social"></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-magic"></i>友链</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item"><a href="/statistics/" rel="section"><i class="ic i-heart"></i>文章统计</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%B8%80%EF%BC%89/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%BA%8C%EF%BC%89/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/instruments/" title="分类于 工具">工具</a></div><span><a href="/instruments/%E7%BF%BB%E8%AF%91%E5%B0%8F%E5%B7%A5%E5%85%B7/%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E7%BF%BB%E8%AF%91%E5%B0%8F%E5%B7%A5%E5%85%B7%EF%BC%88%E4%BA%8C%EF%BC%89/" title="手动实现翻译小工具（二）">手动实现翻译小工具（二）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/JVM/JVM-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA/" title="JVM-对象的创建">JVM-对象的创建</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/SpringMVC/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/" title="SpringMVC入门（一）">SpringMVC入门（一）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/instruments/" title="分类于 工具">工具</a> <i class="ic i-angle-right"></i> <a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/instruments/%E4%B8%B2%E5%8F%A3/Java%E5%92%8C%E4%B8%B2%E5%8F%A3%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1/" title="Java和串口进行通信">Java和串口进行通信</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/Kafka-%E6%90%AD%E5%BB%BA/" title="Kafka-搭建">Kafka-搭建</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/zookeeper/zookeeper%E6%A1%88%E4%BE%8B/" title="zookeeper案例">zookeeper案例</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" title="分类于 微服务">微服务</a></div><span><a href="/java/SpringCloud/SpringCloud-SpringCloud%E4%BD%93%E7%B3%BB/" title="SpringCloud-SpringCloud体系">SpringCloud-SpringCloud体系</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Iterator%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/" title="Iterator迭代器模式">Iterator迭代器模式</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Decorator%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/" title="Decorator装饰器模式">Decorator装饰器模式</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/java/shiro/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/" title="单点登录">单点登录</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">fanfanfan</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">1.4m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">20:37</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"java/io/磁盘IO与网络IO/",favicon:{show:"书院十四先生",hide:"书院十四先生"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js,npm/echarts@5.2.2/dist/echarts.min.js"></script><script src="/js/app.js?v=0.2.5"></script><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?163b363f1983d176d657221fc8e1631b";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></body></html><!-- rebuild by hrmmi -->