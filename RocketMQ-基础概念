<!-- build time:Sat Dec 25 2021 14:57:55 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN,en,default"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="书院十四先生" href="https://baiyezi.vip/rss.xml"><link rel="alternate" type="application/atom+xml" title="书院十四先生" href="https://baiyezi.vip/atom.xml"><link rel="alternate" type="application/json" title="书院十四先生" href="https://baiyezi.vip/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Java,消息中间件,RocketMQ"><link rel="canonical" href="https://baiyezi.vip/RocketMQ-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><title>RocketMQ-基础概念 - Java | 书院十四先生</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">RocketMQ-基础概念</h1><div class="meta"><span class="item" title="创建时间：2021-08-10 18:24:58"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-08-10T18:24:58+08:00">2021-08-10</time></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">书院十四先生</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105418.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105419.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105420.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105421.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105423.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105008.png"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/java/" itemprop="item" rel="index" title="分类于 Java"><span itemprop="name">Java</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://baiyezi.vip/RocketMQ-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="fanfanfan"><meta itemprop="description" content=", 花有重开日，人无再少年"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="书院十四先生"></span><div class="body md" itemprop="articleBody"><p>主流的 MQ 有很多，比如 ActiveMQ、RabbitMQ、RocketMQ、Kafka、ZeroMQ 等。</p><p>之前阿里巴巴也是使用 ActiveMQ，随着业务发展，ActiveMQ IO 模块出现瓶颈，后来阿里巴巴 通过一系列优化但是还是不能很好的解决，之后阿里巴巴把注意力放到了主流消息中间件 kafka 上面，但是 kafka 并不能满足他们的要求，尤其是低延迟和高可靠性。</p><p>所以 RocketMQ 是站在巨人的肩膀上（kafka）MetaQ 的内核，又对其进行了优化让其更满足互联网公司的特点。它是纯 Java 开发，具有高吞吐量、高可用性、适合大规模分布式系统应用的特点。 RocketMQ 目前在阿里集团被广泛应用于交易、充值、流计算、消息推送、日志流式处理、binglog 分发等场景。</p><h2 id="windows上安装"><a class="anchor" href="#windows上安装">#</a> Windows 上安装</h2><p><span class="exturl" data-url="aHR0cHM6Ly9yb2NrZXRtcS5hcGFjaGUub3JnL2RvY3MvcXVpY2stc3RhcnQv">官网</span></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9keW4vY2xvc2VyLmNnaT9wYXRoPXJvY2tldG1xLzQuOC4wL3JvY2tldG1xLWFsbC00LjguMC1iaW4tcmVsZWFzZS56aXA=">下载地址</span></p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FwYWNoZS9yb2NrZXRtcS90cmVlL21hc3Rlci9kb2NzL2Nu">中文文档</span></p><p>配置环境变量</p><pre><code class="language-cmd">ROCKETMQ_HOME=&quot;D:\rocketmq&quot;
%ROCKETMQ_HOME%\bin
NAMESRV_ADDR=&quot;localhost:9876&quot;
</code></pre><p>测试，以管理员身份打开 cmd</p><p>开启 rocketmq 服务</p><pre><code class="language-cmd">C:\WINDOWS\system32&gt;mqnamesrv
Java HotSpot(TM) 64-Bit Server VM warning: Using the DefNew young collector with the CMS collector is deprecated and will likely be removed in a future release
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
The Name Server boot success. serializeType=JSON
</code></pre><p>开启 broker</p><pre><code class="language-cmd">C:\WINDOWS\system32&gt;mqbroker -n localhost:9876 autoCreateTopicEnable=true
The broker[Fan, 172.20.10.3:10911] boot success. serializeType=JSON and name server is localhost:9876
</code></pre><p>发送消息</p><pre><code class="language-cmd">C:\WINDOWS\system32&gt;tools org.apache.rocketmq.example.quickstart.Producer
14:20:11.211 [main] DEBUG i.n.u.i.l.InternalLoggerFactory - Using SLF4J as the default logging framework
RocketMQLog:WARN No appenders could be found for logger (io.netty.util.internal.PlatformDependent0).
RocketMQLog:WARN Please initialize the logger system properly.
SendResult [sendStatus=SEND_OK, msgId=7F00000134C40D7163619D926ADF0000, offsetMsgId=AC140A0300002A9F0000000000000000, messageQueue=MessageQueue [topic=TopicTest, brokerName=Fan, queueId=2], queueOffset=0]
</code></pre><p>接收消息</p><pre><code class="language-cmd">C:\WINDOWS\system32&gt;tools org.apache.rocketmq.example.quickstart.Consumer
14:20:11.292 [main] DEBUG i.n.u.i.l.InternalLoggerFactory - Using SLF4J as the default logging framework
Consumer Started.
ConsumeMessageThread_14 Receive New Messages: [MessageExt [brokerName=Fan, queueId=2, storeSize=202, queueOffset=5, sysFlag=0, bornTimestamp=1622442018931, bornHost=/172.20.10.3:10521, storeTimestamp=1622442018939, storeHost=/172.20.10.3:10911, msgId=AC140A0300002A9F0000000000000FBE, commitLogOffset=4030, bodyCRC=548040149, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message&#123;topic='TopicTest', flag=0, properties=&#123;MIN_OFFSET=0, MAX_OFFSET=250, CONSUME_START_TIME=1622442057391, UNIQ_KEY=7F00000134C40D7163619D926C730014, CLUSTER=DefaultCluster, WAIT=true, TAGS=TagA&#125;, body=[72, 101, 108, 108, 111, 32, 82, 111, 99, 107, 101, 116, 77, 81, 32, 50, 48], transactionId='null'&#125;]]
</code></pre><h3 id="命令帮助"><a class="anchor" href="#命令帮助">#</a> 命令帮助</h3><pre><code class="language-cmd">C:\WINDOWS\system32&gt;mqadmin
The most commonly used mqadmin commands are:
   updateTopic          Update or create topic
   deleteTopic          Delete topic from broker and NameServer.
   updateSubGroup       Update or create subscription group
   deleteSubGroup       Delete subscription group from broker.
   updateBrokerConfig   Update broker's config
   updateTopicPerm      Update topic perm
   topicRoute           Examine topic route info
   topicStatus          Examine topic Status info
   topicClusterList     get cluster info for topic
   brokerStatus         Fetch broker runtime status data
   queryMsgById         Query Message by Id
   queryMsgByKey        Query Message by Key
   queryMsgByUniqueKey  Query Message by Unique key
   queryMsgByOffset     Query Message by offset
   QueryMsgTraceById    query a message trace
   printMsg             Print Message Detail
   printMsgByQueue      Print Message Detail
   sendMsgStatus        send msg to broker.
   brokerConsumeStats   Fetch broker consume stats data
   producerConnection   Query producer's socket connection and client version
   consumerConnection   Query consumer's socket connection, client version and subscription
   consumerProgress     Query consumers's progress, speed
   consumerStatus       Query consumer's internal data structure
   cloneGroupOffset     clone offset from other group.
   clusterList          List all of clusters
   topicList            Fetch all topic list from name server
   updateKvConfig       Create or update KV config.
   deleteKvConfig       Delete KV config.
   wipeWritePerm        Wipe write perm of broker in all name server
   resetOffsetByTime    Reset consumer offset by timestamp(without client restart).
   updateOrderConf      Create or update or delete order conf
   cleanExpiredCQ       Clean expired ConsumeQueue on broker.
   cleanUnusedTopic     Clean unused topic on broker.
   startMonitoring      Start Monitoring
   statsAll             Topic and Consumer tps stats
   allocateMQ           Allocate MQ
   checkMsgSendRT       check message send response time
   clusterRT            List All clusters Message Send RT
   getNamesrvConfig     Get configs of name server.
   updateNamesrvConfig  Update configs of name server.
   getBrokerConfig      Get broker config by cluster or special broker!
   queryCq              Query cq command.
   sendMessage          Send a message
   consumeMessage       Consume message
   updateAclConfig      Update acl config yaml file in broker
   deleteAccessConfig   Delete Acl Config Account in broker
   clusterAclConfigVersion List all of acl config version information in cluster
   updateGlobalWhiteAddr Update global white address for acl Config File in broker
   getAccessConfigSubCommand List all of acl config information in cluster

See 'mqadmin help &lt;command&gt;' for more information on a specific command.

# 查看具体命令使用方式
C:\WINDOWS\system32&gt;mqadmin help topicList
usage: mqadmin topicList [-c] [-h] [-n &lt;arg&gt;]
 -c,--clusterModel        clusterModel
 -h,--help                Print help
 -n,--namesrvAddr &lt;arg&gt;   Name server address list, eg: 192.168.0.1:9876;192.168.0.2:9876
</code></pre><h2 id="linux上安装"><a class="anchor" href="#linux上安装">#</a> Linux 上安装</h2><h4 id="1下载源码并上传到linux"><a class="anchor" href="#1下载源码并上传到linux">#</a> 1. 下载源码并上传到 Linux</h4><p><a target="_blank" rel="noopener" href="https://mirrors.bfsu.edu.cn/apache/rocketmq/4.8.0/rocketmq-all-4.8.0-source-release.zip"><strong>https://mirrors.bfsu.edu.cn/apache/rocketmq/4.8.0/rocketmq-all-4.8.0-source-release.zip</strong></a></p><h4 id="2在linux上安装maven"><a class="anchor" href="#2在linux上安装maven">#</a> 2. 在 Linux 上安装 Maven</h4><p><strong>下载 Maven</strong></p><pre><code>wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz
</code></pre><p><strong>添加阿里云镜像</strong></p><p>修改 <code>maven/conf</code> 目录下的 <code>settings.xml</code></p><p>在 <code>mirrors</code> 节点下添加</p><pre><code>&lt;mirror&gt; 
    &lt;id&gt;aliyun-maven&lt;/id&gt; 
    &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; 
    &lt;name&gt;aliyun maven&lt;/name&gt; 
    &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt; 
&lt;/mirror&gt;
</code></pre><p><strong>配置 maven 环境变量</strong></p><p>修改 <code>/etc/profile</code></p><pre><code>export M2_HOME=/usr/local/maven
export PATH=$PATH:$M2_HOME/bin
</code></pre><p><strong>配置 java 环境变量</strong></p><pre><code>export JAVA_HOME=&quot;/usr/java/jdk1.8.0_181-amd64&quot;
export CLASS_PATH=&quot;$JAVA_HOME/lib&quot;
export PATH=&quot;.$PATH:$JAVA_HOME/bin&quot;
</code></pre><p>环境变量修完执行 <code>source /etc/profile</code> 立即生效</p><p><strong>进入 rocketmq 主目录编译项目</strong></p><pre><code>mvn -Prelease-all -DskipTests clean install -U
</code></pre><h4 id="3启动nameserver"><a class="anchor" href="#3启动nameserver">#</a> 3. 启动 nameserver</h4><p><code>bin</code> 目录下执行</p><pre><code>./mqnamesrv
</code></pre><p>正常提示</p><p><img data-src="RocketMQ%EF%BC%88%E4%B8%80%EF%BC%89.assets/image-20200218150050167.png" alt="image-20200218150050167"></p><h4 id="4启动broker"><a class="anchor" href="#4启动broker">#</a> 4. 启动 Broker</h4><pre><code>./mqbroker -n localhost:9876
</code></pre><p>正常提示</p><p><img data-src="RocketMQ%EF%BC%88%E4%B8%80%EF%BC%89.assets/image-20200218150114714.png" alt="image-20200218150114714"></p><h4 id="5测试消息发送"><a class="anchor" href="#5测试消息发送">#</a> 5. 测试消息发送</h4><p>使用 <code>tool.sh</code> 脚本执行测试程序</p><p>在 <code>bin</code> 目录下执行</p><pre><code>./tools.sh org.apache.rocketmq.example.quickstart.Producer
</code></pre><p>提示如下表示成功</p><p><img data-src="RocketMQ%EF%BC%88%E4%B8%80%EF%BC%89.assets/image-20200218145049603.png" alt="image-20200218145049603"></p><p><strong>6. 接受消息</strong></p><pre><code>./tools.sh org.apache.rocketmq.example.quickstart.Consumer
</code></pre><h3 id="控制台rocketmq-console编译安装"><a class="anchor" href="#控制台rocketmq-console编译安装">#</a> 控制台 rocketmq-console 编译安装</h3><h4 id="下载"><a class="anchor" href="#下载">#</a> 下载</h4><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FwYWNoZS9yb2NrZXRtcS1leHRlcm5hbHM=">https://github.com/apache/rocketmq-externals</span></p><p><strong>中文指南</strong></p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FwYWNoZS9yb2NrZXRtcS1leHRlcm5hbHMvYmxvYi9tYXN0ZXIvcm9ja2V0bXEtY29uc29sZS9kb2MvMV8wXzAvVXNlckd1aWRlX0NOLm1k">https://github.com/apache/rocketmq-externals/blob/master/rocketmq-console/doc/1_0_0/UserGuide_CN.md</span></p><h4 id="上传到服务器并解压缩"><a class="anchor" href="#上传到服务器并解压缩">#</a> 上传到服务器并解压缩</h4><h4 id="编译"><a class="anchor" href="#编译">#</a> 编译</h4><p>进入 <code>rocketmq-console</code> 目录</p><p>执行编译</p><pre><code>mvn clean package -Dmaven.test.skip=true
</code></pre><h4 id="启动"><a class="anchor" href="#启动">#</a> 启动</h4><p>编译成功后在 <code>rocketmq-console/target</code> 目录下执行 <code>rocketmq-console-ng-1.0.1.jar</code></p><p>启动时，直接动态添加 <code>nameserver</code> 地址或编辑 <code>application.properties</code> 添加属性</p><pre><code>java -jar rocketmq-console-ng-1.0.1.jar --rocketmq.config.namesrvAddr=127.0.0.1:9876

</code></pre><p>启动成功后访问 http://localhost:8080</p><p><img data-src="RocketMQ%EF%BC%88%E4%B8%80%EF%BC%89.assets/image-20200218155021928.png" alt="image-20200218155021928"></p><h4 id="pomxml依赖"><a class="anchor" href="#pomxml依赖">#</a> pom.xml 依赖</h4><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.rocketmq<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>rocketmq-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.6.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h3 id="安装启动常见错误"><a class="anchor" href="#安装启动常见错误">#</a> 安装启动常见错误</h3><h4 id="编译时包无法在mirror上找到-提示502错误"><a class="anchor" href="#编译时包无法在mirror上找到-提示502错误">#</a> 编译时包无法在 mirror 上找到 提示 502 错误</h4><p>** 原因：** 网络不好或 maven 仓库服务器出错</p><p>重试即可，或者欢迎镜像仓库</p><h4 id="发送失败提示connect-to-null-failed"><a class="anchor" href="#发送失败提示connect-to-null-failed">#</a> <strong>发送失败提示 connect to null failed</strong></h4><pre><code> ./tools.sh org.apache.rocketmq.example.quickstart.Producer
22:49:02.470 [main] DEBUG i.n.u.i.l.InternalLoggerFactory - Using SLF4J as the default logging framework
RocketMQLog:WARN No appenders could be found for logger (io.netty.util.internal.PlatformDependent0).
RocketMQLog:WARN Please initialize the logger system properly.
java.lang.IllegalStateException: org.apache.rocketmq.remoting.exception.RemotingConnectException: connect to
 null failed
</code></pre><p>** 原因：** 不知道 <code>nameserver</code> 在哪儿</p><p>在 <code>tools</code> 脚本中添加</p><pre><code>export NAMESRV_ADDR=localhost:9876
</code></pre><h4 id="启动broker失败-cannot-allocate-memory"><a class="anchor" href="#启动broker失败-cannot-allocate-memory">#</a> 启动 broker 失败 Cannot allocate memory</h4><p>** 原因：**jvm 启动初始化内存分配大于物理内存</p><pre><code>[root@node-113b bin]# ./mqbroker -n localhost:9876
Java HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(0x00000005c0000000, 8589934592, 0) failed
; error='Cannot allocate memory' (errno=12)#
# There is insufficient memory for the Java Runtime Environment to continue.
# Native memory allocation (mmap) failed to map 8589934592 bytes for committing reserved memory.
# An error report file with more information is saved as:
# /usr/local/rocketmq/bin/hs_err_pid1997.log

</code></pre><p>修改启动脚本中的 jvm 参数</p><p><code>runbroker.sh</code> broker</p><p><code>runserver.sh</code> nameserver</p><p>默认数值给的都很大，改小即可</p><pre><code>JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=100m&quot;
</code></pre><h4 id="启动broker成功但提示failed-to-obtain-the-host-name"><a class="anchor" href="#启动broker成功但提示failed-to-obtain-the-host-name">#</a> 启动 broker 成功但提示：Failed to obtain the host name</h4><pre><code>[root@node-113b bin]# ./mqbroker -n localhost:9876
22:30:42.307 [main] ERROR RocketmqCommon - Failed to obtain the host name
java.net.UnknownHostException: node-113b: node-113b: No address associated with hostname
	at java.net.InetAddress.getLocalHost(InetAddress.java:1505) ~[na:1.8.0_181]
	at org.apache.rocketmq.common.BrokerConfig.localHostName(BrokerConfig.java:189) [rocketmq-common-4.6
.1.jar:4.6.1]	at org.apache.rocketmq.common.BrokerConfig.&lt;init&gt;(BrokerConfig.java:38) [rocketmq-common-4.6.1.jar:4
.6.1]	at org.apache.rocketmq.broker.BrokerStartup.createBrokerController(BrokerStartup.java:110) [rocketmq
-broker-4.6.1.jar:4.6.1]	at org.apache.rocketmq.broker.BrokerStartup.main(BrokerStartup.java:58) [rocketmq-broker-4.6.1.jar:4
.6.1]Caused by: java.net.UnknownHostException: node-113b: No address associated with hostname
	at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) ~[na:1.8.0_181]
	at java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:928) ~[na:1.8.0_181]
	at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1323) ~[na:1.8.0_181]
	at java.net.InetAddress.getLocalHost(InetAddress.java:1500) ~[na:1.8.0_181]
	... 4 common frames omitted
The broker[DEFAULT_BROKER, 192.168.150.213:10911] boot success. serializeType=JSON and name server is localh
ost:9876
</code></pre><p>** 原因：** 无法解析当前的主机名</p><p>hosts 里添加映射即可</p><pre><code>192.168.150.213 node-113b
</code></pre><h4 id="linux日期校准"><a class="anchor" href="#linux日期校准">#</a> linux 日期校准</h4><p><strong>安装 ntpdate</strong></p><pre><code>yum install ntpdate

ntpdate ntp1.aliyun.com
</code></pre><h2 id="rocketmq-功能-大纲"><a class="anchor" href="#rocketmq-功能-大纲">#</a> RocketMQ 功能 大纲</h2><h3 id="rocketmq介绍"><a class="anchor" href="#rocketmq介绍">#</a> RocketMQ 介绍</h3><ul><li>消息队列应用场景</li><li>rocketmq 中的角色<ul><li>nameserver</li></ul></li><li>官网解读</li></ul><h3 id="消息发送"><a class="anchor" href="#消息发送">#</a> 消息发送</h3><ul><li><p>同步发送</p></li><li><p>异步发送</p></li><li><p>单向发送</p></li><li><p>消息批量发送</p></li><li><p>消息结构</p></li><li><p>消息发送流程</p></li></ul><h3 id="消息存储"><a class="anchor" href="#消息存储">#</a> 消息存储</h3><ul><li>存储方式</li><li>发送消息时存储流程</li><li>存储文件与内存映射</li><li>刷盘机制</li><li>文件恢复与过期删除机制</li><li>索引</li></ul><h3 id="消息消费"><a class="anchor" href="#消息消费">#</a> 消息消费</h3><ul><li>消息订阅</li><li>消息拉取和推送</li><li>消息处理队列</li><li>顺序消费</li><li>定时消息机制</li><li>消息过滤 TAG 与 sql92</li><li>FilterServer 过滤机制</li><li>并发消息消费</li><li>消费负载与算法</li><li>消费者动态添加</li><li>消息消费过程</li><li>ACK</li><li>消费进度与 offset</li></ul><h3 id="rocketmq集群-ha"><a class="anchor" href="#rocketmq集群-ha">#</a> Rocketmq 集群 HA</h3><ul><li>集群搭建</li><li>主从同步复制原理</li><li>读写分离机制</li></ul><h3 id="整合"><a class="anchor" href="#整合">#</a> 整合</h3><ul><li>使用 spring</li><li>SpringCloud 整合</li></ul><h3 id="监控与运维"><a class="anchor" href="#监控与运维">#</a> 监控与运维</h3><ul><li>rocketmq-console 监控平台</li><li>命令行运维 MQAdmin</li><li>自定义日志</li></ul><h2 id="消息队列介绍"><a class="anchor" href="#消息队列介绍">#</a> 消息队列介绍</h2><p>消息队列是《数据结构》中先进先出的一种数据结构，在当前的架构中，作为中间件提供服务。</p><h3 id="消息中间件功能"><a class="anchor" href="#消息中间件功能">#</a> 消息中间件功能</h3><h4 id="应用解耦"><a class="anchor" href="#应用解耦">#</a> 应用解耦</h4><p>AB 应用不在互相依赖</p><h4 id="流量削峰"><a class="anchor" href="#流量削峰">#</a> 流量削峰</h4><p>流量达到高峰的时候，通常使用限流算法来控制流量涌入系统，避免系统被击瘫，但是这种方式损失了一部分请求</p><p>此时可以使用消息中间件来缓冲大量的请求，匀速消费，当消息队列中堆积消息过多时，我们可以动态上线增加消费端，来保证不丢失重要请求。</p><h4 id="大数据处理"><a class="anchor" href="#大数据处理">#</a> 大数据处理</h4><p>消息中间件可以把各个模块中产生的管理员操作日志、用户行为、系统状态等数据文件作为消息收集到主题中</p><p>数据使用方可以订阅自己感兴趣的数据内容互不影响，进行消费</p><h4 id="异构系统"><a class="anchor" href="#异构系统">#</a> 异构系统</h4><p>跨语言</p><h3 id="rocketmq-角色"><a class="anchor" href="#rocketmq-角色">#</a> RocketMQ 角色</h3><p><img data-src="RocketMQ%EF%BC%88%E4%B8%80%EF%BC%89.assets/webp" alt="img"></p><h4 id="broker"><a class="anchor" href="#broker">#</a> broker</h4><ul><li>Broker 面向 producer 和 consumer 接受和发送消息</li><li>向 nameserver 提交自己的信息</li><li>是消息中间件的消息存储、转发服务器。</li><li>每个 Broker 节点，在启动时，都会遍历 NameServer 列表，与每个 NameServer 建立长连接，注册自己的信息，之后定时上报。</li></ul><h5 id="broker集群"><a class="anchor" href="#broker集群">#</a> broker 集群</h5><ul><li>Broker 高可用，可以配成 Master/Slave 结构，Master 可写可读，Slave 只可以读，Master 将写入的数据同步给 Slave。<ul><li>一个 Master 可以对应多个 Slave，但是一个 Slave 只能对应一个 Master</li><li>Master 与 Slave 的对应关系通过指定相同的 BrokerName，不同的 BrokerId 来定义 BrokerId 为 0 表示 Master，非 0 表示 Slave</li></ul></li><li>Master 多机负载，可以部署多个 broker<ul><li>每个 Broker 与 nameserver 集群中的所有节点建立长连接，定时注册 Topic 信息到所有 nameserver。</li></ul></li></ul><h4 id="producer"><a class="anchor" href="#producer">#</a> producer</h4><ul><li>消息的生产者</li><li>通过集群中的其中一个节点（随机选择）建立长连接，获得 Topic 的路由信息，包括 Topic 下面有哪些 Queue，这些 Queue 分布在哪些 Broker 上等</li><li>接下来向提供 Topic 服务的 Master 建立长连接，且定时向 Master 发送心跳</li></ul><h4 id="consumer"><a class="anchor" href="#consumer">#</a> consumer</h4><p>消息的消费者，通过 NameServer 集群获得 Topic 的路由信息，连接到对应的 Broker 上消费消息。</p><p>注意，由于 Master 和 Slave 都可以读取消息，因此 Consumer 会与 Master 和 Slave 都建立连接。</p><h4 id="nameserver"><a class="anchor" href="#nameserver">#</a> nameserver</h4><p>底层由 netty 实现，提供了路由管理、服务注册、服务发现的功能，是一个无状态节点</p><p><strong>nameserver 是服务发现者</strong>，集群中各个角色（producer、broker、consumer 等）都需要定时想 nameserver 上报自己的状态，以便互相发现彼此，超时不上报的话，nameserver 会把它从列表中剔除</p><p><strong>nameserver 可以部署多个</strong>，当多个 nameserver 存在的时候，其他角色同时向他们上报信息，以保证高可用，</p><p><strong>NameServer 集群间互不通信</strong>，没有主备的概念</p><p><strong>nameserver 内存式存储</strong>，nameserver 中的 broker、topic 等信息默认不会持久化</p><p><strong>为什么不用 zookeeper？</strong>：rocketmq 希望为了提高性能，CAP 定理，客户端负载均衡</p><h3 id="对比jsm中的topic和queue"><a class="anchor" href="#对比jsm中的topic和queue">#</a> 对比 JSM 中的 Topic 和 Queue</h3><p>Topic 是一个逻辑上的概念，实际上 Message 是在每个 Broker 上以 Queue 的形式记录。</p><p><img data-src="RocketMQ%EF%BC%88%E4%B8%80%EF%BC%89.assets/1090617-20190626173042073-147043337.jpg" alt="img"></p><p>对应到 JMS 中的 topic 实现是由客户端来完成的</p><pre><code>        consumer.setMessageModel(MessageModel.BROADCASTING);
</code></pre><div class="tags"><a href="/tags/Java/" rel="tag"><i class="ic i-tag"></i> Java</a> <a href="/tags/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag"><i class="ic i-tag"></i> 消息中间件</a> <a href="/tags/RocketMQ/" rel="tag"><i class="ic i-tag"></i> RocketMQ</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2021-12-24 15:07:19" itemprop="dateModified" datetime="2021-12-24T15:07:19+08:00">2021-12-24</time> </span><span id="/RocketMQ-基础概念" class="item leancloud_visitors" data-flag-title="RocketMQ-基础概念" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="fanfanfan 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="fanfanfan 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="fanfanfan PayPal"><p>PayPal</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>fanfanfan <i class="ic i-at"><em>@</em></i>书院十四先生</li><li class="link"><strong>本文链接：</strong> <a href="https://baiyezi.vip/RocketMQ-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5" title="RocketMQ-基础概念">https://baiyezi.vip/RocketMQ-基础概念</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/HTTPS" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;bfanfanfan&#x2F;img&#x2F;raw&#x2F;master&#x2F;guzhuang&#x2F;20211225105421.jpg" title="HTTPS"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Java</span><h3>HTTPS</h3></a></div><div class="item right"><a href="/RocketMQ-%E6%B6%88%E6%81%AF%E3%80%81%E4%BA%8B%E5%8A%A1" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;bfanfanfan&#x2F;img&#x2F;raw&#x2F;master&#x2F;guzhuang&#x2F;20211225105418.jpg" title="RocketMQ-消息、事务"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> Java</span><h3>RocketMQ-消息、事务</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#windows%E4%B8%8A%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">Windows 上安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9"><span class="toc-number">1.1.</span> <span class="toc-text">命令帮助</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#linux%E4%B8%8A%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">Linux 上安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E4%B8%8B%E8%BD%BD%E6%BA%90%E7%A0%81%E5%B9%B6%E4%B8%8A%E4%BC%A0%E5%88%B0linux"><span class="toc-number">2.0.1.</span> <span class="toc-text">1. 下载源码并上传到 Linux</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E5%9C%A8linux%E4%B8%8A%E5%AE%89%E8%A3%85maven"><span class="toc-number">2.0.2.</span> <span class="toc-text">2. 在 Linux 上安装 Maven</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E5%90%AF%E5%8A%A8nameserver"><span class="toc-number">2.0.3.</span> <span class="toc-text">3. 启动 nameserver</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E5%90%AF%E5%8A%A8broker"><span class="toc-number">2.0.4.</span> <span class="toc-text">4. 启动 Broker</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E6%B5%8B%E8%AF%95%E6%B6%88%E6%81%AF%E5%8F%91%E9%80%81"><span class="toc-number">2.0.5.</span> <span class="toc-text">5. 测试消息发送</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%8F%B0rocketmq-console%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="toc-number">2.1.</span> <span class="toc-text">控制台 rocketmq-console 编译安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD"><span class="toc-number">2.1.1.</span> <span class="toc-text">下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B9%B6%E8%A7%A3%E5%8E%8B%E7%BC%A9"><span class="toc-number">2.1.2.</span> <span class="toc-text">上传到服务器并解压缩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%AF%91"><span class="toc-number">2.1.3.</span> <span class="toc-text">编译</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8"><span class="toc-number">2.1.4.</span> <span class="toc-text">启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pomxml%E4%BE%9D%E8%B5%96"><span class="toc-number">2.1.5.</span> <span class="toc-text">pom.xml 依赖</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%90%AF%E5%8A%A8%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF"><span class="toc-number">2.2.</span> <span class="toc-text">安装启动常见错误</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%97%B6%E5%8C%85%E6%97%A0%E6%B3%95%E5%9C%A8mirror%E4%B8%8A%E6%89%BE%E5%88%B0-%E6%8F%90%E7%A4%BA502%E9%94%99%E8%AF%AF"><span class="toc-number">2.2.1.</span> <span class="toc-text">编译时包无法在 mirror 上找到 提示 502 错误</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E5%A4%B1%E8%B4%A5%E6%8F%90%E7%A4%BAconnect-to-null-failed"><span class="toc-number">2.2.2.</span> <span class="toc-text">发送失败提示 connect to null failed</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8broker%E5%A4%B1%E8%B4%A5-cannot-allocate-memory"><span class="toc-number">2.2.3.</span> <span class="toc-text">启动 broker 失败 Cannot allocate memory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8broker%E6%88%90%E5%8A%9F%E4%BD%86%E6%8F%90%E7%A4%BAfailed-to-obtain-the-host-name"><span class="toc-number">2.2.4.</span> <span class="toc-text">启动 broker 成功但提示：Failed to obtain the host name</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#linux%E6%97%A5%E6%9C%9F%E6%A0%A1%E5%87%86"><span class="toc-number">2.2.5.</span> <span class="toc-text">linux 日期校准</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#rocketmq-%E5%8A%9F%E8%83%BD-%E5%A4%A7%E7%BA%B2"><span class="toc-number">3.</span> <span class="toc-text">RocketMQ 功能 大纲</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#rocketmq%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.1.</span> <span class="toc-text">RocketMQ 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E5%8F%91%E9%80%81"><span class="toc-number">3.2.</span> <span class="toc-text">消息发送</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E5%AD%98%E5%82%A8"><span class="toc-number">3.3.</span> <span class="toc-text">消息存储</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E6%B6%88%E8%B4%B9"><span class="toc-number">3.4.</span> <span class="toc-text">消息消费</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rocketmq%E9%9B%86%E7%BE%A4-ha"><span class="toc-number">3.5.</span> <span class="toc-text">Rocketmq 集群 HA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E5%90%88"><span class="toc-number">3.6.</span> <span class="toc-text">整合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%91%E6%8E%A7%E4%B8%8E%E8%BF%90%E7%BB%B4"><span class="toc-number">3.7.</span> <span class="toc-text">监控与运维</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BB%8B%E7%BB%8D"><span class="toc-number">4.</span> <span class="toc-text">消息队列介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%8A%9F%E8%83%BD"><span class="toc-number">4.1.</span> <span class="toc-text">消息中间件功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E8%A7%A3%E8%80%A6"><span class="toc-number">4.1.1.</span> <span class="toc-text">应用解耦</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E5%89%8A%E5%B3%B0"><span class="toc-number">4.1.2.</span> <span class="toc-text">流量削峰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86"><span class="toc-number">4.1.3.</span> <span class="toc-text">大数据处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E6%9E%84%E7%B3%BB%E7%BB%9F"><span class="toc-number">4.1.4.</span> <span class="toc-text">异构系统</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rocketmq-%E8%A7%92%E8%89%B2"><span class="toc-number">4.2.</span> <span class="toc-text">RocketMQ 角色</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#broker"><span class="toc-number">4.2.1.</span> <span class="toc-text">broker</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#broker%E9%9B%86%E7%BE%A4"><span class="toc-number">4.2.1.1.</span> <span class="toc-text">broker 集群</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#producer"><span class="toc-number">4.2.2.</span> <span class="toc-text">producer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#consumer"><span class="toc-number">4.2.3.</span> <span class="toc-text">consumer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nameserver"><span class="toc-number">4.2.4.</span> <span class="toc-text">nameserver</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94jsm%E4%B8%AD%E7%9A%84topic%E5%92%8Cqueue"><span class="toc-number">4.3.</span> <span class="toc-text">对比 JSM 中的 Topic 和 Queue</span></a></li></ol></li></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/Linux%E4%B8%8B%E5%AE%89%E8%A3%85MySQL" rel="bookmark" title="Linux下安装MySQL">Linux下安装MySQL</a></li><li><a href="/MySQL%E5%9F%BA%E7%A1%80" rel="bookmark" title="MySQL基础">MySQL基础</a></li><li><a href="/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="IOC配置方式（一）">IOC配置方式（一）</a></li><li><a href="/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%BA%8C%EF%BC%89" rel="bookmark" title="IOC配置方式（二）">IOC配置方式（二）</a></li><li><a href="/IOC%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F" rel="bookmark" title="IOC注解方式">IOC注解方式</a></li><li><a href="/AOP" rel="bookmark" title="AOP">AOP</a></li><li><a href="/SpringBoot%E5%85%A5%E9%97%A8" rel="bookmark" title="SpringBoot入门">SpringBoot入门</a></li><li><a href="/SpringBoot-Web%E5%BC%80%E5%8F%91" rel="bookmark" title="SpringBoot-Web开发">SpringBoot-Web开发</a></li><li><a href="/SpringBoot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E5%8E%9F%E7%90%86" rel="bookmark" title="SpringBoot自动装配原理">SpringBoot自动装配原理</a></li><li><a href="/zookeeper%E6%90%AD%E5%BB%BA%E5%8F%8A%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" rel="bookmark" title="zookeeper搭建及基本概念">zookeeper搭建及基本概念</a></li><li><a href="/zookeeper%E5%8E%9F%E7%90%86" rel="bookmark" title="zookeeper原理">zookeeper原理</a></li><li><a href="/zookeeper%E6%A1%88%E4%BE%8B" rel="bookmark" title="zookeeper案例">zookeeper案例</a></li><li><a href="/MySQL%E8%B0%83%E4%BC%98%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="MySQL调优（一）">MySQL调优（一）</a></li><li><a href="/redis%E5%AE%89%E8%A3%85%E5%8F%8ANIO%E5%8E%9F%E7%90%86" rel="bookmark" title="redis安装及NIO原理">redis安装及NIO原理</a></li><li><a href="/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="SpringMVC入门（一）">SpringMVC入门（一）</a></li><li><a href="/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89" rel="bookmark" title="SpringMVC入门（二）">SpringMVC入门（二）</a></li><li><a href="/SpringMVC-REST%E9%A3%8E%E6%A0%BC" rel="bookmark" title="SpringMVC-REST风格">SpringMVC-REST风格</a></li><li><a href="/SpringMVC%E8%BF%9B%E9%98%B6" rel="bookmark" title="SpringMVC进阶">SpringMVC进阶</a></li><li><a href="/SpringMVC%E6%BA%90%E7%A0%81%E6%80%BB%E7%BB%93" rel="bookmark" title="SpringMVC源码总结">SpringMVC源码总结</a></li><li><a href="/shiro%E5%85%A5%E9%97%A8" rel="bookmark" title="shiro入门">shiro入门</a></li><li><a href="/shiro%E6%95%B4%E5%90%88SpringBoot" rel="bookmark" title="shiro整合SpringBoot">shiro整合SpringBoot</a></li><li><a href="/shiro%E7%9A%84session%E7%AE%A1%E7%90%86" rel="bookmark" title="shiro的session管理">shiro的session管理</a></li><li><a href="/shiro%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E7%99%BB%E5%BD%95" rel="bookmark" title="shiro的缓存机制与分布式登录">shiro的缓存机制与分布式登录</a></li><li><a href="/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95" rel="bookmark" title="单点登录">单点登录</a></li><li><a href="/%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" rel="bookmark" title="线程基础知识">线程基础知识</a></li><li><a href="/%E5%AE%B9%E5%99%A8%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%B1%A0" rel="bookmark" title="容器与线程池">容器与线程池</a></li><li><a href="/Win10%E5%AE%89%E8%A3%85docker" rel="bookmark" title="Win10安装docker">Win10安装docker</a></li><li><a href="/Win10%E5%AE%89%E8%A3%85docker" rel="bookmark" title="Win10安装docker">Win10安装docker</a></li><li><a href="/JMH" rel="bookmark" title="JMH">JMH</a></li><li><a href="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B" rel="bookmark" title="并发编程">并发编程</a></li><li><a href="/java-%E6%97%A5%E5%BF%97%E4%BD%93%E7%B3%BB" rel="bookmark" title="java-日志体系">java-日志体系</a></li><li><a href="/redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" rel="bookmark" title="redis的数据类型">redis的数据类型</a></li><li><a href="/redis%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8" rel="bookmark" title="redis进阶使用">redis进阶使用</a></li><li><a href="/redis%E7%9A%84%E9%9B%86%E7%BE%A4" rel="bookmark" title="redis的集群">redis的集群</a></li><li><a href="/redis%E5%9C%A8%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8" rel="bookmark" title="redis在开发中的简单使用">redis在开发中的简单使用</a></li><li><a href="/ChainOfResponsibility%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F" rel="bookmark" title="ChainOfResponsibility责任链模式">ChainOfResponsibility责任链模式</a></li><li><a href="/Composite%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Composite组合模式">Composite组合模式</a></li><li><a href="/Decorator%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Decorator装饰器模式">Decorator装饰器模式</a></li><li><a href="/Factory%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Factory工厂模式">Factory工厂模式</a></li><li><a href="/Facade%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Facade门面模式">Facade门面模式</a></li><li><a href="/Iterator%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Iterator迭代器模式">Iterator迭代器模式</a></li><li><a href="/Flyweight%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Flyweight享元模式">Flyweight享元模式</a></li><li><a href="/Mediator%E8%B0%83%E5%81%9C%E8%80%85%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Mediator调停者模式">Mediator调停者模式</a></li><li><a href="/Singleton%E5%8D%95%E4%BE%8B" rel="bookmark" title="Singleton单例">Singleton单例</a></li><li><a href="/Observer%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Observer观察者模式">Observer观察者模式</a></li><li><a href="/Proxy%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Proxy代理模式">Proxy代理模式</a></li><li><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BB%A5%E5%8F%8A%E6%9E%B6%E6%9E%84%E5%8F%91%E5%B1%95" rel="bookmark" title="微服务以及架构发展">微服务以及架构发展</a></li><li><a href="/JVM-%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD" rel="bookmark" title="JVM-类的加载">JVM-类的加载</a></li><li><a href="/SpringCloud-Netflix%E4%BD%93%E7%B3%BB" rel="bookmark" title="SpringCloud-Netflix体系">SpringCloud-Netflix体系</a></li><li><a href="/%E5%BA%8F%E5%88%97%E5%8C%96" rel="bookmark" title="序列化">序列化</a></li><li><a href="/JVM-JMM" rel="bookmark" title="JVM-JMM">JVM-JMM</a></li><li><a href="/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84" rel="bookmark" title="分布式系统与高并发系统架构">分布式系统与高并发系统架构</a></li><li><a href="/JVM-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA" rel="bookmark" title="JVM-对象的创建">JVM-对象的创建</a></li><li><a href="/JVM-JVM%E8%B0%83%E4%BC%98" rel="bookmark" title="JVM-JVM调优">JVM-JVM调优</a></li><li><a href="/JVM-GC" rel="bookmark" title="JVM-GC">JVM-GC</a></li><li><a href="/SpringCloud-Alibaba%E4%BD%93%E7%B3%BB" rel="bookmark" title="SpringCloud-Alibaba体系">SpringCloud-Alibaba体系</a></li><li><a href="/SpringCloud-SpringCloud%E4%BD%93%E7%B3%BB" rel="bookmark" title="SpringCloud-SpringCloud体系">SpringCloud-SpringCloud体系</a></li><li><a href="/Apollo" rel="bookmark" title="Apollo">Apollo</a></li><li><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="微服务中的会话管理（一）">微服务中的会话管理（一）</a></li><li><a href="/%E7%A3%81%E7%9B%98IO%E4%B8%8E%E7%BD%91%E7%BB%9CIO" rel="bookmark" title="磁盘IO与网络IO">磁盘IO与网络IO</a></li><li><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%BA%8C%EF%BC%89" rel="bookmark" title="微服务中的会话管理（二）">微服务中的会话管理（二）</a></li><li><a href="/HTTPS" rel="bookmark" title="HTTPS">HTTPS</a></li><li class="active"><a href="/RocketMQ-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5" rel="bookmark" title="RocketMQ-基础概念">RocketMQ-基础概念</a></li><li><a href="/RocketMQ-%E6%B6%88%E6%81%AF%E3%80%81%E4%BA%8B%E5%8A%A1" rel="bookmark" title="RocketMQ-消息、事务">RocketMQ-消息、事务</a></li><li><a href="/Kafka-%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84" rel="bookmark" title="Kafka-整体架构">Kafka-整体架构</a></li><li><a href="/%E7%BD%91%E7%BB%9CIO%E6%A8%A1%E5%9E%8B" rel="bookmark" title="网络IO模型">网络IO模型</a></li><li><a href="/Kafka-%E6%90%AD%E5%BB%BA" rel="bookmark" title="Kafka-搭建">Kafka-搭建</a></li><li><a href="/Netty" rel="bookmark" title="Netty">Netty</a></li><li><a href="/nginx%E5%AE%9E%E6%88%98" rel="bookmark" title="nginx实战">nginx实战</a></li><li><a href="/Java%E5%92%8C%E4%B8%B2%E5%8F%A3%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1" rel="bookmark" title="Java和串口进行通信">Java和串口进行通信</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="fanfanfan" data-src="/images/avatar.png"><p class="name" itemprop="name">fanfanfan</p><div class="description" itemprop="description">花有重开日，人无再少年</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">76</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">4</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">78</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item CSDN" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDY2MDQwOA==" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_40660408"><i class="ic i-csdn"></i></span> <span class="exturl item Gitee" data-url="aHR0cHM6Ly9naXRlZS5jb20vYmZhbmZhbmZhbg==" title="https:&#x2F;&#x2F;gitee.com&#x2F;bfanfanfan"><i class="ic i-gitee"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-magic"></i>友链</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/HTTPS" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/RocketMQ-%E6%B6%88%E6%81%AF%E3%80%81%E4%BA%8B%E5%8A%A1" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/SpringMVC%E6%BA%90%E7%A0%81%E6%80%BB%E7%BB%93" title="SpringMVC源码总结">SpringMVC源码总结</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/SpringBoot-Web%E5%BC%80%E5%8F%91" title="SpringBoot-Web开发">SpringBoot-Web开发</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/RocketMQ-%E6%B6%88%E6%81%AF%E3%80%81%E4%BA%8B%E5%8A%A1" title="RocketMQ-消息、事务">RocketMQ-消息、事务</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/SpringMVC-REST%E9%A3%8E%E6%A0%BC" title="SpringMVC-REST风格">SpringMVC-REST风格</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89" title="SpringMVC入门（二）">SpringMVC入门（二）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/Decorator%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F" title="Decorator装饰器模式">Decorator装饰器模式</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/redis%E5%9C%A8%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8" title="redis在开发中的简单使用">redis在开发中的简单使用</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/instruments/" title="分类于 工具">工具</a></div><span><a href="/%E5%9F%BA%E4%BA%8ETypora%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%88%B6%E4%BD%9C" title="基于Typora的流程图制作">基于Typora的流程图制作</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/Flyweight%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F" title="Flyweight享元模式">Flyweight享元模式</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/instruments/" title="分类于 工具">工具</a></div><span><a href="/%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E7%BF%BB%E8%AF%91%E5%B0%8F%E5%B7%A5%E5%85%B7%EF%BC%88%E4%B8%80%EF%BC%89" title="手动实现翻译小工具（一）">手动实现翻译小工具（一）</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">fanfanfan @ 书院十四先生</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">1.3m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">20:23</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"/RocketMQ-基础概念",favicon:{show:"书院十四先生",hide:"书院十四先生"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->