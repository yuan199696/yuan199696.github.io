<!-- build time:Sun Dec 26 2021 19:05:58 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN,en,default"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" href="https://baiyezi.vip/rss.xml"><link rel="alternate" type="application/atom+xml" href="https://baiyezi.vip/atom.xml"><link rel="alternate" type="application/json" href="https://baiyezi.vip/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Java,日志体系"><link rel="canonical" href="https://baiyezi.vip/java-%E6%97%A5%E5%BF%97%E4%BD%93%E7%B3%BB"><title>java-日志体系 - Java |</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">java-日志体系</h1><div class="meta"><span class="item" title="创建时间：2021-03-10 16:46:12"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-03-10T16:46:12+08:00">2021-03-10</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>7.4k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>7 分钟</span> </span><span id="/java-日志体系" class="item leancloud_visitors" data-flag-title="" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start"></a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105008.png"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105422.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105420.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225104957.png"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105423.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105418.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/java/" itemprop="item" rel="index" title="分类于 Java"><span itemprop="name">Java</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://baiyezi.vip/java-%E6%97%A5%E5%BF%97%E4%BD%93%E7%B3%BB"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="fanfanfan"><meta itemprop="description" content=", 花有重开日，人无再少年"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content=""></span><div class="body md" itemprop="articleBody"><blockquote><p>以下资料来源于：<span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vZnJlZWRvbXN6cS9qYXZhLWxvZw==">孙志强老师</span></p></blockquote><h2 id="1java混乱的日志体系"><a class="anchor" href="#1java混乱的日志体系">#</a> 1.JAVA 混乱的日志体系</h2><hr><p>换乱的 java 日志体系</p><p>case：</p><p>SLF4J-JCL</p><p>LOG4J-CORE</p><p>LOGBACK</p><p>SLF4J-SIMPLE</p><p>JCL-OVER-SLF4J</p><p>LOGBACK-CORE</p><p>LOG4J</p><p>LOG4J-API</p><p>LOG4J-JUL</p><p>LOG4J-JCL</p><p>LOGBACK-ACCESS</p><p>LOGBACK-CLASSIC</p><p>SLF4-API</p><p>SLF4J-LOGJ12</p><p>LOGBACK-CLASSIC</p><p>LOG4J-SLF4J-IMPL</p><h3 id="11-java日志体系概述"><a class="anchor" href="#11-java日志体系概述">#</a> 1.1 JAVA 日志体系概述</h3><p>问题：</p><p>常用的日志框架有哪些？</p><p>大家目前正在使用的</p><table><thead><tr><th>名称</th><th>jar</th><th>描述</th></tr></thead><tbody><tr><td>log4j</td><td>log4j-1.2.17</td><td>早期常用的日志组件</td></tr><tr><td>logback</td><td>logback-core,logback-classic,logback-access</td><td>性能由于 log4j</td></tr><tr><td>log4j2</td><td>log4j,log4j-api,log4j-core</td><td>log4j 升级</td></tr><tr><td>Java.util.logging</td><td>jdk</td><td>jdk 实现，tomcat 默认实现</td></tr></tbody></table><p>开发一个类似 spring 框架，或者开发一个组件，如何选择？</p><p>选择任何一种实现，都不太好，不同的日志输出不一样，日志也会打印多份。解决方式就是日志做抽象层</p><p>1.1.1 Apache Commons Logging（JCL）</p><pre><code>1-官网介绍
记录组件
在编写一个库时，记录信息是非常有用的。然而，外面有很多日志实现，一个库不能把某一个特定的日志实现强加给作为库一部分的整体应用。

Logging包是不同日志实现之间的一个超薄桥梁。一个使用commons-logging API的库可以在运行时与任何日志实现一起使用。Common-logging自带对许多流行的日志实现的支持，为其他的日志实现编写适配器是一项相当简单的任务。

应用程序（而不是库）也可以选择使用commonons-logging。虽然日志记录实现的独立性对应用程序来说不像库那样重要，但使用commons-logging确实允许应用程序在不重新编译代码的情况下改变到不同的日志实现。

请注意，commons-logging不会尝试初始化或终止运行时使用的底层日志实现，这是应用程序的责任。然而，许多常用的日志实现都会自动初始化；在这种情况下，应用程序可以避免包含任何特定于所使用的日志实现的代码。
2-实现原理
org.apache.commons.logging.impl.LogFactoryImpl#discoverLogImplementation
3-缺点，只能实现一种，通过静态绑定实现，不易扩展，适配器模式。
</code></pre><p>1.1.2 SLFJ</p><pre><code>slf4j全 称为Simple Logging Facade for JAVA，java简单日志门面。类似于Apache Common-Logging，是对不同日志框架提供的一个门面封装(是接口而非实现)，可以在部署的时候不修改任何配置即可接入一种日志实现方案。但是，他在编译时静态绑定真正的Log库。使用SLF4J时，如果需要使用某一种日志实现，那么你必须选择正确的SLF4J的jar包的集合（各种桥接包）。
----基于OSGI模块化框架详解
特点：
动态加载、更新、和卸载模块而不用停止服务
实现系统的模块化、版本化，允许多版本bundule（模块）同时服务--注释，很多三方jar中的MANIFEST.MF进行子描述，就是一个例子
	Manifest-Version: 1.0
    Archiver-Version: Plexus Archiver
    Created-By: Apache Maven
    Built-By: ceki
    Build-Jdk: 1.8.0_121
    Bundle-Description: The slf4j API
    Bundle-Version: 1.7.30
    Implementation-Version: 1.7.30
    X-Compile-Source-JDK: 1.5
    X-Compile-Target-JDK: 1.5
    Implementation-Title: slf4j-api
    Bundle-ManifestVersion: 2
    Bundle-SymbolicName: slf4j.api
    Bundle-Name: slf4j-api
    Bundle-Vendor: SLF4J.ORG
    Bundle-RequiredExecutionEnvironment: J2SE-1.5
    Automatic-Module-Name: org.slf4j
    Export-Package: org.slf4j;version=1.7.30, org.slf4j.spi;version=1.7.30
     , org.slf4j.helpers;version=1.7.30, org.slf4j.event;version=1.7.30
    Import-Package: org.slf4j.impl;version=1.6.0
    Service model允许模块、插件相互依赖但松耦合，分享服务更简单

</code></pre><h3 id="12-常用的日志组成方案与应用场景"><a class="anchor" href="#12-常用的日志组成方案与应用场景">#</a> 1.2 常用的日志组成方案与应用场景</h3><h4 id="121-jcl"><a class="anchor" href="#121-jcl">#</a> 1.2.1 jcl</h4><p>apache-commons-logging 已过时</p><h3 id="122-slfj"><a class="anchor" href="#122-slfj">#</a> 1.2.2 slfj</h3><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20210314223416.png" alt="slfj桥接器"></p><pre><code>桥接包
slfj-log4j12.jar(桥接log4j)
slf4j-jdk14.jar(桥接jdk Logging)
slf4j-jcl.jar(桥接jcl)
log4j-slf4j-impl.jar(桥接log4j2)
logback-classic.jar(桥接logback)
</code></pre><h4 id="123-日志切换适配器"><a class="anchor" href="#123-日志切换适配器">#</a> 1.2.3 日志切换，适配器</h4><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20210314223416.png" alt="slfj适配器"></p><pre><code>如果当前系统之中再用jcl打印日志，比如spring4，但这是想加入slfj来打印日志，就会出现两类日志输出，如何既觉

只要classpath当中指定了slfj适配器，包，即可无缝江源日志输出转移到slfj上来
jcl-over-slfj:转移 jcl日志至slf4j

log4j-over-slfj:转移log4j日志至slf4j

jul-over-slfj:转移jul日志至slf4j
</code></pre><table><thead><tr><th>名称</th><th>描述</th><th>相关 JAR 包</th></tr></thead><tbody><tr><td>门面</td><td>slf4jAPI 接口</td><td>slf4j-api.jar</td></tr><tr><td>桥接</td><td>用于 slf4j 连接对应日志实现</td><td>slfj-log4j12.jar,slfj-jdk14.jar,log4j-slf4j-impl,logback-classic,slf4j-jcl.jar</td></tr><tr><td>适配器</td><td>用于将原日志输出无缝转移到 slf4j</td><td>cl-over-slf4j.jar,log4j-over-slfj,jul-over-slfj,</td></tr><tr><td>具体实现</td><td>日志的具体实现</td><td>log4j.jar,,logback,log4j2,java.util.logging</td></tr></tbody></table><p>桥接器与适配器同时只能使用一个</p><h4 id="124-循环依赖"><a class="anchor" href="#124-循环依赖">#</a> 1.2.4 循环依赖</h4><p>如果 clappsth 中既有桥接器也有适配器，日志会被踢来踢去，陷入死循环</p><h3 id="13slfjlog4j2-统一系统应用日志"><a class="anchor" href="#13slfjlog4j2-统一系统应用日志">#</a> 1.3.slfj+log4j2 统一系统应用日志</h3><p>由于系统组件中，可能采用了不同的日志体系，spring5 之前，spring 采用的是 apache-common-log，spring5 之后，采用 spring-jcl</p><h3 id="14-日志规范"><a class="anchor" href="#14-日志规范">#</a> 1.4 日志规范</h3><pre><code>1. 【强制】应用中不可直接使用日志系统（Log4j、Logback）中的 API，而应依赖使用日志框架
（SLF4J、JCL--Jakarta Commons Logging）中的 API，使用门面模式的日志框架，有利于维护和
各个类的日志处理方式统一。
说明：日志框架（SLF4J、JCL--Jakarta Commons Logging）的使用方式（推荐使用 SLF4J）
 使用 SLF4J：
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
private static final Logger logger = LoggerFactory.getLogger(Test.class);
使用 JCL：
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
private static final Log log = LogFactory.getLog(Test.class);
2. 【强制】所有日志文件至少保存 15 天，因为有些异常具备以“周”为频次发生的特点。对于
当天日志，以“应用名.log”来保存，保存在/home/admin/应用名/logs/&lt;/font&gt;目录下，
过往日志格式为: &#123;logname&#125;.log.&#123;保存日期&#125;，日期格式：yyyy-MM-dd
说明：以 mppserver 应用为例，日志保存在/home/admin/mppserver/logs/mppserver.log，历史日志
名称为 mppserver.log.2016-08-01
3. 【强制】应用中的扩展日志（如打点、临时监控、访问日志等）命名方式：
appName_logType_logName.log。logType:日志类型，如 stats/monitor/access 等；logName:日志描
述。这种命名的好处：通过文件名就可知道日志文件属于什么应用，什么类型，什么目的，也有利于归类查
找。
说明：推荐对日志进行分类，如将错误日志和业务日志分开存放，便于开发人员查看，也便于通过日志对系
统进行及时监控。
正例：mppserver 应用中单独监控时区转换异常，如：mppserver_monitor_timeZoneConvert.log
4. 【强制】在日志输出时，字符串变量之间的拼接使用占位符的方式。
说明：因为 String 字符串的拼接会使用 StringBuilder 的 append()方式，有一定的性能损耗。使用占位符仅
是替换动作，可以有效提升性能。
正例：logger.debug(&quot;Processing trade with id: &#123;&#125; and symbol: &#123;&#125;&quot;, id, symbol);
5. 【强制】对于 trace/debug/info 级别的日志输出，必须进行日志级别的开关判断。
说明：虽然在 debug(参数)的方法体内第一行代码 isDisabled(Level.DEBUG_INT)为真时（Slf4j 的常见实现
Log4j 和 Logback），就直接 return，但是参数可能会进行字符串拼接运算。此外，如果 debug(getName())
这种参数内有 getName()方法调用，无谓浪费方法调用的开销。
正例：
// 如果判断为真，那么可以输出 trace 和 debug 级别的日志
if (logger.isDebugEnabled()) &#123;
 logger.debug(&quot;Current ID is: &#123;&#125; and name is: &#123;&#125;&quot;, id, getName());
&#125;
6. 【强制】避免重复打印日志，浪费磁盘空间，务必在 log4j.xml 中设置 additivity=false。
正例：&lt;logger name=&quot;com.taobao.dubbo.config&quot; additivity=&quot;false&quot;&gt;
	
	case:
	 &lt;logger name=&quot;com.bjmashibing&quot; level=&quot;DEBUG&quot;&gt;
     	&lt;AppenderRef ref=&quot;console&quot;/&gt;
     &lt;/logger&gt;
	
7. 【强制】生产环境禁止直接使用 System.out 或 System.err 输出日志或使用
e.printStackTrace()打印异常堆栈。
说明：标准日志输出与标准错误输出文件每次 Jboss 重启时才滚动，如果大量输出送往这两个文件，容易
造成文件大小超过操作系统大小限制。
8. 【强制】异常信息应该包括两类信息：案发现场信息和异常堆栈信息。如果不处理，那么通过
关键字 throws 往上抛出。
正例：logger.error(各类参数或者对象 toString() + &quot;_&quot; + e.getMessage(), e);

case:不允许记录日志后又抛出异常，因为这样会多次记录日志，只允许记录一次日志

9. 【强制】日志打印时禁止直接用 JSON 工具将对象转换成 String。
说明：如果对象里某些 get 方法被重写，存在抛出异常的情况，则可能会因为打印日志而影响正常业务流
程的执行。
正例：打印日志时仅打印出业务相关属性值或者调用其对象的 toString()方法。
10.【推荐】谨慎地记录日志。生产环境禁止输出 debug 日志；有选择地输出 info 日志；如果使用
warn 来记录刚上线时的业务行为信息，一定要注意日志输出量的问题，避免把服务器磁盘撑
爆，并记得及时删除这些观察日志。
说明：大量地输出无效日志，不利于系统性能提升，也不利于快速定位错误点。记录日志时请思考：这些
日志真的有人看吗？看到这条日志你能做什么？能不能给问题排查带来好处？
11.【推荐】可以使用 warn 日志级别来记录用户输入参数错误的情况，避免用户投诉时，无所适
从。如非必要，请不要在此场景打出 error 级别，避免频繁报警。
说明：注意日志输出的级别，error 级别只记录系统逻辑出错、异常或者重要的错误信息。
12.【推荐】尽量用英文来描述日志错误信息，如果日志中的错误信息用英文描述不清楚的话使用
中文描述即可，否则容易产生歧义。
说明：国际化团队或海外部署的服务器由于字符集问题，使用全英文来注释和描述日志错误信息。
</code></pre><h3 id="15-性能测试"><a class="anchor" href="#15-性能测试">#</a> 1.5 性能测试</h3><h4 id="151-单线程"><a class="anchor" href="#151-单线程">#</a> 1.5.1 单线程</h4><table><thead><tr><th>名称</th><th>未开启缓存，立即刷出</th><th>开启缓存，不立即刷出</th><th>异步 - appender - 未开启缓存，立即输出</th><th>异步 appender - 开启缓存，不立即输出</th></tr></thead><tbody><tr><td>log4j</td><td>87.342 秒</td><td>10.757 秒</td><td>91.752</td><td>10.058 秒</td></tr><tr><td>logback</td><td>81.617</td><td>5.547</td><td>100.245</td><td>10.69</td></tr><tr><td>log4j2</td><td>5.272/5.614/5.196</td><td>5.502/5.53/5.453</td><td>5.423/5.378/4.953</td><td>5.063/4.74/5.246(AsyncRoot)==&gt;5.348/5.712/4.818（Async）</td></tr></tbody></table><h4 id="152-多线程"><a class="anchor" href="#152-多线程">#</a> 1.5.2 多线程</h4><table><thead><tr><th>名称</th><th>未开启缓存，立即刷出</th><th>开启缓存，不立即刷出</th><th>异步 appender - 未开启缓存，立即输出</th><th>异步 appender - 开启缓存，不立即输出</th></tr></thead><tbody><tr><td>log4j</td><td>102.823</td><td>13.324</td><td>87.966</td><td>10.651</td></tr><tr><td>logback</td><td>100.853</td><td>8.238</td><td>111.272</td><td>55.813</td></tr><tr><td>log4j2</td><td>8.164/6.94/7.073</td><td>8.02/6.597/8.009</td><td>8.11/7.485</td><td>8.178/8.226</td></tr></tbody></table><p>机构图对比：</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20210314223416.png" alt="1589351161247"></p><p>log4j2-AsyncLogger</p><pre><code>Log4j2中的AsyncLogger的内部使用了Disruptor框架。
参考：https://www.cnblogs.com/yeyang/p/7944906.html

Disruptor简介
Disruptor是英国外汇交易公司LMAX开发的一个高性能队列，基于Disruptor开发的系统单线程能支撑每秒600万订单。

目前，包括Apache Strom、Log4j2在内的很多知名项目都应用了Disruptor来获取高性能。

Disruptor框架内部核心数据结构为RingBuffer，其为无锁环形队列。



 

单线程每秒能够处理600万订单，Disruptor为什么这么快？

a.lock-free-使用了CAS来实现线程安全
ArrayBlockingQueue使用锁实现并发控制，当get或put时，当前访问线程将上锁，当多生产者、多消费者的大量并发情形下，由于锁竞争、线程切换等，会有性能损失。

Disruptor通过CAS实现多生产者、多消费者对RingBuffer的并发访问。CAS相当于乐观锁，其性能优于Lock的性能。

b.使用缓存行填充解决伪共享问题
计算机体系结构中，内存的访问速度远远低于CPU的运行速度，在内存和CPU之间，加入Cache，CPU首先访问Cache中的数据，CaChe未命中，才访问内存中的数据。

伪共享：Cache是以缓存行（cache line）为单位存储的，当多个线程修改互相独立的变量时，如果这些变量共享同一个缓存行，就会无意中影响彼此的性能。



 

关于伪共享的深度分析，可参考《伪共享，并发编程的性能杀手》这篇文章。

 
日志输出方式
sync	        同步打印日志，日志输出与业务逻辑在同一线程内，当日志输出完毕，才能进行后续业务逻辑操作
Async Appender	异步打印日志，内部采用ArrayBlockingQueue，对每个AsyncAppender创建一个线程用于处理日志输出。
Async Logger	异步打印日志，采用了高性能并发框架Disruptor，创建一个线程用于处理日志输出。
</code></pre><h3 id="16-日志的全链路追踪-简介"><a class="anchor" href="#16-日志的全链路追踪-简介">#</a> 1.6 日志的全链路追踪 简介</h3><h4 id="161-全链路追踪的解决方案"><a class="anchor" href="#161-全链路追踪的解决方案">#</a> 1.6.1 全链路追踪的解决方案</h4><p>全链路追踪的背景</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20210314223439.png" alt="全链路背景.png"></p><p>上图是一个典型的微服务调用链路，面对的场景问题如下：</p><p>1 - 如果 D 服务是一个关键服务，返回结果错误，无论是日志，还是监控平台，并不能很快捷的定位问题出现在了那里，因为不能串联整个调用链路的流程</p><p>2 - 当对某一个服务架构升级或者改造的时候，不好评估影响范围，不明确服务之间的依赖关系，给技术决策带来了困难</p><p>3 - 性能瓶颈，整个调用链路那个环节耗时比较久</p><p>4 - 当一次请求结束后，不好确定执行顺序，都给业务逻辑上的理解带来了困难</p><p>需要解决问题：</p><p>1 - 串用调用链，快速定位问题</p><p>2 - 厘清服务依赖关系</p><p>3 - 进行各个服务接口的性能分析</p><p>4 - 跟踪业务流的处理顺序</p><p>已有方案</p><p>1-Google Dapper</p><p>2-Twitter Zipkin</p><p>3-Spring Cloud Sleuth</p><p>​	3-1 与 springboot 及 spring 组件无缝集成</p><p>​	3-2 支持 Zipkin 输出（mysql，es）</p><p>​	3-3 支持 MQ 和 HTTP 方式传输</p><h4 id="162-spring-cloud-sleuth-介绍"><a class="anchor" href="#162-spring-cloud-sleuth-介绍">#</a> 1.6.2 Spring Cloud Sleuth 介绍</h4><h5 id="基本概念"><a class="anchor" href="#基本概念">#</a> 基本概念：</h5><p>​	Trace（链路）</p><p>​	Span（跨度）</p><p>​	Annotation（标注）：CS（发送请求），SR（接受请求），SS（相应发送），CR（相应被客户端接收）</p><h5 id="架构图"><a class="anchor" href="#架构图">#</a> 架构图</h5><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20210314223445.png" alt="1589347288854"></p><h5 id="流程图"><a class="anchor" href="#流程图">#</a> 流程图</h5><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20210314223453.png" alt="1589347457880"></p><h5 id="基本概念-2"><a class="anchor" href="#基本概念-2">#</a> 基本概念</h5><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20210314223453.png" alt="1589347636646"></p><h4 id="163-分布式日志检索解决方案-elk"><a class="anchor" href="#163-分布式日志检索解决方案-elk">#</a> 1.6.3 分布式日志检索解决方案 - ELK</h4><p>E：Elasticsearch --- 存储</p><p>L：LogStash --- 收集</p><p>K：Kibana --- 展示</p><p>流程</p><p><img data-src="https://gitee.com/bfanfanfan/img/raw/master/docsify/20210314223456.png" alt="1589351638767"></p><div class="tags"><a href="/tags/Java/" rel="tag"><i class="ic i-tag"></i> Java</a> <a href="/tags/%E6%97%A5%E5%BF%97%E4%BD%93%E7%B3%BB/" rel="tag"><i class="ic i-tag"></i> 日志体系</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2021-12-24 15:16:13" itemprop="dateModified" datetime="2021-12-24T15:16:13+08:00">2021-12-24</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="fanfanfan 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="fanfanfan 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="fanfanfan PayPal"><p>PayPal</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>fanfanfan <i class="ic i-at"><em>@</em></i></li><li class="link"><strong>本文链接：</strong> <a href="https://baiyezi.vip/java-%E6%97%A5%E5%BF%97%E4%BD%93%E7%B3%BB" title="java-日志体系">https://baiyezi.vip/java-日志体系</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/JMH" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;bfanfanfan&#x2F;img&#x2F;raw&#x2F;master&#x2F;guzhuang&#x2F;20211225105418.jpg" title="JMH"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Java</span><h3>JMH</h3></a></div><div class="item right"><a href="/redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;bfanfanfan&#x2F;img&#x2F;raw&#x2F;master&#x2F;guzhuang&#x2F;20211225105008.png" title="redis的数据类型"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> Java</span><h3>redis的数据类型</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1java%E6%B7%B7%E4%B9%B1%E7%9A%84%E6%97%A5%E5%BF%97%E4%BD%93%E7%B3%BB"><span class="toc-number">1.</span> <span class="toc-text">1.JAVA 混乱的日志体系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-java%E6%97%A5%E5%BF%97%E4%BD%93%E7%B3%BB%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 JAVA 日志体系概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E5%B8%B8%E7%94%A8%E7%9A%84%E6%97%A5%E5%BF%97%E7%BB%84%E6%88%90%E6%96%B9%E6%A1%88%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 常用的日志组成方案与应用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#121-jcl"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.2.1 jcl</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#122-slfj"><span class="toc-number">1.3.</span> <span class="toc-text">1.2.2 slfj</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#123-%E6%97%A5%E5%BF%97%E5%88%87%E6%8D%A2%E9%80%82%E9%85%8D%E5%99%A8"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.2.3 日志切换，适配器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#124-%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96"><span class="toc-number">1.3.2.</span> <span class="toc-text">1.2.4 循环依赖</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13slfjlog4j2-%E7%BB%9F%E4%B8%80%E7%B3%BB%E7%BB%9F%E5%BA%94%E7%94%A8%E6%97%A5%E5%BF%97"><span class="toc-number">1.4.</span> <span class="toc-text">1.3.slfj+log4j2 统一系统应用日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E6%97%A5%E5%BF%97%E8%A7%84%E8%8C%83"><span class="toc-number">1.5.</span> <span class="toc-text">1.4 日志规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="toc-number">1.6.</span> <span class="toc-text">1.5 性能测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#151-%E5%8D%95%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.6.1.</span> <span class="toc-text">1.5.1 单线程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#152-%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.6.2.</span> <span class="toc-text">1.5.2 多线程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-%E6%97%A5%E5%BF%97%E7%9A%84%E5%85%A8%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.7.</span> <span class="toc-text">1.6 日志的全链路追踪 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#161-%E5%85%A8%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">1.7.1.</span> <span class="toc-text">1.6.1 全链路追踪的解决方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#162-spring-cloud-sleuth-%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.7.2.</span> <span class="toc-text">1.6.2 Spring Cloud Sleuth 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.7.2.1.</span> <span class="toc-text">基本概念：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="toc-number">1.7.2.2.</span> <span class="toc-text">架构图</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E5%9B%BE"><span class="toc-number">1.7.2.3.</span> <span class="toc-text">流程图</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-2"><span class="toc-number">1.7.2.4.</span> <span class="toc-text">基本概念</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#163-%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%A3%80%E7%B4%A2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-elk"><span class="toc-number">1.7.3.</span> <span class="toc-text">1.6.3 分布式日志检索解决方案 - ELK</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/Linux%E4%B8%8B%E5%AE%89%E8%A3%85MySQL" rel="bookmark" title="Linux下安装MySQL">Linux下安装MySQL</a></li><li><a href="/MySQL%E5%9F%BA%E7%A1%80" rel="bookmark" title="MySQL基础">MySQL基础</a></li><li><a href="/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="IOC配置方式（一）">IOC配置方式（一）</a></li><li><a href="/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%BA%8C%EF%BC%89" rel="bookmark" title="IOC配置方式（二）">IOC配置方式（二）</a></li><li><a href="/IOC%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F" rel="bookmark" title="IOC注解方式">IOC注解方式</a></li><li><a href="/AOP" rel="bookmark" title="AOP">AOP</a></li><li><a href="/SpringBoot%E5%85%A5%E9%97%A8" rel="bookmark" title="SpringBoot入门">SpringBoot入门</a></li><li><a href="/SpringBoot-Web%E5%BC%80%E5%8F%91" rel="bookmark" title="SpringBoot-Web开发">SpringBoot-Web开发</a></li><li><a href="/SpringBoot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E5%8E%9F%E7%90%86" rel="bookmark" title="SpringBoot自动装配原理">SpringBoot自动装配原理</a></li><li><a href="/zookeeper%E6%90%AD%E5%BB%BA%E5%8F%8A%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" rel="bookmark" title="zookeeper搭建及基本概念">zookeeper搭建及基本概念</a></li><li><a href="/zookeeper%E5%8E%9F%E7%90%86" rel="bookmark" title="zookeeper原理">zookeeper原理</a></li><li><a href="/zookeeper%E6%A1%88%E4%BE%8B" rel="bookmark" title="zookeeper案例">zookeeper案例</a></li><li><a href="/MySQL%E8%B0%83%E4%BC%98%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="MySQL调优（一）">MySQL调优（一）</a></li><li><a href="/redis%E5%AE%89%E8%A3%85%E5%8F%8ANIO%E5%8E%9F%E7%90%86" rel="bookmark" title="redis安装及NIO原理">redis安装及NIO原理</a></li><li><a href="/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="SpringMVC入门（一）">SpringMVC入门（一）</a></li><li><a href="/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89" rel="bookmark" title="SpringMVC入门（二）">SpringMVC入门（二）</a></li><li><a href="/SpringMVC-REST%E9%A3%8E%E6%A0%BC" rel="bookmark" title="SpringMVC-REST风格">SpringMVC-REST风格</a></li><li><a href="/SpringMVC%E8%BF%9B%E9%98%B6" rel="bookmark" title="SpringMVC进阶">SpringMVC进阶</a></li><li><a href="/SpringMVC%E6%BA%90%E7%A0%81%E6%80%BB%E7%BB%93" rel="bookmark" title="SpringMVC源码总结">SpringMVC源码总结</a></li><li><a href="/shiro%E5%85%A5%E9%97%A8" rel="bookmark" title="shiro入门">shiro入门</a></li><li><a href="/shiro%E6%95%B4%E5%90%88SpringBoot" rel="bookmark" title="shiro整合SpringBoot">shiro整合SpringBoot</a></li><li><a href="/shiro%E7%9A%84session%E7%AE%A1%E7%90%86" rel="bookmark" title="shiro的session管理">shiro的session管理</a></li><li><a href="/shiro%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E7%99%BB%E5%BD%95" rel="bookmark" title="shiro的缓存机制与分布式登录">shiro的缓存机制与分布式登录</a></li><li><a href="/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95" rel="bookmark" title="单点登录">单点登录</a></li><li><a href="/%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" rel="bookmark" title="线程基础知识">线程基础知识</a></li><li><a href="/%E5%AE%B9%E5%99%A8%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%B1%A0" rel="bookmark" title="容器与线程池">容器与线程池</a></li><li><a href="/Win10%E5%AE%89%E8%A3%85docker" rel="bookmark" title="Win10安装docker">Win10安装docker</a></li><li><a href="/Win10%E5%AE%89%E8%A3%85docker" rel="bookmark" title="Win10安装docker">Win10安装docker</a></li><li><a href="/JMH" rel="bookmark" title="JMH">JMH</a></li><li><a href="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B" rel="bookmark" title="并发编程">并发编程</a></li><li class="active"><a href="/java-%E6%97%A5%E5%BF%97%E4%BD%93%E7%B3%BB" rel="bookmark" title="java-日志体系">java-日志体系</a></li><li><a href="/redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" rel="bookmark" title="redis的数据类型">redis的数据类型</a></li><li><a href="/redis%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8" rel="bookmark" title="redis进阶使用">redis进阶使用</a></li><li><a href="/redis%E7%9A%84%E9%9B%86%E7%BE%A4" rel="bookmark" title="redis的集群">redis的集群</a></li><li><a href="/redis%E5%9C%A8%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8" rel="bookmark" title="redis在开发中的简单使用">redis在开发中的简单使用</a></li><li><a href="/ChainOfResponsibility%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F" rel="bookmark" title="ChainOfResponsibility责任链模式">ChainOfResponsibility责任链模式</a></li><li><a href="/Composite%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Composite组合模式">Composite组合模式</a></li><li><a href="/Decorator%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Decorator装饰器模式">Decorator装饰器模式</a></li><li><a href="/Facade%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Facade门面模式">Facade门面模式</a></li><li><a href="/Factory%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Factory工厂模式">Factory工厂模式</a></li><li><a href="/Flyweight%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Flyweight享元模式">Flyweight享元模式</a></li><li><a href="/Iterator%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Iterator迭代器模式">Iterator迭代器模式</a></li><li><a href="/Mediator%E8%B0%83%E5%81%9C%E8%80%85%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Mediator调停者模式">Mediator调停者模式</a></li><li><a href="/Observer%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Observer观察者模式">Observer观察者模式</a></li><li><a href="/Proxy%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Proxy代理模式">Proxy代理模式</a></li><li><a href="/Singleton%E5%8D%95%E4%BE%8B" rel="bookmark" title="Singleton单例">Singleton单例</a></li><li><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BB%A5%E5%8F%8A%E6%9E%B6%E6%9E%84%E5%8F%91%E5%B1%95" rel="bookmark" title="微服务以及架构发展">微服务以及架构发展</a></li><li><a href="/JVM-%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD" rel="bookmark" title="JVM-类的加载">JVM-类的加载</a></li><li><a href="/SpringCloud-Netflix%E4%BD%93%E7%B3%BB" rel="bookmark" title="SpringCloud-Netflix体系">SpringCloud-Netflix体系</a></li><li><a href="/%E5%BA%8F%E5%88%97%E5%8C%96" rel="bookmark" title="序列化">序列化</a></li><li><a href="/JVM-JMM" rel="bookmark" title="JVM-JMM">JVM-JMM</a></li><li><a href="/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84" rel="bookmark" title="分布式系统与高并发系统架构">分布式系统与高并发系统架构</a></li><li><a href="/JVM-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA" rel="bookmark" title="JVM-对象的创建">JVM-对象的创建</a></li><li><a href="/JVM-JVM%E8%B0%83%E4%BC%98" rel="bookmark" title="JVM-JVM调优">JVM-JVM调优</a></li><li><a href="/JVM-GC" rel="bookmark" title="JVM-GC">JVM-GC</a></li><li><a href="/SpringCloud-Alibaba%E4%BD%93%E7%B3%BB" rel="bookmark" title="SpringCloud-Alibaba体系">SpringCloud-Alibaba体系</a></li><li><a href="/SpringCloud-SpringCloud%E4%BD%93%E7%B3%BB" rel="bookmark" title="SpringCloud-SpringCloud体系">SpringCloud-SpringCloud体系</a></li><li><a href="/Apollo" rel="bookmark" title="Apollo">Apollo</a></li><li><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="微服务中的会话管理（一）">微服务中的会话管理（一）</a></li><li><a href="/%E7%A3%81%E7%9B%98IO%E4%B8%8E%E7%BD%91%E7%BB%9CIO" rel="bookmark" title="磁盘IO与网络IO">磁盘IO与网络IO</a></li><li><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%BA%8C%EF%BC%89" rel="bookmark" title="微服务中的会话管理（二）">微服务中的会话管理（二）</a></li><li><a href="/HTTPS" rel="bookmark" title="HTTPS">HTTPS</a></li><li><a href="/RocketMQ-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5" rel="bookmark" title="RocketMQ-基础概念">RocketMQ-基础概念</a></li><li><a href="/RocketMQ-%E6%B6%88%E6%81%AF%E3%80%81%E4%BA%8B%E5%8A%A1" rel="bookmark" title="RocketMQ-消息、事务">RocketMQ-消息、事务</a></li><li><a href="/Kafka-%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84" rel="bookmark" title="Kafka-整体架构">Kafka-整体架构</a></li><li><a href="/%E7%BD%91%E7%BB%9CIO%E6%A8%A1%E5%9E%8B" rel="bookmark" title="网络IO模型">网络IO模型</a></li><li><a href="/Kafka-%E6%90%AD%E5%BB%BA" rel="bookmark" title="Kafka-搭建">Kafka-搭建</a></li><li><a href="/Netty" rel="bookmark" title="Netty">Netty</a></li><li><a href="/nginx%E5%AE%9E%E6%88%98" rel="bookmark" title="nginx实战">nginx实战</a></li><li><a href="/Java%E5%92%8C%E4%B8%B2%E5%8F%A3%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1" rel="bookmark" title="Java和串口进行通信">Java和串口进行通信</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="fanfanfan" data-src="/images/avatar.png"><p class="name" itemprop="name">fanfanfan</p><div class="description" itemprop="description">花有重开日，人无再少年</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">73</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">3</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">77</span> <span class="name">标签</span></a></div></nav><div class="social"></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-magic"></i>友链</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/JMH" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/AOP" title="AOP">AOP</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" title="分类于 微服务">微服务</a></div><span><a href="/Apollo" title="Apollo">Apollo</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89" title="IOC配置方式（一）">IOC配置方式（一）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/redis%E5%AE%89%E8%A3%85%E5%8F%8ANIO%E5%8E%9F%E7%90%86" title="redis安装及NIO原理">redis安装及NIO原理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" title="分类于 微服务">微服务</a></div><span><a href="/SpringCloud-SpringCloud%E4%BD%93%E7%B3%BB" title="SpringCloud-SpringCloud体系">SpringCloud-SpringCloud体系</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/shiro%E7%9A%84session%E7%AE%A1%E7%90%86" title="shiro的session管理">shiro的session管理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/%E7%BD%91%E7%BB%9CIO%E6%A8%A1%E5%9E%8B" title="网络IO模型">网络IO模型</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/SpringBoot%E5%85%A5%E9%97%A8" title="SpringBoot入门">SpringBoot入门</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/Kafka-%E6%90%AD%E5%BB%BA" title="Kafka-搭建">Kafka-搭建</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="分类于 Java">Java</a></div><span><a href="/redis%E7%9A%84%E9%9B%86%E7%BE%A4" title="redis的集群">redis的集群</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">fanfanfan @</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">1.3m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">20:22</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"/java-日志体系",favicon:{show:"书院十四先生",hide:"书院十四先生"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->