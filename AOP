<!-- build time:Sat Dec 25 2021 20:22:25 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><!DOCTYPE html><html lang="zh-CN,en,default"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" href="https://baiyezi.vip/rss.xml"><link rel="alternate" type="application/atom+xml" href="https://baiyezi.vip/atom.xml"><link rel="alternate" type="application/json" href="https://baiyezi.vip/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Java,Spring,AOP"><link rel="canonical" href="https://baiyezi.vip/AOP"><title>AOP - Java |</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">AOP</h1><div class="meta"><span class="item" title="åˆ›å»ºæ—¶é—´ï¼š2021-01-13 22:10:20"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">å‘è¡¨äº</span> <time itemprop="dateCreated datePublished" datetime="2021-01-13T22:10:20+08:00">2021-01-13</time> </span><span class="item" title="æœ¬æ–‡å­—æ•°"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">æœ¬æ–‡å­—æ•°</span> <span>18k</span> <span class="text">å­—</span> </span><span class="item" title="é˜…è¯»æ—¶é•¿"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">é˜…è¯»æ—¶é•¿</span> <span>17 åˆ†é’Ÿ</span> </span><span class="item" title="æµè§ˆæ¬¡æ•°"><span class="icon"><i class="ic i-eye"></i> </span><span class="leancloud-visitors-count"></span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start"></a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105420.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105423.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105008.png"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225104957.png"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105422.jpg"></li><li class="item" data-background-image="https://gitee.com/bfanfanfan/img/raw/master/guzhuang/20211225105421.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">é¦–é¡µ</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/java/" itemprop="item" rel="index" title="åˆ†ç±»äº Java"><span itemprop="name">Java</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://baiyezi.vip/AOP"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="fanfanfan"><meta itemprop="description" content=", èŠ±æœ‰é‡å¼€æ—¥ï¼Œäººæ— å†å°‘å¹´"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content=""></span><div class="body md" itemprop="articleBody"><p>Spring æ¡†æ¶ä¸­ä¸¤å¤§æ ¸å¿ƒæ€æƒ³ï¼šIOC å’Œ AOPï¼Œåœ¨ä¹‹å‰çš„æ–‡ç« ä¸­æˆ‘å¤§æ¦‚é˜è¿°äº†ä»¥ä¸‹ IOCï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« å°±æ¥çœ‹çœ‹ AOPã€‚é¦–å…ˆçœ‹çœ‹ spring å®˜ç½‘å¯¹äº AOP çš„è§£é‡Šï¼š</p><p>ğŸ” Aspect-oriented Programming (AOP) complements Object-oriented Programming (OOP) by providing another way of thinking about program structure. The key unit of modularity in OOP is the class, whereas in AOP the unit of modularity is the aspect. Aspects enable the modularization of concerns (such as transaction management) that cut across multiple types and objects. (Such concerns are often termed â€œcrosscuttingâ€ concerns in AOP literature.)</p><p>One of the key components of Spring is the AOP framework. While the Spring IoC container does not depend on AOP (meaning you do not need to use AOP if you donâ€™t want to), AOP complements Spring IoC to provide a very capable middleware solution.</p><p>å¤§æ¦‚æ„æ€å°±æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰æ˜¯å¯¹é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰çš„ä¸€ç§è¡¥å……ï¼ŒAOP æä¾›äº†ä¸€ç§ä¸ä¸€æ ·çš„ç¼–ç¨‹æ€æƒ³ï¼Œè¿™ä¸ªä¸ä¸€æ ·ä½“ç°åœ¨ï¼šOOP æ›´å¤šå…³æ³¨çš„æ˜¯ç±»ï¼Œè€Œ AOP å…³æ³¨çš„æ˜¯åˆ‡é¢ï¼Œå¹¶ä¸”åˆ‡é¢åœ¨ AOP ä¸­æ˜¯æ¨¡å—åŒ–çš„ï¼Œå¦‚äº‹åŠ¡ç®¡ç†ã€æ—¥å¿—ç®¡ç†ç­‰éƒ½å¯ä»¥ä½œä¸ºåˆ‡é¢æ¥åœ¨éœ€è¦çš„åœ°æ–¹æä¾›ç›¸åº”çš„æœåŠ¡ã€‚åŒæ—¶ï¼ŒAOP ä¹Ÿæ˜¯å¯¹ IOC çš„ä¸€ç§å¢å¼ºï¼Œä½† IOC å’Œ AOP ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ã€‚å…¶ä¸­ï¼ŒAOP æœ€é‡è¦çš„ä¸¤ä¸ªæ€æƒ³ç‚¹æ˜¯ï¼š</p><ul><li>æä¾›å£°æ˜å¼ä¼ä¸šæœåŠ¡ã€‚æ­¤ç±»æœåŠ¡ä¸­æœ€é‡è¦çš„æ˜¯å£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚AOP å‡ºç°ä¹‹å‰ï¼Œå¯¹äºäº‹åŠ¡ç®¡ç†æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ç¼–ç¨‹å¼çš„äº‹åŠ¡ç®¡ç†ï¼Œæ¯”å¦‚æ‰‹åŠ¨æäº¤ã€å›æ»šç­‰ã€‚è€Œ AOP çš„äº‹åŠ¡ç®¡ç†æ˜¯å£°æ˜å¼çš„ï¼Œå¯ä»¥ç®€å•çš„é€šè¿‡æ³¨è§£æ¥å®ç°ï¼Œå¤§å¤§ç®€åŒ–äº†å¯¹äºäº‹åŠ¡çš„æ“ä½œã€‚</li><li>ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰åˆ‡é¢ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ç»‡å…¥è‡ªå·±æƒ³è¦å®ç°çš„ä¸€äº›åŠŸèƒ½ã€‚</li></ul><p>ğŸŒ¾</p><h2 id="aopä¸­çš„æœ¯è¯­"><a class="anchor" href="#aopä¸­çš„æœ¯è¯­">#</a> AOP ä¸­çš„æœ¯è¯­</h2><p>å¯¹äº AOP ä¸­ä¸€äº›æœ¯è¯­çš„ç†è§£ä¸å¿…æ­»è®°ç¡¬èƒŒï¼Œåº”ç”¨åœ¨ç¨‹åºä¸­å¯ä»¥æ›´å¥½çš„ç†è§£ã€‚</p><ul><li>Aspectï¼šåˆ‡é¢ã€‚å¯¹å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–ï¼Œæ‰€è°“å…³æ³¨ç‚¹å¯ä»¥ç†è§£ä¸ºåº”ç”¨ç¨‹åºä¸­å…¬å…±éƒ¨åˆ†ä»£ç é€»è¾‘ï¼Œæ¯”å¦‚å¯¹äº‹ç‰©çš„ç®¡ç†ã€æ—¥å¿—çš„ç®¡ç†ç­‰ä»£ç é€»è¾‘å¯ä»¥ä½œä¸ºä¸€ä¸ªæ¨¡å—æ¥ä¾›å…¶ä»–ä»£ç ä¸­ä½¿ç”¨ï¼Œè¯¥æ¨¡å—åœ¨ AOP ä¸­é€šå¸¸ç§°ä¸ºåˆ‡é¢ã€‚å…·ä½“å®ç°æ–¹å¼ï¼šxml é…ç½®æˆ–è€…æ³¨è§£ã€‚xml çš„æ–¹å¼åœ¨éšåçš„ä»£ç ä¸­è®¨è®ºï¼Œæ³¨è§£çš„æ–¹å¼é€šä¿—çš„æ¥è¯´å°±æ˜¯åœ¨æ™®é€šç±»ä¸Šé¢åŠ ä¸€ä¸ª @Aspect æ³¨è§£ã€‚</li><li>Join pointï¼šè¿æ¥ç‚¹ã€‚ç¨‹åºæ‰§è¡ŒæœŸé—´çš„ä¸€ä¸ªç‚¹ï¼Œå¦‚æ–¹æ³•æ‰§è¡Œæˆ–å¼‚å¸¸å¤„ç†æœŸé—´çš„ä¸€ä¸ªç‚¹ã€‚åœ¨ Spring AOP ä¸­ï¼Œè¿æ¥ç‚¹æ€»æ˜¯è¡¨ç¤ºæ–¹æ³•æ‰§è¡Œã€‚è¿æ¥ç‚¹æ­£æ˜¯é€šçŸ¥æ–¹æ³•ï¼ˆé€šçŸ¥æ–¹æ³•æŒ‡çš„æ˜¯åŠ äº†é€šçŸ¥æ³¨è§£çš„æ–¹æ³•ï¼‰æ‰§è¡Œçš„æ—¶æœº ã€‚</li><li>adviceï¼šé€šçŸ¥ã€‚ç”¨æ¥å®šä¹‰åœ¨åˆ‡é¢çš„è¿æ¥ç‚¹ä¸Šé‡‡å–çš„æ“ä½œï¼ˆæŸä¸€ä¸ªæ–¹æ³•ï¼‰ã€‚é€šçŸ¥ç±»å‹æœ‰äº”ç§ï¼Œä»¥æ³¨è§£çš„æ–¹å¼æ¥çœ‹åŒ…æ‹¬ï¼š@Beforeã€@Afterã€@AfterReturningã€@AfterThrowingã€@Around</li><li>Pointcutï¼šåˆ‡å…¥ç‚¹ã€‚ä»æ³¨è§£çš„æ–¹å¼æ¥çœ‹ï¼Œåˆ‡å…¥ç‚¹æ˜¯ç”¨æ¥å®šä¹‰è¿æ¥ç‚¹çš„ä¸€ç§è¡¨è¾¾å¼ï¼Œé€šçŸ¥å°±æ˜¯æ‰§è¡Œåœ¨åˆ‡å…¥ç‚¹å®šä¹‰å¥½çš„è¿æ¥ç‚¹ä¹‹ä¸Šçš„ã€‚ç”¨åˆ‡å…¥ç‚¹æ¥å®šä¹‰è¿æ¥ç‚¹å¯ä»¥åœ¨é€šçŸ¥ä¸­æ›´ç®€æ´çš„å¼•å…¥ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸ç”¨åˆ‡ç‚¹æ¥å®šä¹‰è¿æ¥ç‚¹ï¼Œè¿æ¥ç‚¹å¯ä»¥ç›´æ¥åœ¨é€šçŸ¥ä¸­è¿›è¡Œå®šä¹‰ã€‚</li><li>Introduction: å¼•å…¥ã€‚å¼•å…¥å…¶ä»–æ–¹æ³•æˆ–å­—æ®µã€‚Spring AOP å…è®¸å‘ä»»ä½•è¢«å»ºè®®çš„å¯¹è±¡å¼•å…¥æ–°çš„æ¥å£ (ä»¥åŠç›¸åº”çš„å®ç°)ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è®© bean å®ç°ä¸€ä¸ª IsModified æ¥å£ï¼Œä»¥ç®€åŒ–ç¼“å­˜ã€‚(åœ¨ AspectJ ç¤¾åŒºä¸­ï¼Œå¼•å…¥ç§°ä¸ºç±»å‹é—´å£°æ˜ã€‚)</li><li>Target objectï¼šç›®æ ‡å¯¹è±¡ã€‚è¢«ä¸€ä¸ªæˆ–å¤šä¸ªåˆ‡é¢é€šçŸ¥çš„å¯¹è±¡ã€‚ä¹Ÿç§°ä¸ºè¢«é€šçŸ¥çš„å¯¹è±¡ã€‚å› ä¸º Spring AOP æ˜¯é€šè¿‡ä½¿ç”¨è¿è¡Œæ—¶ä»£ç†å®ç°çš„ï¼Œæ‰€ä»¥è¿™ä¸ªå¯¹è±¡å§‹ç»ˆæ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚</li><li>AOP proxyï¼šAOP æ¡†æ¶ä¸ºäº†å®ç°åˆ‡é¢å¥‘çº¦ (é€šçŸ¥æ–¹æ³•çš„æ‰§è¡Œç­‰ç­‰) è€Œåˆ›å»ºçš„å¯¹è±¡ã€‚åœ¨ Spring æ¡†æ¶ä¸­ï¼ŒAOP ä»£ç†æ˜¯ JDK åŠ¨æ€ä»£ç†æˆ– CGLIB ä»£ç†ã€‚</li><li>Weavingï¼šç»‡å…¥ã€‚å°†åˆ‡é¢ä¸å…¶ä»–åº”ç”¨ç¨‹åºç±»å‹æˆ–å¯¹è±¡é“¾æ¥ä»¥æ­¤æ¥åˆ›å»ºä¸€ä¸ªé€šçŸ¥å¯¹è±¡ã€‚è¿™å¯ä»¥åœ¨ç¼–è¯‘æ—¶ (ä¾‹å¦‚ä½¿ç”¨ AspectJ ç¼–è¯‘å™¨)ã€åŠ è½½æ—¶æˆ–è¿è¡Œæ—¶å®Œæˆã€‚ä¸å…¶ä»–çº¯ Java AOP æ¡†æ¶ä¸€æ ·ï¼ŒSpring AOP åœ¨è¿è¡Œæ—¶å®Œæˆç»‡å…¥ã€‚</li></ul><p>ğŸ‘¿</p><h2 id="aopæ³¨è§£çš„æ–¹å¼"><a class="anchor" href="#aopæ³¨è§£çš„æ–¹å¼">#</a> AOP æ³¨è§£çš„æ–¹å¼</h2><p>éœ€è¦çš„åŒ…å¯ä»¥é€šè¿‡ maven å¯¼å…¥ï¼šspring-contextï¼ˆmaven ä¼šè‡ªåŠ¨ä¸‹è½½è¯¥åŒ…çš„ç›¸å…³ä¾èµ–ï¼Œæ¯”å¦‚ spring-aop ç­‰ï¼‰ã€cglibã€aspectjrtã€aopallianceã€spring-aspectsã€‚</p><p>applicationContext.xmlï¼š</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/aop<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        http://www.springframework.org/schema/beans/spring-beans.xsd</pre></td></tr><tr><td data-num="8"></td><td><pre>        http://www.springframework.org/schema/context</pre></td></tr><tr><td data-num="9"></td><td><pre>        http://www.springframework.org/schema/context/spring-context.xsd</pre></td></tr><tr><td data-num="10"></td><td><pre>        http://www.springframework.org/schema/aop</pre></td></tr><tr><td data-num="11"></td><td><pre>        http://www.springframework.org/schema/aop/spring-aop.xsd<span class="token punctuation">"</span><span class="token punctuation">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">&lt;!-- å¼€å¯åŒ…çš„æ‰«æ --></span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.fan<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">&lt;!-- å¼€å¯ AOP çš„æ³¨è§£åŠŸèƒ½ --></span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspectj-autoproxy</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>åˆ‡é¢ç±»ï¼š</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fan<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">JoinPoint</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">ProceedingJoinPoint</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">Signature</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Order</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token annotation punctuation">@Aspect</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token annotation punctuation">@Component</span> <span class="token comment">// ä¿è¯èƒ½è¢« ioc å®¹å™¨æ‰«æåˆ°è¯¥ç±»</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment">// å†³å®šåˆ‡é¢çš„æ‰§è¡Œé¡ºåºï¼Œé»˜è®¤æ˜¯æŒ‰ç…§åˆ‡é¢ç±»çš„é¦–å­—æ¯æ’åºæ‰§è¡Œ</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogUtil</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// ç›¸åŒçš„è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨åˆ‡å…¥ç‚¹æŠ½è±¡æˆä¸€ä¸ªæ–¹æ³•ä¾›å…¶ä»–é€šçŸ¥æ–¹æ³•å¼•ç”¨</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(public Integer com.fan.service.MyCalculator.*(..))"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myPointCut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* *(..))"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myPointCut1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">//@Before(value = "execution(public Integer com.fan.service.MyCalculator.*(..))")</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myPointCut()"</span><span class="token punctuation">)</span> <span class="token comment">// å‰ç½®é€šçŸ¥ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰å®Œæˆ</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token comment">// è·å–æ–¹æ³•ç­¾å</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token comment">// è·å–æ–¹æ³•å‚æ•°ä¿¡æ¯</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Log---"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æ–¹æ³•å¼€å§‹æ‰§è¡Œï¼šå‚æ•°æ˜¯"</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token comment">//@AfterReturning(value = "execution(public Integer com.fan.service.MyCalculator.*(..))", returning = "result")</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myPointCut()"</span><span class="token punctuation">,</span> returning <span class="token operator">=</span> <span class="token string">"result"</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›é€šçŸ¥ï¼Œåœ¨è¿”å›ç»“æœä¹‹åæ‰§è¡Œ</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Object</span> result<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Log---"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æ–¹æ³•æ‰§è¡Œç»“æŸï¼šç»“æœæ˜¯ï¼š"</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token comment">//@AfterThrowing(value = "execution(public Integer com.fan.service.MyCalculator.*(..))", throwing = "e")</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"myPointCut()"</span><span class="token punctuation">,</span> throwing <span class="token operator">=</span> <span class="token string">"e"</span><span class="token punctuation">)</span> <span class="token comment">// å¼‚å¸¸é€šçŸ¥ï¼Œå‡ºç°å¼‚å¸¸çš„æ—¶å€™æ‰§è¡Œ</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">logException</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Log---"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æŠ›å‡ºå¼‚å¸¸:"</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token comment">//@After("execution(public Integer com.fan.service.MyCalculator.*(..))")</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"myPointCut()"</span><span class="token punctuation">)</span> <span class="token comment">// åç½®é€šçŸ¥ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå®Œæˆä¹‹åæ‰§è¡Œ</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">logFinally</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Log---"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æ–¹æ³•æ‰§è¡Œç»“æŸ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"myPointCut()"</span><span class="token punctuation">)</span> <span class="token comment">// ç¯ç»•é€šçŸ¥ï¼Œæ›´ç»†ç²’åº¦çš„é€šçŸ¥æ–¹å¼</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>        <span class="token class-name">Signature</span> signature <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token class-name">Object</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Log---"</span> <span class="token operator">+</span> <span class="token string">"ç¯ç»•é€šçŸ¥startï¼š"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æ–¹æ³•å¼€å§‹æ‰§è¡Œï¼Œå‚æ•°ä¸ºï¼š"</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>            <span class="token comment">// é€šè¿‡åå°„çš„æ–¹å¼è°ƒç”¨ç›®æ ‡æ–¹æ³• (å¯ä»¥è‡ªå·±ä¿®æ”¹ç»“æœå€¼)ï¼Œç›¸å½“äº jdk ä¸­ä»£ç†çš„ method.invoke ()</span></pre></td></tr><tr><td data-num="60"></td><td><pre>            result <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Log---"</span> <span class="token operator">+</span> <span class="token string">"ç¯ç»•é€šçŸ¥stopï¼š"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Log---"</span> <span class="token operator">+</span> <span class="token string">"ç¯ç»•é€šçŸ¥å¼‚å¸¸ï¼š"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>            <span class="token comment">// å‡ºç°å¼‚å¸¸çš„æ—¶å€™ï¼Œåœ¨ç¯ç»•é€šçŸ¥ä¸­è§£å†³äº†ï¼Œé‚£ä¹ˆæ™®é€šé€šçŸ¥æ˜¯æ¥æ”¶ä¸åˆ°çš„ï¼Œå¦‚æœæƒ³è®©æ™®é€šé€šçŸ¥æ¥æ”¶åˆ°éœ€è¦è¿›è¡Œå¼‚å¸¸æŠ›å‡º</span></pre></td></tr><tr><td data-num="65"></td><td><pre>            <span class="token keyword">throw</span> throwable<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Log---"</span> <span class="token operator">+</span> <span class="token string">"ç¯ç»•é€šçŸ¥è¿”å›ï¼š"</span> <span class="token operator">+</span> signature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æ–¹æ³•è¿”å›ç»“æœæ˜¯ï¼š"</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="71"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>ä»¥ä¸Šåˆ‡é¢ç±»ä¸­éœ€è¦æ³¨æ„ï¼š</p><ul><li>é€šçŸ¥çš„æ‰§è¡Œé¡ºåºï¼š<br>å¦‚æœæ­£å¸¸æ‰§è¡Œï¼š@Before--&gt;@After--&gt;@AfterReturning<br>å¦‚æœå¼‚å¸¸æ‰§è¡Œï¼š@Before--&gt;@After--&gt;@AfterThrowing</li><li>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼š<br>æœ€ç²¾ç¡®çš„åŒ¹é…æ–¹å¼ï¼š<br>public Integer com.fan.service.MyCalculator.add(Integer, Integer)<br>åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ›´å¤šçš„æ—¶å€™ä½¿ç”¨é€šé…ç¬¦çš„æ–¹å¼<br>ä¸€ã€<br>1ã€å¯ä»¥ç”¨æ¥åŒ¹é…ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ï¼Œå¦‚ public Integer com.fan.service.MyCalculator.<em>(Integer, Integer)ï¼ŒåŒ¹é…å‚æ•°æ»¡è¶³å‚æ•°åˆ—è¡¨çš„å¤šä¸ªæ–¹æ³•<br>2ã€åŒ¹é…ä»»æ„ç±»å‹çš„å‚æ•°ï¼Œå¦‚ public Integer com.fan.service.M</em>Calculator.<em>(Integer, <em>)<br>3ã€åœ¨åŒ¹é…æ—¶ä¸€ä¸ª</em>åªèƒ½åŒ¹é…ä¸€å±‚è·¯å¾„ï¼Œè¦æƒ³åŒ¹é…å¤šå±‚ï¼Œå¦‚ä¸¤å±‚è·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ª</em>ï¼Œpublic Integer com.fan.*.*.MyCalculator.add (Integer, Integer)<br>4ã€ä¸èƒ½åŒ¹é…è®¿é—®ä¿®é¥°ç¬¦ï¼Œå¦‚æœä¸ç¡®å®šè®¿é—®ä¿®é¥°ç¬¦æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥ç›´æ¥çœç•¥ä¸å†™ï¼Œå¦‚ Integer com.fan.service.MyCalculator.add (Integer, Integer)<br>5ã€è¿”å›å€¼å¯ä»¥ä½¿ç”¨ * æ¥ä»£æ›¿ï¼Œpublic * com.fan.service.MyCalculator.add (Integer, Integer)<br>äºŒã€<br>1ã€å¯ä»¥åŒ¹é…ä»»æ„ç±»å‹çš„å¤šä¸ªå‚æ•°ï¼Œå¦‚ execution (* com.fan.service.MyCalculator.*(..))<br>2ã€å¯ä»¥åŒ¹é…å¤šå±‚è·¯å¾„ï¼Œå¦‚ execution (* com.fan..MyCalculator.*(..)<br>æœ€å·æ‡’çš„æ–¹å¼ï¼š<br>execution (* *(..))ï¼Œç¬¬ä¸€ä¸ª<em>ä»£è¡¨è¿”å›å€¼ç±»å‹ï¼Œç¬¬äºŒä¸ª</em>ä»£è¡¨æ‰€æœ‰è·¯å¾„<br>execution (* com..*(..))<br>execution(* *.*(..))<br>å¦‚æœè¡¨è¾¾å¼æ˜¯ä»¥ * å¼€å¤´ï¼Œé‚£ä¹ˆå¯ä»¥ä»£æ›¿æ‰€æœ‰è·¯å¾„<br>åœ¨ä½¿ç”¨è¡¨è¾¾å¼çš„æ—¶å€™è¿˜æ”¯æŒé€»è¾‘è¿ç®—ï¼š<br>&amp;&amp;ï¼šå¤šä¸ªæ¡ä»¶å¿…é¡»åŒæ—¶æ»¡è¶³<br>execution (public Integer com.fan.service.MyCalculator.*(..)) &amp;&amp; execution (* *(..))<br>||ï¼šå¤šä¸ªæ¡ä»¶åªè¦æ»¡è¶³å…¶ä¸­ä¸€ä¸ªå³å¯<br>execution (public Integer com.fan.service.MyCalculator.*(..)) || execution (* *(..))<br>!ï¼šå–åï¼Œé™¤äº†è¯¥ç§æƒ…å†µå¤–å…¶ä»–éƒ½æ»¡è¶³<br>ï¼execution (public Integer com.fan.service.MyCalculator.add (..))</li><li>å¦‚æœæƒ³è¦è·å–è¢«ä»£ç†ç±»æ–¹æ³•çš„å‚æ•°æˆ–è€…æ–¹æ³•åç§°ç­‰ä¿¡æ¯ï¼Œå¿…é¡»ä½¿ç”¨ JoinPoint å¯¹è±¡ï¼Œå¹¶ä¸”è¯¥å¯¹è±¡ä½œä¸ºæ–¹æ³•å‚æ•°å¿…é¡»åœ¨å‚æ•°åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªä½ç½®<br>getSignature ()<br>getArgs()</li><li>å¦‚æœæ–¹æ³•ä¸­æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆå¿…é¡»è¦åœ¨æ³¨è§£ä¸­æ·»åŠ  Returning=â€œå¸¦æœ‰è¿”å›å€¼çš„å‚æ•°â€ï¼Œè¯¥å‚æ•°å¿…é¡»è¦å’Œå‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°åç§°ä¿æŒä¸€è‡´<br>å¦‚æœéœ€è¦æ·»åŠ å¼‚å¸¸ä¿¡æ¯ï¼Œé‚£ä¹ˆåœ¨æ³¨è§£ä¸­è¦æ·»åŠ  Throwing=â€œå¼‚å¸¸å‚æ•°â€ï¼Œè¯¥å‚æ•°å¿…é¡»è¦å’Œå‚æ•°åˆ—è¡¨ä¸­å‚æ•°åç§°ä¿æŒä¸€è‡´</li><li>å¦‚æœæƒ³è¦æ·»åŠ å…¶ä»–å‚æ•°ï¼Œå¿…é¡»è¦æ·»åŠ  args (å‚æ•°åˆ—è¡¨)ï¼ŒArgNames (å‚æ•°åˆ—è¡¨)ï¼š<br>value = &quot;execution(public Integer com.fan.service.MyCalculator.*(..)) &amp;&amp; args(joinPoint,i)&quot;, argNames = &quot;joinPoint,i&quot;</li><li>é€šçŸ¥æ–¹æ³•åœ¨å®šä¹‰çš„æ—¶å€™å¯¹äºæ–¹æ³•çš„ä¿®é¥°ç¬¦ã€è¿”å›å€¼ç±»å‹éƒ½æ²¡æœ‰æ˜ç¡®çš„è¦æ±‚ï¼Œ<br>ä½†æ˜¯è¦æ³¨æ„ï¼Œæ–¹æ³•çš„å‚æ•°ä¸èƒ½éšä¾¿æ·»åŠ </li><li>ç¯ç»•é€šçŸ¥ï¼š<br>ç¯ç»•é€šçŸ¥åœ¨æ‰§è¡Œçš„æ—¶å€™ä¼˜å…ˆäºæ™®é€šé€šçŸ¥ï¼Œ<br>å¦‚æœæ˜¯æ­£å¸¸ç»“æŸï¼Œé‚£ä¹ˆæ‰§è¡Œé¡ºåºæ˜¯ï¼š<br>ç¯ç»•å‰ç½®é€šçŸ¥ --&gt;@Before--&gt; ç¯ç»•åç½®é€šçŸ¥ --&gt; ç¯ç»•è¿”å›é€šçŸ¥ --&gt;@After--&gt;@AfterReturning<br>å¦‚æœæ˜¯å¼‚å¸¸ç»“æŸï¼Œé‚£ä¹ˆæ‰§è¡Œé¡ºåºæ˜¯ï¼š<br>ç¯ç»•å‰ç½®é€šçŸ¥ --&gt;@Before--&gt; ç¯ç»•å¼‚å¸¸é€šçŸ¥ --&gt; ç¯ç»•è¿”å›é€šçŸ¥ --&gt;@After--&gt;@AfterReturning<br>å‡ºç°å¼‚å¸¸çš„æ—¶å€™ï¼Œåœ¨ç¯ç»•é€šçŸ¥ä¸­è§£å†³äº†ï¼Œé‚£ä¹ˆæ™®é€šé€šçŸ¥æ˜¯æ¥æ”¶ä¸åˆ°çš„ï¼Œå¦‚æœæƒ³è®©æ™®é€šé€šçŸ¥æ¥æ”¶åˆ°éœ€è¦è¿›è¡Œå¼‚å¸¸æŠ›å‡º throw throwableï¼Œæ­¤æ—¶æ‰§è¡Œé¡ºåºä¸ºï¼š<br>ç¯ç»•å‰ç½®é€šçŸ¥ --ã€‹@Before--ã€‹ç¯ç»•å¼‚å¸¸é€šçŸ¥ --ã€‹ç¯ç»•è¿”å›é€šçŸ¥ --ã€‹@After--ã€‹@AfterThrowing<br>å½“åº”ç”¨ç¨‹åºåŒ…å«å¤šä¸ªåˆ‡é¢ç±»çš„æ—¶å€™ï¼ŒæŒ‰ç…§åˆ‡é¢ç±»çš„åç§°çš„é¦–å­—æ¯è¿›è¡Œæ’åºåæ‰§è¡Œï¼Œå¦‚æœéœ€è¦äººä¸ºè§„å®šæ‰§è¡Œé¡ºåºï¼Œå¯æœ‰åœ¨åˆ‡é¢ç±»ä¸Šæ·»åŠ  @Order æ³¨è§£ï¼ŒåŒæ—¶å¯ä»¥æ·»åŠ å…·ä½“çš„å€¼ï¼Œå€¼è¶Šå°ï¼Œè¶Šä¼˜å…ˆã€‚</li></ul><p>éœ€è¦è¢«ä»¥ä¸Šåˆ‡é¢ç±»å¢å¼ºçš„ç±»ï¼š</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fan<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token annotation punctuation">@Service</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCalculator</span> <span class="token comment">/*implements Calculator*/</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> i<span class="token punctuation">,</span> <span class="token class-name">Integer</span> j<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchMethodException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">Integer</span> result <span class="token operator">=</span> i <span class="token operator">+</span> j<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> i<span class="token punctuation">,</span> <span class="token class-name">Integer</span> j<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchMethodException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">Integer</span> result <span class="token operator">=</span> i <span class="token operator">-</span> j<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> i<span class="token punctuation">,</span> <span class="token class-name">Integer</span> j<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchMethodException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">Integer</span> result <span class="token operator">=</span> i <span class="token operator">*</span> j<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> i<span class="token punctuation">,</span> <span class="token class-name">Integer</span> j<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchMethodException</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">Integer</span> result <span class="token operator">=</span> i <span class="token operator">/</span> j<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>âœ’ï¸</p><h2 id="aopçš„xmlé…ç½®æ–¹å¼"><a class="anchor" href="#aopçš„xmlé…ç½®æ–¹å¼">#</a> AOP çš„ XML é…ç½®æ–¹å¼</h2><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/aop<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans</span></pre></td></tr><tr><td data-num="6"></td><td><pre>       http://www.springframework.org/schema/beans/spring-beans.xsd</pre></td></tr><tr><td data-num="7"></td><td><pre>       http://www.springframework.org/schema/aop</pre></td></tr><tr><td data-num="8"></td><td><pre>       http://www.springframework.org/schema/aop/spring-aop.xsd<span class="token punctuation">"</span><span class="token punctuation">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>       </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logUtil<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.fan.util.LogUtil<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myCalculator<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.fan.service.MyCalculator<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">&lt;!-- é…ç½® aop--></span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token comment">&lt;!-- å®šä¹‰å…¨å±€çš„ pointcut--></span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">&lt;!--</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        &lt;aop:pointcut id="globalPointCut" expression="execution( Integer com.fan.service.MyCalculator.*(..))"/></pre></td></tr><tr><td data-num="18"></td><td><pre>--></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">&lt;!-- å£°æ˜åˆ‡é¢ --></span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logUtil<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token comment">&lt;!-- å°†é€šç”¨çš„è¡¨è¾¾å¼æŠ½å–å‡ºæ¥ --></span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>execution( Integer com.fan.service.MyCalculator.*(..))<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token comment">&lt;!-- å®šä¹‰åˆ‡é¢ä¸­çš„é€šçŸ¥æ–¹æ³•åœ¨åˆ‡å…¥ç‚¹æ‰€å®šä¹‰çš„è¿æ¥ç‚¹æ–¹æ³•ä¸Šä½¿ç”¨ --></span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>start<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>before</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logFinally<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-returning</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stop<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span> <span class="token attr-name">returning</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>result<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after-returning</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-throwing</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logException<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span> <span class="token attr-name">throwing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>e<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after-throwing</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>around</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>around<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>around</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>securityUtil<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>start<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>before</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logFinally<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-returning</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stop<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span> <span class="token attr-name">returning</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>result<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after-returning</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-throwing</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logException<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span> <span class="token attr-name">throwing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>e<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after-throwing</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>around</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>around<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myPointCut<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>around</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>ğŸ““</p><h2 id="aopå¯¹äºäº‹åŠ¡çš„ç®¡ç†"><a class="anchor" href="#aopå¯¹äºäº‹åŠ¡çš„ç®¡ç†">#</a> AOP å¯¹äºäº‹åŠ¡çš„ç®¡ç†</h2><h3 id="aopåŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡"><a class="anchor" href="#aopåŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡">#</a> AOP åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡</h3><p>ç”¨åˆ°çš„ jar åŒ…ï¼šspring-contextã€cglibã€aspectjrtã€aopallianceã€spring-aspectsã€druidã€mysql-connector-javaã€spring-jdbc</p><p>applicationContext.xml</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/tx<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans</span></pre></td></tr><tr><td data-num="7"></td><td><pre>       http://www.springframework.org/schema/beans/spring-beans.xsd</pre></td></tr><tr><td data-num="8"></td><td><pre>       http://www.springframework.org/schema/context</pre></td></tr><tr><td data-num="9"></td><td><pre>       http://www.springframework.org/schema/context/spring-context.xsd</pre></td></tr><tr><td data-num="10"></td><td><pre>       http://www.springframework.org/schema/tx</pre></td></tr><tr><td data-num="11"></td><td><pre>       http://www.springframework.org/schema/tx/spring-tx.xsd<span class="token punctuation">"</span><span class="token punctuation">></span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.fan<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token comment">&lt;!-- åŠ è½½æ•°æ®åº“é…ç½®æ–‡ä»¶ --></span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classpath:db.properties<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>property-placeholder</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.username&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.password&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.url&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.driverName&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token comment">&lt;!--JdbcTemplate ç›¸å½“äºå¢åˆ æ”¹æŸ¥æ¨¡æ¿ --></span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbcTemplate<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.jdbc.core.JdbcTemplate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨çš„ bean å¯¹è±¡ --></span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token comment">&lt;!-- å¼€å¯åŸºäºæ³¨è§£çš„äº‹åŠ¡ç®¡ç†å™¨çš„é…ç½® --></span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>annotation-driven</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>äº‹åŠ¡ç±»ï¼š</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fan<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>fan<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">BookDao</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Isolation</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Propagation</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Transactional</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileNotFoundException</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token annotation punctuation">@Service</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookService</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token annotation punctuation">@Autowired</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">BookDao</span> bookDao<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">//@Transactional(timeout = 3)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">//@Transactional(readOnly = true)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token comment">//@Transactional(noRollbackFor = &#123;ArithmeticException.class&#125;)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">//@Transactional(noRollbackForClassName = &#123;"java.lang.ArithmeticException"&#125;)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">//@Transactional(rollbackFor = &#123;FileNotFoundException.class&#125;)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">//@Transactional(rollbackForClassName = &#123;"java.io.FileNotFoundException"&#125;)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>propagation <span class="token operator">=</span> <span class="token class-name">Propagation</span><span class="token punctuation">.</span>NESTED<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buyBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        bookDao<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        bookDao<span class="token punctuation">.</span><span class="token function">updateBalance</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        bookDao<span class="token punctuation">.</span><span class="token function">updateStock</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token comment">//timeout  è¶…æ—¶æ—¶é—´æµ‹è¯•</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token comment">//Thread.sleep(3000);</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token comment">// å¼‚å¸¸ä¸å›æ»šæµ‹è¯•:noRollbackFor = &#123;ArithmeticException.class&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token comment">//int i = 1/0;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token comment">//1ã€å¦‚æœä½¿ç”¨ try catch æŠŠå¼‚å¸¸ int i = 1/0; æ•æ‰å¤„ç†åï¼Œä»£ç ä»ç„¶å¯ä»¥ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œæ­¤æ—¶äº‹åŠ¡ @Transactional</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token comment">// ä¸å†èµ·ä½œç”¨</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token comment">/*try &#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            int i = 1/0;</pre></td></tr><tr><td data-num="39"></td><td><pre>        &#125; catch (Exception e) &#123;</pre></td></tr><tr><td data-num="40"></td><td><pre>            e.printStackTrace();</pre></td></tr><tr><td data-num="41"></td><td><pre>        &#125;*/</pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token comment">//2ã€é‡åˆ°å¼‚å¸¸ int i = 1/0; ç›´æ¥æ‰§è¡Œ catch å¤„ç†å¼‚å¸¸ï¼Œç„¶åç»“æŸï¼Œä¸ä¼šæ‰§è¡Œ bookDao.updateStock (1);</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token comment">// äº‹åŠ¡ @Transactional ä¸ä¼šèµ·ä½œç”¨</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token comment">/*try&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>            bookDao.getPrice(1);</pre></td></tr><tr><td data-num="47"></td><td><pre>            bookDao.updateBalance("zhangsan", 100);</pre></td></tr><tr><td data-num="48"></td><td><pre>            int i = 1/0;</pre></td></tr><tr><td data-num="49"></td><td><pre>            bookDao.updateStock(1);</pre></td></tr><tr><td data-num="50"></td><td><pre>        &#125;catch(Exception e)&#123;</pre></td></tr><tr><td data-num="51"></td><td><pre>            e.printStackTrace();</pre></td></tr><tr><td data-num="52"></td><td><pre>        &#125;*/</pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre>        <span class="token comment">// å¼‚å¸¸å›æ»šæµ‹è¯•ï¼šrollbackFor = &#123;FileNotFoundException.class&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>        <span class="token comment">//new File("a.txt");</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="57"></td><td><pre></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token annotation punctuation">@Transactional</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updatePrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        bookDao<span class="token punctuation">.</span><span class="token function">updatePrice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="62"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>ä»¥ä¸Šäº‹åŠ¡ç±»ä¸­éœ€è¦æ³¨æ„ï¼š</p><ul java.io.filenotfoundexception=""><li><p>@Transactional(propagation = <span class="exturl" data-url="aHR0cDovL1Byb3BhZ2F0aW9uLlhYWA==">Propagation.XXX</span>) æ³¨è§£ä¸­çš„å€¼ï¼š</p><p>propagation: ä¼ æ’­ç‰¹æ€§ï¼šè¡¨ç¤ºä¸åŒçš„äº‹åŠ¡ä¹‹é—´æ‰§è¡Œçš„å…³ç³»ï¼Œè°ƒç”¨äº‹åŠ¡æ–¹æ³•çš„äº‹åŠ¡æ–¹æ³•ä¸å½“å‰äº‹åŠ¡æ–¹æ³•åœ¨ä¸åŒçš„ç±»ä¸­æ—¶æ‰æœ‰äº‹åŠ¡ä¼ æ’­ç‰¹æ€§ï¼Œå¦‚æœæ˜¯åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯åŒä¸€ä¸ªäº‹åŠ¡ï¼Œä¸å†å…·å¤‡ AOP çš„äº‹åŠ¡ä¼ æ’­ç‰¹æ€§ã€‚</p><p>spring çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºå…±æœ‰ 7 ç§ï¼š(ä»¥ä¸‹å½“å‰æ–¹æ³•æ˜¯æŒ‡è¢«äº‹åŠ¡æ³¨è§£ Transactional () æ ‡è®°çš„æ–¹æ³•)</p><p>1ã€REQUIREDï¼šå¦‚æœæœ‰äº‹åŠ¡åœ¨è¿è¡Œï¼Œå½“å‰çš„æ–¹æ³• (è¢«è°ƒç”¨çš„äº‹åŠ¡æ–¹æ³•) å°±åœ¨è¿™ä¸ªäº‹åŠ¡å†…è¿è¡Œï¼Œå¦åˆ™å°±å¯åŠ¨ä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå¹¶åœ¨è‡ªå·±çš„äº‹åŠ¡å†…è¿è¡Œ</p><p>å¦‚æœå½“å‰æ–¹æ³•æœ‰å¼‚å¸¸ï¼Œå³ä½¿åœ¨è°ƒç”¨å½“å‰æ–¹æ³•çš„æ–¹æ³•ï¼ˆäº‹åŠ¡æ–¹æ³•ï¼‰ä¸­å°†å½“å‰æ–¹æ³•çš„å¼‚å¸¸è¿›è¡Œ try catchï¼Œé‚£ä¹ˆè°ƒç”¨å½“å‰æ–¹æ³•çš„æ–¹æ³•ä¸­çš„å…¶ä»–ä»£ç ä»ç„¶ä¼šè¿›è¡Œå›æ»šã€‚</p><p>å¦‚æœè°ƒç”¨å½“å‰æ–¹æ³•çš„äº‹åŠ¡æ–¹æ³•ä¸­æœ‰å¼‚å¸¸æˆ–è€…è°ƒç”¨å½“å‰æ–¹æ³•çš„äº‹åŠ¡æ–¹æ³•ä¸­è°ƒç”¨çš„å…¶ä»–æ–¹æ³•æœ‰å¼‚å¸¸ï¼Œé‚£ä¹ˆå½“å‰æ–¹æ³•ä¼šè¿›è¡Œå›æ»šã€‚</p><p>æ€»ç»“ï¼šREQUIRED äº‹åŠ¡æ–¹æ³•ä¾èµ–äºå¤–éƒ¨äº‹åŠ¡æ–¹æ³•ï¼Œæ— è®ºæ˜¯å½“å‰äº‹åŠ¡æ–¹æ³•è¿˜æ˜¯è°ƒç”¨å½“å‰äº‹åŠ¡æ–¹æ³•çš„äº‹åŠ¡æ–¹æ³•ï¼Œåªè¦ä»»æ„ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•ä¸­æœ‰å¼‚å¸¸ï¼Œé‚£ä¹ˆå…¨éƒ¨äº‹åŠ¡æ–¹æ³•éƒ½å°†è¿›è¡Œå›æ»šã€‚</p><p>2ã€REQUIRES_NEWï¼šå½“å‰çš„æ–¹æ³•å¯åŠ¨æ–°äº‹åŠ¡ï¼ˆè¿™ç§äº‹åŠ¡æ˜¯ç‹¬ç«‹çš„ï¼Œä¸è°ƒç”¨å½“å‰æ–¹æ³•çš„æ–¹æ³•æ˜¯å¦æœ‰äº‹åŠ¡æ— å…³ï¼‰ï¼Œå¹¶åœ¨å®ƒè‡ªå·±çš„äº‹åŠ¡å†…è¿è¡Œï¼Œå¦‚æœæœ‰äº‹åŠ¡æ­£åœ¨è¿è¡Œï¼Œåº”è¯¥å°†ä»–æŒ‚èµ·ï¼ˆæš‚åœï¼‰ã€‚</p><p>å¦‚æœå½“å‰æ–¹æ³•æœ‰å¼‚å¸¸ï¼Œå¹¶ä¸”åœ¨è°ƒç”¨å½“å‰æ–¹æ³•çš„æ–¹æ³•ï¼ˆäº‹åŠ¡æ–¹æ³•ï¼‰ä¸­å°†å½“å‰æ–¹æ³•çš„å¼‚å¸¸è¿›è¡Œ try catch æ•è·å¤„ç†ï¼Œé‚£ä¹ˆè°ƒç”¨å½“å‰æ–¹æ³•çš„æ–¹æ³•ä¸­çš„å…¶ä»–ä»£ç ä¸ä¼šè¿›è¡Œå›æ»šï¼Œè€Œåªå¯¹å½“å‰æ–¹æ³•çš„ä»£ç è¿›è¡Œå›æ»šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒREQUIRES_NEW å¯åŠ¨ä¸€ä¸ªç‹¬ç«‹çš„æ–°äº‹åŠ¡ï¼Œè¯¥äº‹åŠ¡ä¸ä¼šå½±å“å…¶ä»–äº‹åŠ¡å¹¶ä¸”ä¹Ÿä¸ä¼šå—å…¶ä»–äº‹åŠ¡çš„å½±å“ã€‚</p><p>å¦‚æœè°ƒç”¨å½“å‰æ–¹æ³•çš„æ–¹æ³•ä¸­æœ‰å¼‚å¸¸ï¼Œé‚£ä¹ˆå½“å‰æ–¹æ³•ä¸ä¼šè¿›è¡Œå›æ»šï¼Œå› ä¸ºå½“å‰æ–¹æ³•æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–°äº‹åŠ¡ä¸”æ²¡æœ‰å¼‚å¸¸ï¼Œæ— éœ€è¿›è¡Œå›æ»šã€‚</p><p>æ€»ç»“ï¼šREQUIRES_NEW äº‹åŠ¡æ–¹æ³•ä¸ä¾èµ–äºå¤–éƒ¨äº‹åŠ¡æ–¹æ³•ï¼Œåªæœ‰å½“å‰äº‹åŠ¡æ–¹æ³•ä¸­æœ‰å¼‚å¸¸æ‰ä¼šè¿›è¡Œå›æ»šã€‚</p><p>3ã€SUPPORTSï¼šå¦‚æœæœ‰äº‹åŠ¡åœ¨è¿è¡Œï¼Œå½“å‰çš„æ–¹æ³•å°±åœ¨è¿™ä¸ªäº‹åŠ¡å†…è¿è¡Œï¼Œå¦åˆ™å®ƒä¸è¿è¡Œåœ¨äº‹åŠ¡ä¸­</p><p>4ã€NOT_SUPPORTEDï¼šå½“å‰çš„æ–¹æ³•ä¸åº”è¯¥è¿è¡Œåœ¨äº‹åŠ¡ä¸­ï¼Œå¦‚æœæœ‰è¿è¡Œçš„äº‹åŠ¡ï¼Œå°†ä»–æŒ‚èµ·ï¼Œç›´åˆ°å½“å‰æ–¹æ³•æ‰§è¡Œå®Œæ¯•</p><p>5ã€NEVERï¼šå½“å‰çš„æ–¹æ³•ä¸åº”è¯¥è¿è¡Œåœ¨äº‹åŠ¡ä¸­ï¼Œå¦‚æœæœ‰è¿è¡Œçš„äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ï¼ˆå³å½“å‰æ–¹æ³•ä¸ä¼šæ­£å¸¸æ‰§è¡Œï¼‰</p><p>6ã€MANDATORYï¼šå½“å‰çš„æ–¹æ³•å¿…é¡»è¿è¡Œåœ¨äº‹åŠ¡å†…ï¼Œå¦‚æœæ²¡æœ‰æ­£åœ¨è¿è¡Œçš„äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ï¼ˆå³å½“å‰æ–¹æ³•ä¸ä¼šæ­£å¸¸æ‰§è¡Œï¼‰</p><p>7ã€NESTEDï¼šå¦‚æœæœ‰äº‹åŠ¡åœ¨è¿è¡Œï¼Œå½“å‰çš„æ–¹æ³•å°±åº”è¯¥åœ¨è¿™ä¸ªäº‹åŠ¡çš„åµŒå¥—äº‹åŠ¡ï¼ˆè¢«è°ƒç”¨çš„å­äº‹åŠ¡æ–¹æ³•ï¼ŒåŒ…æ‹¬å½“å‰æ–¹æ³•ï¼‰å†…è¿è¡Œï¼Œå¦åˆ™ï¼Œå°±å¯åŠ¨ä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå¹¶åœ¨å®ƒè‡ªå·±çš„äº‹åŠ¡å†…è¿è¡Œ.</p><p>å¦‚æœå½“å‰æ–¹æ³•æœ‰å¼‚å¸¸ï¼Œå¹¶ä¸”åœ¨è°ƒç”¨å½“å‰æ–¹æ³•çš„æ–¹æ³•ï¼ˆäº‹åŠ¡æ–¹æ³•ï¼‰ä¸­å°†å½“å‰æ–¹æ³•çš„å¼‚å¸¸è¿›è¡Œ try catch æ•è·å¤„ç†ï¼Œé‚£ä¹ˆè°ƒç”¨å½“å‰æ–¹æ³•çš„æ–¹æ³•ä¸­çš„å…¶ä»–äº‹åŠ¡æ–¹æ³•ä»£ç ä¸ä¼šè¿›è¡Œå›æ»šï¼Œè€Œåªå¯¹å½“å‰æ–¹æ³•çš„ä»£ç è¿›è¡Œå›æ»šï¼Œè¿™ä¸ REQUIRES_NEW ç›¸åŒã€‚</p><p>å¦‚æœè°ƒç”¨å½“å‰æ–¹æ³•çš„æ–¹æ³•ä¸­æœ‰å¼‚å¸¸ä¸”æ²¡æœ‰è¿›è¡Œ try catch å¼‚å¸¸æ•è·å¤„ç†ï¼Œé‚£ä¹ˆå…¨éƒ¨äº‹åŠ¡æ–¹æ³•å°†è¿›è¡Œå›æ»šï¼Œè¿™ä¸ REQUIRES_NEW åˆšå¥½ç›¸åã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ NESTED äº‹åŠ¡æ–¹æ³•é™¤äº†äºè‡ªèº«æœ‰å…³å¤–ä¸è°ƒç”¨å½“å‰æ–¹æ³•çš„äº‹åŠ¡æ–¹æ³•ä¹Ÿæ˜¯æœ‰å…³ç³»çš„ï¼Œåªè¦è°ƒç”¨å½“å‰æ–¹æ³•çš„äº‹åŠ¡æ–¹æ³•ä¸­æœ‰å¼‚å¸¸æˆ–è€…è°ƒç”¨å½“å‰æ–¹æ³•çš„äº‹åŠ¡æ–¹æ³•ä¸­è°ƒç”¨çš„å…¶ä»–æ–¹æ³•æœ‰å¼‚å¸¸ï¼Œé‚£ä¹ˆå½“å‰æ–¹æ³•å°±ä¼šè¿›è¡Œå›æ»šã€‚</p><p>æ€»ç»“ï¼šNESTED äº‹åŠ¡æ–¹æ³•æœ‰å¼‚å¸¸ï¼Œé‚£ä¹ˆ NESTED äº‹åŠ¡æ–¹æ³•å°†è¿›è¡Œå›æ»šã€‚è°ƒç”¨ NESTED äº‹åŠ¡æ–¹æ³•çš„äº‹åŠ¡æ–¹æ³•æœ‰å¼‚å¸¸ï¼Œé‚£ä¹ˆå…¨éƒ¨äº‹åŠ¡æ–¹æ³•å°†è¿›è¡Œå›æ»šã€‚</p></li><li><p>timeout: è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œè¶…è¿‡è¯¥æ—¶é—´å°±ä¼šè¿›è¡Œå›æ»š</p></li><li><p>readonly: åªè¯»äº‹åŠ¡ï¼šå¦‚æœé…ç½®äº†åªè¯»äº‹åŠ¡ï¼Œé‚£ä¹ˆåœ¨äº‹åŠ¡è¿è¡ŒæœŸé—´ï¼Œä¸å…è®¸å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸</p></li><li java.lang.arithmeticexception=""><p>è®¾ç½®å“ªäº›å¼‚å¸¸å‘ç”Ÿæ—¶äº‹åŠ¡ä¸è¿›è¡Œå›æ»šï¼šä¸¤è€…é™¤äº†å‚æ•°å½¢å¼ä¸åŒå¤–ï¼ŒåŠŸèƒ½ç›¸åŒ</p><p arithmeticexception.class="">noRollBackFor: å¦‚ï¼šnoRollbackFor =</p><p>noRollBackForClassName: å¦‚ï¼šnoRollbackForClassName =</p></li><li><p>è®¾ç½®å“ªäº›å¼‚å¸¸å‘ç”Ÿæ—¶è¿›è¡Œäº‹åŠ¡å›æ»šï¼š</p><p filenotfoundexception.class="">rollBackFor: å¦‚ï¼šrollbackFor =</p><p>rollbackForClassName: å¦‚ï¼šrollbackForClassName =</p></li></ul><p>DAO å±‚ç±»ä½¿ç”¨ spring-jdbc æä¾›çš„ JdbcTemplate æ¥æ“ä½œæ•°æ®åº“ï¼š</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>fan<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JdbcTemplate</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Repository</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token annotation punctuation">@Repository</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDao</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token annotation punctuation">@Autowired</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="12"></td><td><pre>     * å‡å»æŸä¸ªç”¨æˆ·çš„ä½™é¢</pre></td></tr><tr><td data-num="13"></td><td><pre>     * @param userName</pre></td></tr><tr><td data-num="14"></td><td><pre>     * @param price</pre></td></tr><tr><td data-num="15"></td><td><pre>     */</pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateBalance</span><span class="token punctuation">(</span><span class="token class-name">String</span> userName<span class="token punctuation">,</span> <span class="token keyword">int</span> price<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update account set balance=balance-? where username=?"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> price<span class="token punctuation">,</span> userName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="22"></td><td><pre>     * é€šè¿‡å›¾ä¹¦ id è·å–å›¾ä¹¦ä»·æ ¼</pre></td></tr><tr><td data-num="23"></td><td><pre>     * @param id</pre></td></tr><tr><td data-num="24"></td><td><pre>     * @return</pre></td></tr><tr><td data-num="25"></td><td><pre>     */</pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select price from book where id=?"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="32"></td><td><pre>     * æ›´æ”¹æŸæœ¬ä¹¦çš„åº“å­˜</pre></td></tr><tr><td data-num="33"></td><td><pre>     * @param id</pre></td></tr><tr><td data-num="34"></td><td><pre>     */</pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateStock</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update book_stock set stock=stock-1 where id=?"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="41"></td><td><pre>     * æ›´æ–°ä»·æ ¼</pre></td></tr><tr><td data-num="42"></td><td><pre>     * @param id</pre></td></tr><tr><td data-num="43"></td><td><pre>     */</pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updatePrice</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update book set price=price-1 where id=?"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="aopåŸºäºxmlé…ç½®çš„å£°æ˜å¼äº‹åŠ¡"><a class="anchor" href="#aopåŸºäºxmlé…ç½®çš„å£°æ˜å¼äº‹åŠ¡">#</a> AOP åŸºäº XML é…ç½®çš„å£°æ˜å¼äº‹åŠ¡</h3><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/aop<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/tx<span class="token punctuation">"</span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans</span></pre></td></tr><tr><td data-num="8"></td><td><pre>       http://www.springframework.org/schema/beans/spring-beans.xsd</pre></td></tr><tr><td data-num="9"></td><td><pre>       http://www.springframework.org/schema/context</pre></td></tr><tr><td data-num="10"></td><td><pre>       https://www.springframework.org/schema/context/spring-context.xsd</pre></td></tr><tr><td data-num="11"></td><td><pre>       http://www.springframework.org/schema/aop</pre></td></tr><tr><td data-num="12"></td><td><pre>       https://www.springframework.org/schema/aop/spring-aop.xsd</pre></td></tr><tr><td data-num="13"></td><td><pre>       http://www.springframework.org/schema/tx</pre></td></tr><tr><td data-num="14"></td><td><pre>       http://www.springframework.org/schema/tx/spring-tx.xsd<span class="token punctuation">"</span><span class="token punctuation">></span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.fan<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classpath:db.properties<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>property-placeholder</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.username&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.password&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.url&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.driverName&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbcTemplate<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.jdbc.core.JdbcTemplate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">&lt;!-- äº‹åŠ¡çš„é…ç½® --></span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token comment">&lt;!-- å£°æ˜ä¸€ä¸ªäº‹åŠ¡ç®¡ç†å™¨ --></span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="35"></td><td><pre>    </pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exPointcut<span class="token punctuation">"</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>execution(* com.fan.service.*.*(..))<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token comment">&lt;!-- äº‹åŠ¡å»ºè®® --></span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myAdvice<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exPointcut<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>advisor</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myAdvice<span class="token punctuation">"</span></span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token comment">&lt;!-- é…ç½®äº‹åŠ¡çš„å±æ€§ --></span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="44"></td><td><pre>            <span class="token comment">&lt;!-- é…ç½®åœ¨å“ªäº›æ–¹æ³•ä¸Šæ·»åŠ äº‹åŠ¡ä»¥åŠäº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§ --></span></pre></td></tr><tr><td data-num="45"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>addBook<span class="token punctuation">"</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>REQUIRED<span class="token punctuation">"</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="46"></td><td><pre>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updatePrice<span class="token punctuation">"</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>REQUIRED<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>method</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="47"></td><td><pre>            <span class="token comment">&lt;!-- æ–¹æ³•åç§°æ”¯æŒé€šé…ç¬¦ --></span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token comment">&lt;!--</span></pre></td></tr><tr><td data-num="49"></td><td><pre>            &lt;tx:method name="*" propagation="REQUIRED">&lt;/tx:method></pre></td></tr><tr><td data-num="50"></td><td><pre>--></pre></td></tr><tr><td data-num="51"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯æœ¬æœŸå†…å®¹å…³äº AOP çš„ä»‹ç»ã€‚</p><p>â“‚ï¸æˆ‘æ˜¯ä¸€åªå°ç™½çŒ¿ï¼Œä¸‹æœŸè§ï¼</p><div class="tags"><a href="/tags/Java/" rel="tag"><i class="ic i-tag"></i> Java</a> <a href="/tags/Spring/" rel="tag"><i class="ic i-tag"></i> Spring</a> <a href="/tags/AOP/" rel="tag"><i class="ic i-tag"></i> AOP</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-12-24 11:39:13" itemprop="dateModified" datetime="2021-12-24T11:39:13+08:00">2021-12-24</time> </span><span id="/AOP" class="item leancloud_visitors" data-flag-title="AOP" title="é˜…è¯»æ¬¡æ•°"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">é˜…è¯»æ¬¡æ•°</span> <span class="leancloud-visitors-count"></span> <span class="text">æ¬¡</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> èµèµ</button><p>è¯·æˆ‘å–[èŒ¶]~(ï¿£â–½ï¿£)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="fanfanfan å¾®ä¿¡æ”¯ä»˜"><p>å¾®ä¿¡æ”¯ä»˜</p></div><div><img data-src="/images/alipay.png" alt="fanfanfan æ”¯ä»˜å®"><p>æ”¯ä»˜å®</p></div><div><img data-src="/images/paypal.png" alt="fanfanfan PayPal"><p>PayPal</p></div></div></div><div id="copyright"><ul><li class="author"><strong>æœ¬æ–‡ä½œè€…ï¼š </strong>fanfanfan <i class="ic i-at"><em>@</em></i></li><li class="link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="https://baiyezi.vip/AOP" title="AOP">https://baiyezi.vip/AOP</a></li><li class="license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/IOC%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;bfanfanfan&#x2F;img&#x2F;raw&#x2F;master&#x2F;guzhuang&#x2F;20211225105418.jpg" title="IOCæ³¨è§£æ–¹å¼"><span class="type">ä¸Šä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> Java</span><h3>IOCæ³¨è§£æ–¹å¼</h3></a></div><div class="item right"><a href="/SpringBoot%E5%85%A5%E9%97%A8" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;gitee.com&#x2F;bfanfanfan&#x2F;img&#x2F;raw&#x2F;master&#x2F;guzhuang&#x2F;20211225104957.png" title="SpringBootå…¥é—¨"><span class="type">ä¸‹ä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> Java</span><h3>SpringBootå…¥é—¨</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="æ–‡ç« ç›®å½•"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#aop%E4%B8%AD%E7%9A%84%E6%9C%AF%E8%AF%AD"><span class="toc-number">1.</span> <span class="toc-text">AOP ä¸­çš„æœ¯è¯­</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aop%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">AOP æ³¨è§£çš„æ–¹å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aop%E7%9A%84xml%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">AOP çš„ XML é…ç½®æ–¹å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#aop%E5%AF%B9%E4%BA%8E%E4%BA%8B%E5%8A%A1%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">AOP å¯¹äºäº‹åŠ¡çš„ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#aop%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="toc-number">4.1.</span> <span class="toc-text">AOP åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aop%E5%9F%BA%E4%BA%8Exml%E9%85%8D%E7%BD%AE%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="toc-number">4.2.</span> <span class="toc-text">AOP åŸºäº XML é…ç½®çš„å£°æ˜å¼äº‹åŠ¡</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="ç³»åˆ—æ–‡ç« "><ul><li><a href="/Linux%E4%B8%8B%E5%AE%89%E8%A3%85MySQL" rel="bookmark" title="Linuxä¸‹å®‰è£…MySQL">Linuxä¸‹å®‰è£…MySQL</a></li><li><a href="/MySQL%E5%9F%BA%E7%A1%80" rel="bookmark" title="MySQLåŸºç¡€">MySQLåŸºç¡€</a></li><li><a href="/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="IOCé…ç½®æ–¹å¼ï¼ˆä¸€ï¼‰">IOCé…ç½®æ–¹å¼ï¼ˆä¸€ï¼‰</a></li><li><a href="/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%BA%8C%EF%BC%89" rel="bookmark" title="IOCé…ç½®æ–¹å¼ï¼ˆäºŒï¼‰">IOCé…ç½®æ–¹å¼ï¼ˆäºŒï¼‰</a></li><li><a href="/IOC%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F" rel="bookmark" title="IOCæ³¨è§£æ–¹å¼">IOCæ³¨è§£æ–¹å¼</a></li><li class="active"><a href="/AOP" rel="bookmark" title="AOP">AOP</a></li><li><a href="/SpringBoot%E5%85%A5%E9%97%A8" rel="bookmark" title="SpringBootå…¥é—¨">SpringBootå…¥é—¨</a></li><li><a href="/SpringBoot-Web%E5%BC%80%E5%8F%91" rel="bookmark" title="SpringBoot-Webå¼€å‘">SpringBoot-Webå¼€å‘</a></li><li><a href="/SpringBoot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E5%8E%9F%E7%90%86" rel="bookmark" title="SpringBootè‡ªåŠ¨è£…é…åŸç†">SpringBootè‡ªåŠ¨è£…é…åŸç†</a></li><li><a href="/zookeeper%E6%90%AD%E5%BB%BA%E5%8F%8A%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" rel="bookmark" title="zookeeperæ­å»ºåŠåŸºæœ¬æ¦‚å¿µ">zookeeperæ­å»ºåŠåŸºæœ¬æ¦‚å¿µ</a></li><li><a href="/zookeeper%E5%8E%9F%E7%90%86" rel="bookmark" title="zookeeperåŸç†">zookeeperåŸç†</a></li><li><a href="/zookeeper%E6%A1%88%E4%BE%8B" rel="bookmark" title="zookeeperæ¡ˆä¾‹">zookeeperæ¡ˆä¾‹</a></li><li><a href="/MySQL%E8%B0%83%E4%BC%98%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="MySQLè°ƒä¼˜ï¼ˆä¸€ï¼‰">MySQLè°ƒä¼˜ï¼ˆä¸€ï¼‰</a></li><li><a href="/redis%E5%AE%89%E8%A3%85%E5%8F%8ANIO%E5%8E%9F%E7%90%86" rel="bookmark" title="rediså®‰è£…åŠNIOåŸç†">rediså®‰è£…åŠNIOåŸç†</a></li><li><a href="/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="SpringMVCå…¥é—¨ï¼ˆä¸€ï¼‰">SpringMVCå…¥é—¨ï¼ˆä¸€ï¼‰</a></li><li><a href="/SpringMVC%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89" rel="bookmark" title="SpringMVCå…¥é—¨ï¼ˆäºŒï¼‰">SpringMVCå…¥é—¨ï¼ˆäºŒï¼‰</a></li><li><a href="/SpringMVC-REST%E9%A3%8E%E6%A0%BC" rel="bookmark" title="SpringMVC-RESTé£æ ¼">SpringMVC-RESTé£æ ¼</a></li><li><a href="/SpringMVC%E8%BF%9B%E9%98%B6" rel="bookmark" title="SpringMVCè¿›é˜¶">SpringMVCè¿›é˜¶</a></li><li><a href="/SpringMVC%E6%BA%90%E7%A0%81%E6%80%BB%E7%BB%93" rel="bookmark" title="SpringMVCæºç æ€»ç»“">SpringMVCæºç æ€»ç»“</a></li><li><a href="/shiro%E5%85%A5%E9%97%A8" rel="bookmark" title="shiroå…¥é—¨">shiroå…¥é—¨</a></li><li><a href="/shiro%E6%95%B4%E5%90%88SpringBoot" rel="bookmark" title="shiroæ•´åˆSpringBoot">shiroæ•´åˆSpringBoot</a></li><li><a href="/shiro%E7%9A%84session%E7%AE%A1%E7%90%86" rel="bookmark" title="shiroçš„sessionç®¡ç†">shiroçš„sessionç®¡ç†</a></li><li><a href="/shiro%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E7%99%BB%E5%BD%95" rel="bookmark" title="shiroçš„ç¼“å­˜æœºåˆ¶ä¸åˆ†å¸ƒå¼ç™»å½•">shiroçš„ç¼“å­˜æœºåˆ¶ä¸åˆ†å¸ƒå¼ç™»å½•</a></li><li><a href="/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95" rel="bookmark" title="å•ç‚¹ç™»å½•">å•ç‚¹ç™»å½•</a></li><li><a href="/%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" rel="bookmark" title="çº¿ç¨‹åŸºç¡€çŸ¥è¯†">çº¿ç¨‹åŸºç¡€çŸ¥è¯†</a></li><li><a href="/%E5%AE%B9%E5%99%A8%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%B1%A0" rel="bookmark" title="å®¹å™¨ä¸çº¿ç¨‹æ± ">å®¹å™¨ä¸çº¿ç¨‹æ± </a></li><li><a href="/Win10%E5%AE%89%E8%A3%85docker" rel="bookmark" title="Win10å®‰è£…docker">Win10å®‰è£…docker</a></li><li><a href="/Win10%E5%AE%89%E8%A3%85docker" rel="bookmark" title="Win10å®‰è£…docker">Win10å®‰è£…docker</a></li><li><a href="/JMH" rel="bookmark" title="JMH">JMH</a></li><li><a href="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B" rel="bookmark" title="å¹¶å‘ç¼–ç¨‹">å¹¶å‘ç¼–ç¨‹</a></li><li><a href="/java-%E6%97%A5%E5%BF%97%E4%BD%93%E7%B3%BB" rel="bookmark" title="java-æ—¥å¿—ä½“ç³»">java-æ—¥å¿—ä½“ç³»</a></li><li><a href="/redis%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" rel="bookmark" title="redisçš„æ•°æ®ç±»å‹">redisçš„æ•°æ®ç±»å‹</a></li><li><a href="/redis%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8" rel="bookmark" title="redisè¿›é˜¶ä½¿ç”¨">redisè¿›é˜¶ä½¿ç”¨</a></li><li><a href="/redis%E7%9A%84%E9%9B%86%E7%BE%A4" rel="bookmark" title="redisçš„é›†ç¾¤">redisçš„é›†ç¾¤</a></li><li><a href="/redis%E5%9C%A8%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8" rel="bookmark" title="redisåœ¨å¼€å‘ä¸­çš„ç®€å•ä½¿ç”¨">redisåœ¨å¼€å‘ä¸­çš„ç®€å•ä½¿ç”¨</a></li><li><a href="/ChainOfResponsibility%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F" rel="bookmark" title="ChainOfResponsibilityè´£ä»»é“¾æ¨¡å¼">ChainOfResponsibilityè´£ä»»é“¾æ¨¡å¼</a></li><li><a href="/Composite%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Compositeç»„åˆæ¨¡å¼">Compositeç»„åˆæ¨¡å¼</a></li><li><a href="/Decorator%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Decoratorè£…é¥°å™¨æ¨¡å¼">Decoratorè£…é¥°å™¨æ¨¡å¼</a></li><li><a href="/Facade%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Facadeé—¨é¢æ¨¡å¼">Facadeé—¨é¢æ¨¡å¼</a></li><li><a href="/Factory%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Factoryå·¥å‚æ¨¡å¼">Factoryå·¥å‚æ¨¡å¼</a></li><li><a href="/Flyweight%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Flyweightäº«å…ƒæ¨¡å¼">Flyweightäº«å…ƒæ¨¡å¼</a></li><li><a href="/Iterator%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Iteratorè¿­ä»£å™¨æ¨¡å¼">Iteratorè¿­ä»£å™¨æ¨¡å¼</a></li><li><a href="/Mediator%E8%B0%83%E5%81%9C%E8%80%85%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Mediatorè°ƒåœè€…æ¨¡å¼">Mediatorè°ƒåœè€…æ¨¡å¼</a></li><li><a href="/Observer%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Observerè§‚å¯Ÿè€…æ¨¡å¼">Observerè§‚å¯Ÿè€…æ¨¡å¼</a></li><li><a href="/Singleton%E5%8D%95%E4%BE%8B" rel="bookmark" title="Singletonå•ä¾‹">Singletonå•ä¾‹</a></li><li><a href="/Proxy%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F" rel="bookmark" title="Proxyä»£ç†æ¨¡å¼">Proxyä»£ç†æ¨¡å¼</a></li><li><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BB%A5%E5%8F%8A%E6%9E%B6%E6%9E%84%E5%8F%91%E5%B1%95" rel="bookmark" title="å¾®æœåŠ¡ä»¥åŠæ¶æ„å‘å±•">å¾®æœåŠ¡ä»¥åŠæ¶æ„å‘å±•</a></li><li><a href="/JVM-%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD" rel="bookmark" title="JVM-ç±»çš„åŠ è½½">JVM-ç±»çš„åŠ è½½</a></li><li><a href="/SpringCloud-Netflix%E4%BD%93%E7%B3%BB" rel="bookmark" title="SpringCloud-Netflixä½“ç³»">SpringCloud-Netflixä½“ç³»</a></li><li><a href="/%E5%BA%8F%E5%88%97%E5%8C%96" rel="bookmark" title="åºåˆ—åŒ–">åºåˆ—åŒ–</a></li><li><a href="/JVM-JMM" rel="bookmark" title="JVM-JMM">JVM-JMM</a></li><li><a href="/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84" rel="bookmark" title="åˆ†å¸ƒå¼ç³»ç»Ÿä¸é«˜å¹¶å‘ç³»ç»Ÿæ¶æ„">åˆ†å¸ƒå¼ç³»ç»Ÿä¸é«˜å¹¶å‘ç³»ç»Ÿæ¶æ„</a></li><li><a href="/JVM-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA" rel="bookmark" title="JVM-å¯¹è±¡çš„åˆ›å»º">JVM-å¯¹è±¡çš„åˆ›å»º</a></li><li><a href="/JVM-JVM%E8%B0%83%E4%BC%98" rel="bookmark" title="JVM-JVMè°ƒä¼˜">JVM-JVMè°ƒä¼˜</a></li><li><a href="/JVM-GC" rel="bookmark" title="JVM-GC">JVM-GC</a></li><li><a href="/SpringCloud-Alibaba%E4%BD%93%E7%B3%BB" rel="bookmark" title="SpringCloud-Alibabaä½“ç³»">SpringCloud-Alibabaä½“ç³»</a></li><li><a href="/SpringCloud-SpringCloud%E4%BD%93%E7%B3%BB" rel="bookmark" title="SpringCloud-SpringCloudä½“ç³»">SpringCloud-SpringCloudä½“ç³»</a></li><li><a href="/Apollo" rel="bookmark" title="Apollo">Apollo</a></li><li><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%B8%80%EF%BC%89" rel="bookmark" title="å¾®æœåŠ¡ä¸­çš„ä¼šè¯ç®¡ç†ï¼ˆä¸€ï¼‰">å¾®æœåŠ¡ä¸­çš„ä¼šè¯ç®¡ç†ï¼ˆä¸€ï¼‰</a></li><li><a href="/%E7%A3%81%E7%9B%98IO%E4%B8%8E%E7%BD%91%E7%BB%9CIO" rel="bookmark" title="ç£ç›˜IOä¸ç½‘ç»œIO">ç£ç›˜IOä¸ç½‘ç»œIO</a></li><li><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%BA%8C%EF%BC%89" rel="bookmark" title="å¾®æœåŠ¡ä¸­çš„ä¼šè¯ç®¡ç†ï¼ˆäºŒï¼‰">å¾®æœåŠ¡ä¸­çš„ä¼šè¯ç®¡ç†ï¼ˆäºŒï¼‰</a></li><li><a href="/HTTPS" rel="bookmark" title="HTTPS">HTTPS</a></li><li><a href="/RocketMQ-%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5" rel="bookmark" title="RocketMQ-åŸºç¡€æ¦‚å¿µ">RocketMQ-åŸºç¡€æ¦‚å¿µ</a></li><li><a href="/RocketMQ-%E6%B6%88%E6%81%AF%E3%80%81%E4%BA%8B%E5%8A%A1" rel="bookmark" title="RocketMQ-æ¶ˆæ¯ã€äº‹åŠ¡">RocketMQ-æ¶ˆæ¯ã€äº‹åŠ¡</a></li><li><a href="/Kafka-%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84" rel="bookmark" title="Kafka-æ•´ä½“æ¶æ„">Kafka-æ•´ä½“æ¶æ„</a></li><li><a href="/%E7%BD%91%E7%BB%9CIO%E6%A8%A1%E5%9E%8B" rel="bookmark" title="ç½‘ç»œIOæ¨¡å‹">ç½‘ç»œIOæ¨¡å‹</a></li><li><a href="/Kafka-%E6%90%AD%E5%BB%BA" rel="bookmark" title="Kafka-æ­å»º">Kafka-æ­å»º</a></li><li><a href="/Netty" rel="bookmark" title="Netty">Netty</a></li><li><a href="/nginx%E5%AE%9E%E6%88%98" rel="bookmark" title="nginxå®æˆ˜">nginxå®æˆ˜</a></li><li><a href="/Java%E5%92%8C%E4%B8%B2%E5%8F%A3%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1" rel="bookmark" title="Javaå’Œä¸²å£è¿›è¡Œé€šä¿¡">Javaå’Œä¸²å£è¿›è¡Œé€šä¿¡</a></li></ul></div><div class="overview panel" data-title="ç«™ç‚¹æ¦‚è§ˆ"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="fanfanfan" data-src="/images/avatar.png"><p class="name" itemprop="name">fanfanfan</p><div class="description" itemprop="description">èŠ±æœ‰é‡å¼€æ—¥ï¼Œäººæ— å†å°‘å¹´</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">73</span> <span class="name">æ–‡ç« </span></a></div><div class="item categories"><a href="/categories/"><span class="count">3</span> <span class="name">åˆ†ç±»</span></a></div><div class="item tags"><a href="/tags/"><span class="count">77</span> <span class="name">æ ‡ç­¾</span></a></div></nav><div class="social"></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>é¦–é¡µ</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>æ–‡ç« </a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>å½’æ¡£</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>åˆ†ç±»</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>æ ‡ç­¾</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-magic"></i>å‹é“¾</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>å…³äº</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/IOC%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F" rel="prev" title="ä¸Šä¸€ç¯‡"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/SpringBoot%E5%85%A5%E9%97%A8" rel="next" title="ä¸‹ä¸€ç¯‡"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>éšæœºæ–‡ç« </h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/shiro%E6%95%B4%E5%90%88SpringBoot" title="shiroæ•´åˆSpringBoot">shiroæ•´åˆSpringBoot</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/SpringMVC%E8%BF%9B%E9%98%B6" title="SpringMVCè¿›é˜¶">SpringMVCè¿›é˜¶</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/IOC%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F" title="IOCæ³¨è§£æ–¹å¼">IOCæ³¨è§£æ–¹å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/instruments/" title="åˆ†ç±»äº å·¥å…·">å·¥å…·</a></div><span><a href="/%E5%9F%BA%E4%BA%8ETypora%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%88%B6%E4%BD%9C" title="åŸºäºTyporaçš„æµç¨‹å›¾åˆ¶ä½œ">åŸºäºTyporaçš„æµç¨‹å›¾åˆ¶ä½œ</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/zookeeper%E6%90%AD%E5%BB%BA%E5%8F%8A%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" title="zookeeperæ­å»ºåŠåŸºæœ¬æ¦‚å¿µ">zookeeperæ­å»ºåŠåŸºæœ¬æ¦‚å¿µ</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/IOC%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89" title="IOCé…ç½®æ–¹å¼ï¼ˆä¸€ï¼‰">IOCé…ç½®æ–¹å¼ï¼ˆä¸€ï¼‰</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/nginx%E5%AE%9E%E6%88%98" title="nginxå®æˆ˜">nginxå®æˆ˜</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/Win10%E5%AE%89%E8%A3%85docker" title="Win10å®‰è£…docker">Win10å®‰è£…docker</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/Kafka-%E6%90%AD%E5%BB%BA" title="Kafka-æ­å»º">Kafka-æ­å»º</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%AD%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%EF%BC%88%E4%B8%80%EF%BC%89" title="å¾®æœåŠ¡ä¸­çš„ä¼šè¯ç®¡ç†ï¼ˆä¸€ï¼‰">å¾®æœåŠ¡ä¸­çš„ä¼šè¯ç®¡ç†ï¼ˆä¸€ï¼‰</a></span></li></ul></div><div><h2>æœ€æ–°è¯„è®º</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 â€“ <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">fanfanfan @</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="ç«™ç‚¹æ€»å­—æ•°">1.3m å­—</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">20:22</span></div><div class="powered-by">åŸºäº <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"/AOP",favicon:{show:"ä¹¦é™¢åå››å…ˆç”Ÿ",hide:"ä¹¦é™¢åå››å…ˆç”Ÿ"},search:{placeholder:"æ–‡ç« æœç´¢",empty:"å…³äº ã€Œ ${query} ã€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœåˆ°",stats:"${time} ms å†…æ‰¾åˆ° ${hits} æ¡ç»“æœ"},valine:!0,fancybox:!0,copyright:'å¤åˆ¶æˆåŠŸï¼Œè½¬è½½è¯·éµå®ˆ <i class="ic i-creative-commons"></i>BY-NC-SA åè®®ã€‚',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->